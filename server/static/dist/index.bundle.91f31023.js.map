{"version":3,"file":"index.bundle.91f31023.js","sources":["webpack:///index.bundle.91f31023.js"],"sourcesContent":["/*!\n * ftest\n * Version: 0.0.1\n * Author: hh\n * Group: 360 SkyEye FrontEnd\n * Build Time: 7/13/2017, 10:23:56 AM\n */\nwebpackJsonp([0],[function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}n(2),n(3),n(4),n(5),n(8);var r=n(9),a=i(r),o=n(11),s=i(o),u=n(194),l=i(u),c=n(46),h=i(c),f=n(197),d=i(f);a.default.use(d.default),d.default.vueInstall({module:\"v\",name:\"config\"},h.default);var p=function(){return new a.default({el:\"body\",replace:!1,components:{App:s.default},store:l.default})};p()},,function(t,e){},function(t,e){},function(t,e){},function(t,e,n){var i;(function(r,a){/*! UIkit 2.27.1 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */\n!function(r){if(n(7)&&(i=function(){var t=window.UIkit||r(window,a,window.document);return t.load=function(e,n,i,r){var a,o=e.split(\",\"),s=[],u=(r.config&&r.config.uikit&&r.config.uikit.base?r.config.uikit.base:\"\").replace(/\\/+$/g,\"\");if(!u)throw new Error(\"Please define base path to UIkit in the requirejs config.\");for(a=0;a<o.length;a+=1){var l=o[a].replace(/\\./g,\"/\");s.push(u+\"/components/\"+l)}n(s,function(){i(t)})},t}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))),!a)throw new Error(\"UIkit requires jQuery\");window&&a&&r(window,a,window.document)}(function(t,e,n){\"use strict\";var i={},a=t.UIkit?Object.create(t.UIkit):void 0;if(i.version=\"2.27.1\",i.noConflict=function(){return a&&(t.UIkit=a,e.UIkit=a,e.fn.uk=a.fn),i},i.prefix=function(t){return t},i.$=e,i.$doc=i.$(document),i.$win=i.$(window),i.$html=i.$(\"html\"),i.support={},i.support.transition=function(){var t=function(){var t,e=n.body||n.documentElement,i={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}(),i.support.animation=function(){var t=function(){var t,e=n.body||n.documentElement,i={WebkitAnimation:\"webkitAnimationEnd\",MozAnimation:\"animationend\",OAnimation:\"oAnimationEnd oanimationend\",animation:\"animationend\"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}(),function(){Date.now=Date.now||function(){return(new Date).getTime()};for(var t=[\"webkit\",\"moz\"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+\"RequestAnimationFrame\"],window.cancelAnimationFrame=window[n+\"CancelAnimationFrame\"]||window[n+\"CancelRequestAnimationFrame\"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}(),i.support.touch=\"ontouchstart\"in document||t.DocumentTouch&&document instanceof t.DocumentTouch||t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints>0||t.navigator.pointerEnabled&&t.navigator.maxTouchPoints>0||!1,i.support.mutationobserver=t.MutationObserver||t.WebKitMutationObserver||null,i.Utils={},i.Utils.isFullscreen=function(){return document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||!1},i.Utils.str2json=function(t,e){try{return e?JSON.parse(t.replace(/([\\$\\w]+)\\s*:/g,function(t,e){return'\"'+e+'\":'}).replace(/'([^']+)'/g,function(t,e){return'\"'+e+'\"'})):new Function(\"\",\"var json = \"+t+\"; return JSON.parse(JSON.stringify(json));\")()}catch(t){return!1}},i.Utils.debounce=function(t,e,n){var i;return function(){var r=this,a=arguments,o=function(){i=null,n||t.apply(r,a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,e),s&&t.apply(r,a)}},i.Utils.throttle=function(t,e){var n=!1;return function(){n||(t.call(),n=!0,setTimeout(function(){n=!1},e))}},i.Utils.removeCssRules=function(t){var e,n,i,r,a,o,s,u,l,c;t&&setTimeout(function(){try{for(c=document.styleSheets,r=0,s=c.length;s>r;r++){for(i=c[r],n=[],i.cssRules=i.cssRules,e=a=0,u=i.cssRules.length;u>a;e=++a)i.cssRules[e].type===CSSRule.STYLE_RULE&&t.test(i.cssRules[e].selectorText)&&n.unshift(e);for(o=0,l=n.length;l>o;o++)i.deleteRule(n[o])}}catch(t){}},0)},i.Utils.isInView=function(t,n){var r=e(t);if(!r.is(\":visible\"))return!1;var a=i.$win.scrollLeft(),o=i.$win.scrollTop(),s=r.offset(),u=s.left,l=s.top;return n=e.extend({topoffset:0,leftoffset:0},n),l+r.height()>=o&&l-n.topoffset<=o+i.$win.height()&&u+r.width()>=a&&u-n.leftoffset<=a+i.$win.width()},i.Utils.checkDisplay=function(t,n){var r=i.$(\"[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]\",t||document);return t&&!r.length&&(r=e(t)),r.trigger(\"display.uk.check\"),n&&(\"string\"!=typeof n&&(n='[class*=\"uk-animation-\"]'),r.find(n).each(function(){var t=i.$(this),e=t.attr(\"class\"),n=e.match(/uk-animation-(.+)/);t.removeClass(n[0]).width(),t.addClass(n[0])})),r},i.Utils.options=function(t){if(\"string\"!=e.type(t))return t;-1!=t.indexOf(\":\")&&\"}\"!=t.trim().substr(-1)&&(t=\"{\"+t+\"}\");var n=t?t.indexOf(\"{\"):-1,r={};if(-1!=n)try{r=i.Utils.str2json(t.substr(n))}catch(t){}return r},i.Utils.animate=function(t,n){var r=e.Deferred();return t=i.$(t),t.css(\"display\",\"none\").addClass(n).one(i.support.animation.end,function(){t.removeClass(n),r.resolve()}),t.css(\"display\",\"\"),r.promise()},i.Utils.uid=function(t){return(t||\"id\")+(new Date).getTime()+\"RAND\"+Math.ceil(1e5*Math.random())},i.Utils.template=function(t,e){for(var n,i,r,a,o=t.replace(/\\n/g,\"\\\\n\").replace(/\\{\\{\\{\\s*(.+?)\\s*\\}\\}\\}/g,\"{{!$1}}\").split(/(\\{\\{\\s*(.+?)\\s*\\}\\})/g),s=0,u=[],l=0;s<o.length;){if(n=o[s],n.match(/\\{\\{\\s*(.+?)\\s*\\}\\}/))switch(s+=1,n=o[s],i=n[0],r=n.substring(n.match(/^(\\^|\\#|\\!|\\~|\\:)/)?1:0),i){case\"~\":u.push(\"for(var $i=0;$i<\"+r+\".length;$i++) { var $item = \"+r+\"[$i];\"),l++;break;case\":\":u.push(\"for(var $key in \"+r+\") { var $val = \"+r+\"[$key];\"),l++;break;case\"#\":u.push(\"if(\"+r+\") {\"),l++;break;case\"^\":u.push(\"if(!\"+r+\") {\"),l++;break;case\"/\":u.push(\"}\"),l--;break;case\"!\":u.push(\"__ret.push(\"+r+\");\");break;default:u.push(\"__ret.push(escape(\"+r+\"));\")}else u.push(\"__ret.push('\"+n.replace(/\\'/g,\"\\\\'\")+\"');\");s+=1}return a=new Function(\"$data\",[\"var __ret = [];\",\"try {\",\"with($data){\",l?'__ret = [\"Not all blocks are closed correctly.\"]':u.join(\"\"),\"};\",\"}catch(e){__ret = [e.message];}\",'return __ret.join(\"\").replace(/\\\\n\\\\n/g, \"\\\\n\");',\"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}\"].join(\"\\n\")),e?a(e):a},i.Utils.focus=function(t,n){t=e(t);var i,r=t.find(\"[autofocus]:first\");return r.length?r.focus():(r=t.find(\":input\"+(n&&\",\"+n||\"\")).first(),r.length?r.focus():(t.attr(\"tabindex\")||(i=1e3,t.attr(\"tabindex\",i)),t[0].focus(),i&&t.attr(\"tabindex\",\"\"),t))},i.Utils.events={},i.Utils.events.click=i.support.touch?\"tap\":\"click\",t.UIkit=i,i.fn=function(t,n){var r=arguments,a=t.match(/^([a-z\\-]+)(?:\\.([a-z]+))?/i),o=a[1],s=a[2];return i[o]?this.each(function(){var t=e(this),a=t.data(o);a||t.data(o,a=i[o](this,s?void 0:n)),s&&a[s].apply(a,Array.prototype.slice.call(r,1))}):(e.error(\"UIkit component [\"+o+\"] does not exist.\"),this)},e.UIkit=i,e.fn.uk=i.fn,i.langdirection=\"rtl\"==i.$html.attr(\"dir\")?\"right\":\"left\",i.components={},i.component=function(t,n){var a=function(n,r){var o=this;return this.UIkit=i,this.element=n?i.$(n):null,this.options=e.extend(!0,{},this.defaults,r),this.plugins={},this.element&&this.element.data(t,this),this.init(),(this.options.plugins.length?this.options.plugins:Object.keys(a.plugins)).forEach(function(t){a.plugins[t].init&&(a.plugins[t].init(o),o.plugins[t]=!0)}),this.trigger(\"init.uk.component\",[t,this]),this};return a.plugins={},e.extend(!0,a.prototype,{defaults:{plugins:[]},boot:function(){},init:function(){},on:function(t,e,n){return i.$(this.element||this).on(t,e,n)},one:function(t,e,n){return i.$(this.element||this).one(t,e,n)},off:function(t){return i.$(this.element||this).off(t)},trigger:function(t,e){return i.$(this.element||this).trigger(t,e)},find:function(t){return i.$(this.element?this.element:[]).find(t)},proxy:function(t,e){var n=this;e.split(\" \").forEach(function(e){n[e]||(n[e]=function(){return t[e].apply(t,arguments)})})},mixin:function(t,e){var n=this;e.split(\" \").forEach(function(e){n[e]||(n[e]=t[e].bind(n))})},option:function(){return 1==arguments.length?this.options[arguments[0]]||void 0:void(2==arguments.length&&(this.options[arguments[0]]=arguments[1]))}},n),this.components[t]=a,this[t]=function(){var n,a;if(arguments.length)switch(arguments.length){case 1:\"string\"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof r?n=e(arguments[0]):a=arguments[0];break;case 2:n=e(arguments[0]),a=arguments[1]}return n&&n.data(t)?n.data(t):new i.components[t](n,a)},i.domready&&i.component.boot(t),a},i.plugin=function(t,e,n){this.components[t].plugins[e]=n},i.component.boot=function(t){i.components[t].prototype&&i.components[t].prototype.boot&&!i.components[t].booted&&(i.components[t].prototype.boot.apply(i,[]),i.components[t].booted=!0)},i.component.bootComponents=function(){for(var t in i.components)i.component.boot(t)},i.domObservers=[],i.domready=!1,i.ready=function(t){i.domObservers.push(t),i.domready&&t(document)},i.on=function(t,e,n){return t&&t.indexOf(\"ready.uk.dom\")>-1&&i.domready&&e.apply(i.$doc),i.$doc.on(t,e,n)},i.one=function(t,e,n){return t&&t.indexOf(\"ready.uk.dom\")>-1&&i.domready?(e.apply(i.$doc),i.$doc):i.$doc.one(t,e,n)},i.trigger=function(t,e){return i.$doc.trigger(t,e)},i.domObserve=function(t,e){i.support.mutationobserver&&(e=e||function(){},i.$(t).each(function(){var t=this,n=i.$(t);if(!n.data(\"observer\"))try{var r=new i.support.mutationobserver(i.Utils.debounce(function(){e.apply(t,[n]),n.trigger(\"changed.uk.dom\")},50),{childList:!0,subtree:!0});r.observe(t,{childList:!0,subtree:!0}),n.data(\"observer\",r)}catch(t){}}))},i.init=function(t){t=t||document,i.domObservers.forEach(function(e){e(t)})},i.on(\"domready.uk.dom\",function(){i.init(),i.domready&&i.Utils.checkDisplay()}),document.addEventListener(\"DOMContentLoaded\",function(){var t=function(){i.$body=i.$(\"body\"),i.trigger(\"beforeready.uk.dom\"),i.component.bootComponents();var t=requestAnimationFrame(function(){var e={dir:{x:0,y:0},x:window.pageXOffset,y:window.pageYOffset},n=function(){var r=window.pageXOffset,a=window.pageYOffset;(e.x!=r||e.y!=a)&&(e.dir.x=r!=e.x?r>e.x?1:-1:0,e.dir.y=a!=e.y?a>e.y?1:-1:0,e.x=r,e.y=a,i.$doc.trigger(\"scrolling.uk.document\",[{dir:{x:e.dir.x,y:e.dir.y},x:r,y:a}])),cancelAnimationFrame(t),t=requestAnimationFrame(n)};return i.support.touch&&i.$html.on(\"touchmove touchend MSPointerMove MSPointerUp pointermove pointerup\",n),(e.x||e.y)&&n(),n}());if(i.trigger(\"domready.uk.dom\"),i.support.touch&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&i.$win.on(\"load orientationchange resize\",i.Utils.debounce(function(){var t=function(){return e(\".uk-height-viewport\").css(\"height\",window.innerHeight),t};return t()}(),100)),i.trigger(\"afterready.uk.dom\"),i.domready=!0,i.support.mutationobserver){var n=i.Utils.debounce(function(){requestAnimationFrame(function(){i.init(document.body)})},10);new i.support.mutationobserver(function(t){var e=!1;t.every(function(t){if(\"childList\"!=t.type)return!0;for(var n,i=0;i<t.addedNodes.length;++i)if(n=t.addedNodes[i],n.outerHTML&&-1!==n.outerHTML.indexOf(\"data-uk-\"))return(e=!0)&&!1;return!0}),e&&n()}).observe(document.body,{childList:!0,subtree:!0})}};return(\"complete\"==document.readyState||\"interactive\"==document.readyState)&&setTimeout(t),t}()),i.$html.addClass(i.support.touch?\"uk-touch\":\"uk-notouch\"),i.support.touch){var o,s=!1,u=\"uk-hover\",l=\".uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover\";i.$html.on(\"mouseenter touchstart MSPointerDown pointerdown\",l,function(){s&&e(\".\"+u).removeClass(u),s=e(this).addClass(u)}).on(\"mouseleave touchend MSPointerUp pointerup\",function(t){o=e(t.target).parents(l),s&&s.not(o).removeClass(u)})}return i}),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?\"Left\":\"Right\":n-i>0?\"Up\":\"Down\"}function n(){l=null,h.last&&(void 0!==h.el&&h.el.trigger(\"longTap\"),h={})}function i(){l&&clearTimeout(l),l=null}function r(){o&&clearTimeout(o),s&&clearTimeout(s),u&&clearTimeout(u),l&&clearTimeout(l),o=s=u=l=null,h={}}function a(t){return t.pointerType==t.MSPOINTER_TYPE_TOUCH&&t.isPrimary}if(!t.fn.swipeLeft){var o,s,u,l,c,h={},f=750;t(function(){var d,p,_,v=0,g=0;\"MSGesture\"in window&&(c=new MSGesture,c.target=document.body),t(document).on(\"MSGestureEnd gestureend\",function(t){var e=t.originalEvent.velocityX>1?\"Right\":t.originalEvent.velocityX<-1?\"Left\":t.originalEvent.velocityY>1?\"Down\":t.originalEvent.velocityY<-1?\"Up\":null;e&&void 0!==h.el&&(h.el.trigger(\"swipe\"),h.el.trigger(\"swipe\"+e))}).on(\"touchstart MSPointerDown pointerdown\",function(e){(\"MSPointerDown\"!=e.type||a(e.originalEvent))&&(_=\"MSPointerDown\"==e.type||\"pointerdown\"==e.type?e:e.originalEvent.touches[0],d=Date.now(),p=d-(h.last||d),h.el=t(\"tagName\"in _.target?_.target:_.target.parentNode),o&&clearTimeout(o),h.x1=_.pageX,h.y1=_.pageY,p>0&&250>=p&&(h.isDoubleTap=!0),h.last=d,l=setTimeout(n,f),!c||\"MSPointerDown\"!=e.type&&\"pointerdown\"!=e.type&&\"touchstart\"!=e.type||c.addPointer(e.originalEvent.pointerId))}).on(\"touchmove MSPointerMove pointermove\",function(t){(\"MSPointerMove\"!=t.type||a(t.originalEvent))&&(_=\"MSPointerMove\"==t.type||\"pointermove\"==t.type?t:t.originalEvent.touches[0],i(),h.x2=_.pageX,h.y2=_.pageY,v+=Math.abs(h.x1-h.x2),g+=Math.abs(h.y1-h.y2))}).on(\"touchend MSPointerUp pointerup\",function(n){(\"MSPointerUp\"!=n.type||a(n.originalEvent))&&(i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?u=setTimeout(function(){void 0!==h.el&&(h.el.trigger(\"swipe\"),h.el.trigger(\"swipe\"+e(h.x1,h.x2,h.y1,h.y2))),h={}},0):\"last\"in h&&(isNaN(v)||30>v&&30>g?s=setTimeout(function(){var e=t.Event(\"tap\");e.cancelTouch=r,void 0!==h.el&&h.el.trigger(e),h.isDoubleTap?(void 0!==h.el&&h.el.trigger(\"doubleTap\"),h={}):o=setTimeout(function(){o=null,void 0!==h.el&&h.el.trigger(\"singleTap\"),h={}},250)},0):h={},v=g=0))}).on(\"touchcancel MSPointerCancel pointercancel\",r),t(window).on(\"scroll\",r)}),[\"swipe\",\"swipeLeft\",\"swipeRight\",\"swipeUp\",\"swipeDown\",\"doubleTap\",\"tap\",\"singleTap\",\"longTap\"].forEach(function(e){t.fn[e]=function(n){return t(this).on(e,n)}})}}(r),function(t){\"use strict\";var e=[];t.component(\"stackMargin\",{defaults:{cls:\"uk-margin-small-top\",rowfirst:!1,observe:!1},boot:function(){t.ready(function(e){t.$(\"[data-uk-margin]\",e).each(function(){var e=t.$(this);e.data(\"stackMargin\")||t.stackMargin(e,t.Utils.options(e.attr(\"data-uk-margin\")))})})},init:function(){var n=this;t.$win.on(\"resize orientationchange\",function(){var e=function(){n.process()};return t.$(function(){e(),t.$win.on(\"load\",e)}),t.Utils.debounce(e,20)}()),this.on(\"display.uk.check\",function(){this.element.is(\":visible\")&&this.process()}.bind(this)),this.options.observe&&t.domObserve(this.element,function(){n.element.is(\":visible\")&&n.process()}),e.push(this)},process:function(){var e=this.element.children();if(t.Utils.stackMargin(e,this.options),!this.options.rowfirst||!e.length)return this;var n={},i=!1;return e.removeClass(this.options.rowfirst).each(function(e,r){r=t.$(this),\"none\"!=this.style.display&&(e=r.offset().left,((n[e]=n[e]||[])&&n[e]).push(this),i=i===!1?e:Math.min(i,e))}),t.$(n[i]).addClass(this.options.rowfirst),this}}),function(){var e=[],n=function(t){if(t.is(\":visible\")){var e=t.parent().width(),n=t.data(\"width\"),i=e/n,r=Math.floor(i*t.data(\"height\"));t.css({height:n>e?r:t.data(\"height\")})}};t.component(\"responsiveElement\",{defaults:{},boot:function(){t.ready(function(e){t.$(\"iframe.uk-responsive-width, [data-uk-responsive]\",e).each(function(){var e,n=t.$(this);n.data(\"responsiveElement\")||(e=t.responsiveElement(n,{}))})})},init:function(){var t=this.element;t.attr(\"width\")&&t.attr(\"height\")&&(t.data({width:t.attr(\"width\"),height:t.attr(\"height\")}).on(\"display.uk.check\",function(){n(t)}),n(t),e.push(t))}}),t.$win.on(\"resize load\",t.Utils.debounce(function(){e.forEach(function(t){n(t)})},15))}(),t.Utils.stackMargin=function(e,n){n=t.$.extend({cls:\"uk-margin-small-top\"},n),e=t.$(e).removeClass(n.cls);var i=!1;e.each(function(e,n,r,a){a=t.$(this),\"none\"!=a.css(\"display\")&&(e=a.offset(),n=a.outerHeight(),r=e.top+n,a.data({ukMarginPos:r,ukMarginTop:e.top}),(i===!1||e.top<i.top)&&(i={top:e.top,left:e.left,pos:r}))}).each(function(e){e=t.$(this),\"none\"!=e.css(\"display\")&&e.data(\"ukMarginTop\")>i.top&&e.data(\"ukMarginPos\")>i.pos&&e.addClass(n.cls)})},t.Utils.matchHeights=function(e,n){e=t.$(e).css(\"min-height\",\"\"),n=t.$.extend({row:!0},n);var i=function(e){if(!(e.length<2)){var n=0;e.each(function(){n=Math.max(n,t.$(this).outerHeight())}).each(function(){var e=t.$(this),i=n-(\"border-box\"==e.css(\"box-sizing\")?0:e.outerHeight()-e.height());e.css(\"min-height\",i+\"px\")})}};n.row?(e.first().width(),setTimeout(function(){var n=!1,r=[];e.each(function(){var e=t.$(this),a=e.offset().top;a!=n&&r.length&&(i(t.$(r)),r=[],a=e.offset().top),r.push(e),n=a}),r.length&&i(t.$(r))},0)):i(e)},function(e){t.Utils.inlineSvg=function(n,i){t.$(n||'img[src$=\".svg\"]',i||document).each(function(){var n=t.$(this),i=n.attr(\"src\");if(!e[i]){var r=t.$.Deferred();t.$.get(i,{nc:Math.random()},function(e){r.resolve(t.$(e).find(\"svg\"))}),e[i]=r.promise()}e[i].then(function(e){var i=t.$(e).clone();n.attr(\"id\")&&i.attr(\"id\",n.attr(\"id\")),n.attr(\"class\")&&i.attr(\"class\",n.attr(\"class\")),n.attr(\"style\")&&i.attr(\"style\",n.attr(\"style\")),n.attr(\"width\")&&(i.attr(\"width\",n.attr(\"width\")),n.attr(\"height\")||i.removeAttr(\"height\")),n.attr(\"height\")&&(i.attr(\"height\",n.attr(\"height\")),n.attr(\"width\")||i.removeAttr(\"width\")),n.replaceWith(i)})})},t.ready(function(e){t.Utils.inlineSvg(\"[data-uk-svg]\",e)})}({}),t.Utils.getCssVar=function(t){var e,n=document.documentElement,i=n.appendChild(document.createElement(\"div\"));i.classList.add(\"var-\"+t);try{e=JSON.parse(e=getComputedStyle(i,\":before\").content.replace(/^[\"'](.*)[\"']$/,\"$1\"))}catch(t){e=void 0}return n.removeChild(i),e}}(UIkit),function(t){\"use strict\";function e(e,n){n=t.$.extend({duration:1e3,transition:\"easeOutExpo\",offset:0,complete:function(){}},n);var i=e.offset().top-n.offset,r=t.$doc.height(),a=window.innerHeight;i+a>r&&(i=r-a),t.$(\"html,body\").stop().animate({scrollTop:i},n.duration,n.transition).promise().done(n.complete)}t.component(\"smoothScroll\",{boot:function(){t.$html.on(\"click.smooth-scroll.uikit\",\"[data-uk-smooth-scroll]\",function(){var e=t.$(this);return e.data(\"smoothScroll\")||(t.smoothScroll(e,t.Utils.options(e.attr(\"data-uk-smooth-scroll\"))),e.trigger(\"click\")),!1})},init:function(){var n=this;this.on(\"click\",function(i){i.preventDefault(),e(t.$(this.hash).length?t.$(this.hash):t.$(\"body\"),n.options)})}}),t.Utils.scrollToElement=e,t.$.easing.easeOutExpo||(t.$.easing.easeOutExpo=function(t,e,n,i,r){return e==r?n+i:i*(-Math.pow(2,-10*e/r)+1)+n})}(UIkit),function(t){\"use strict\";var e=t.$win,n=t.$doc,i=[],r=function(){for(var t=0;t<i.length;t++)window.requestAnimationFrame.apply(window,[i[t].check])};t.component(\"scrollspy\",{defaults:{target:!1,cls:\"uk-scrollspy-inview\",initcls:\"uk-scrollspy-init-inview\",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){n.on(\"scrolling.uk.document\",r),e.on(\"load resize orientationchange\",t.Utils.debounce(r,50)),t.ready(function(e){t.$(\"[data-uk-scrollspy]\",e).each(function(){var e=t.$(this);e.data(\"scrollspy\")||t.scrollspy(e,t.Utils.options(e.attr(\"data-uk-scrollspy\")))})})},init:function(){var e,n=this,r=this.options.cls.split(/,/),a=function(){var i=n.options.target?n.element.find(n.options.target):n.element,a=1===i.length?1:0,o=0;i.each(function(){var i=t.$(this),s=i.data(\"inviewstate\"),u=t.Utils.isInView(i,n.options),l=i.data(\"ukScrollspyCls\")||r[o].trim();!u||s||i.data(\"scrollspy-idle\")||(e||(i.addClass(n.options.initcls),n.offset=i.offset(),e=!0,i.trigger(\"init.uk.scrollspy\")),i.data(\"scrollspy-idle\",setTimeout(function(){i.addClass(\"uk-scrollspy-inview\").toggleClass(l).width(),i.trigger(\"inview.uk.scrollspy\"),i.data(\"scrollspy-idle\",!1),i.data(\"inviewstate\",!0)},n.options.delay*a)),a++),!u&&s&&n.options.repeat&&(i.data(\"scrollspy-idle\")&&(clearTimeout(i.data(\"scrollspy-idle\")),i.data(\"scrollspy-idle\",!1)),i.removeClass(\"uk-scrollspy-inview\").toggleClass(l),i.data(\"inviewstate\",!1),i.trigger(\"outview.uk.scrollspy\")),o=r[o+1]?o+1:0})};a(),this.check=a,i.push(this)}});var a=[],o=function(){for(var t=0;t<a.length;t++)window.requestAnimationFrame.apply(window,[a[t].check])};t.component(\"scrollspynav\",{defaults:{cls:\"uk-active\",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){n.on(\"scrolling.uk.document\",o),e.on(\"resize orientationchange\",t.Utils.debounce(o,50)),t.ready(function(e){t.$(\"[data-uk-scrollspy-nav]\",e).each(function(){var e=t.$(this);e.data(\"scrollspynav\")||t.scrollspynav(e,t.Utils.options(e.attr(\"data-uk-scrollspy-nav\")))})})},init:function(){var n,i=[],r=this.find(\"a[href^='#']\").each(function(){\"#\"!==this.getAttribute(\"href\").trim()&&i.push(this.getAttribute(\"href\"))}),o=t.$(i.join(\",\")),s=this.options.cls,u=this.options.closest||this.options.closest,l=this,c=function(){n=[];for(var i=0;i<o.length;i++)t.Utils.isInView(o.eq(i),l.options)&&n.push(o.eq(i));if(n.length){var a,c=e.scrollTop(),h=function(){for(var t=0;t<n.length;t++)if(n[t].offset().top-l.options.topoffset>=c)return n[t]}();if(!h)return;l.options.closest?(r.blur().closest(u).removeClass(s),a=r.filter(\"a[href='#\"+h.attr(\"id\")+\"']\").closest(u).addClass(s)):a=r.removeClass(s).filter(\"a[href='#\"+h.attr(\"id\")+\"']\").addClass(s),l.element.trigger(\"inview.uk.scrollspynav\",[h,a])}};this.options.smoothscroll&&t.smoothScroll&&r.each(function(){t.smoothScroll(this,l.options.smoothscroll)}),c(),this.element.data(\"scrollspynav\",this),this.check=c,a.push(this)}})}(UIkit),function(t){\"use strict\";var e=[];t.component(\"toggle\",{defaults:{target:!1,cls:\"uk-hidden\",animation:!1,duration:200},boot:function(){t.ready(function(n){t.$(\"[data-uk-toggle]\",n).each(function(){var e=t.$(this);e.data(\"toggle\")||t.toggle(e,t.Utils.options(e.attr(\"data-uk-toggle\")))}),setTimeout(function(){e.forEach(function(t){t.getToggles()})},0)})},init:function(){var t=this;this.aria=-1!==this.options.cls.indexOf(\"uk-hidden\"),this.on(\"click\",function(e){t.element.is('a[href=\"#\"]')&&e.preventDefault(),t.toggle()}),e.push(this)},toggle:function(){if(this.getToggles(),this.totoggle.length){if(this.options.animation&&t.support.animation){var e=this,n=this.options.animation.split(\",\");1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),this.totoggle.css(\"animation-duration\",this.options.duration+\"ms\"),this.totoggle.each(function(){var i=t.$(this);i.hasClass(e.options.cls)?(i.toggleClass(e.options.cls),t.Utils.animate(i,n[0]).then(function(){i.css(\"animation-duration\",\"\"),t.Utils.checkDisplay(i)})):t.Utils.animate(this,n[1]+\" uk-animation-reverse\").then(function(){i.toggleClass(e.options.cls).css(\"animation-duration\",\"\"),t.Utils.checkDisplay(i)})})}else this.totoggle.toggleClass(this.options.cls),t.Utils.checkDisplay(this.totoggle);this.updateAria()}},getToggles:function(){this.totoggle=this.options.target?t.$(this.options.target):[],this.updateAria()},updateAria:function(){this.aria&&this.totoggle.length&&this.totoggle.not(\"[aria-hidden]\").each(function(){t.$(this).attr(\"aria-hidden\",t.$(this).hasClass(\"uk-hidden\"))})}})}(UIkit),function(t){\"use strict\";t.component(\"alert\",{defaults:{fade:!0,duration:200,trigger:\".uk-alert-close\"},boot:function(){t.$html.on(\"click.alert.uikit\",\"[data-uk-alert]\",function(e){var n=t.$(this);if(!n.data(\"alert\")){var i=t.alert(n,t.Utils.options(n.attr(\"data-uk-alert\")));t.$(e.target).is(i.options.trigger)&&(e.preventDefault(),i.close())}})},init:function(){var t=this;this.on(\"click\",this.options.trigger,function(e){e.preventDefault(),t.close()})},close:function(){var t=this.trigger(\"close.uk.alert\"),e=function(){this.trigger(\"closed.uk.alert\").remove()}.bind(this);this.options.fade?t.css(\"overflow\",\"hidden\").css(\"max-height\",t.height()).animate({height:0,opacity:0,\"padding-top\":0,\"padding-bottom\":0,\"margin-top\":0,\"margin-bottom\":0},this.options.duration,e):e()}})}(UIkit),function(t){\"use strict\";t.component(\"buttonRadio\",{defaults:{activeClass:\"uk-active\",target:\".uk-button\"},boot:function(){t.$html.on(\"click.buttonradio.uikit\",\"[data-uk-button-radio]\",function(e){var n=t.$(this);if(!n.data(\"buttonRadio\")){var i=t.buttonRadio(n,t.Utils.options(n.attr(\"data-uk-button-radio\"))),r=t.$(e.target);r.is(i.options.target)&&r.trigger(\"click\")}})},init:function(){var e=this;this.find(e.options.target).attr(\"aria-checked\",\"false\").filter(\".\"+e.options.activeClass).attr(\"aria-checked\",\"true\"),this.on(\"click\",this.options.target,function(n){var i=t.$(this);i.is('a[href=\"#\"]')&&n.preventDefault(),e.find(e.options.target).not(i).removeClass(e.options.activeClass).blur(),i.addClass(e.options.activeClass),e.find(e.options.target).not(i).attr(\"aria-checked\",\"false\"),i.attr(\"aria-checked\",\"true\"),e.trigger(\"change.uk.button\",[i])})},getSelected:function(){return this.find(\".\"+this.options.activeClass)}}),t.component(\"buttonCheckbox\",{defaults:{activeClass:\"uk-active\",target:\".uk-button\"},boot:function(){t.$html.on(\"click.buttoncheckbox.uikit\",\"[data-uk-button-checkbox]\",function(e){var n=t.$(this);if(!n.data(\"buttonCheckbox\")){var i=t.buttonCheckbox(n,t.Utils.options(n.attr(\"data-uk-button-checkbox\"))),r=t.$(e.target);r.is(i.options.target)&&r.trigger(\"click\")}})},init:function(){var e=this;this.find(e.options.target).attr(\"aria-checked\",\"false\").filter(\".\"+e.options.activeClass).attr(\"aria-checked\",\"true\"),this.on(\"click\",this.options.target,function(n){var i=t.$(this);i.is('a[href=\"#\"]')&&n.preventDefault(),i.toggleClass(e.options.activeClass).blur(),i.attr(\"aria-checked\",i.hasClass(e.options.activeClass)),e.trigger(\"change.uk.button\",[i])})},getSelected:function(){return this.find(\".\"+this.options.activeClass)}}),t.component(\"button\",{defaults:{},boot:function(){t.$html.on(\"click.button.uikit\",\"[data-uk-button]\",function(){var e=t.$(this);e.data(\"button\")||(t.button(e,t.Utils.options(e.attr(\"data-uk-button\"))),e.trigger(\"click\"))})},init:function(){var t=this;this.element.attr(\"aria-pressed\",this.element.hasClass(\"uk-active\")),this.on(\"click\",function(e){t.element.is('a[href=\"#\"]')&&e.preventDefault(),t.toggle(),t.trigger(\"change.uk.button\",[t.element.blur().hasClass(\"uk-active\")])})},toggle:function(){this.element.toggleClass(\"uk-active\"),this.element.attr(\"aria-pressed\",this.element.hasClass(\"uk-active\"))}})}(UIkit),function(t){\"use strict\";function e(e,n,i,r){if(e=t.$(e),n=t.$(n),i=i||window.innerWidth,r=r||e.offset(),n.length){var a=n.outerWidth();if(e.css(\"min-width\",a),\"right\"==t.langdirection){var o=i-(n.offset().left+a),s=i-(e.offset().left+e.outerWidth());e.css(\"margin-right\",o-s)}else e.css(\"margin-left\",n.offset().left-r.left)}}var n,i=!1,r={x:{\"bottom-left\":\"bottom-right\",\"bottom-right\":\"bottom-left\",\"bottom-center\":\"bottom-center\",\"top-left\":\"top-right\",\"top-right\":\"top-left\",\"top-center\":\"top-center\",\"left-top\":\"right-top\",\"left-bottom\":\"right-bottom\",\"left-center\":\"right-center\",\"right-top\":\"left-top\",\"right-bottom\":\"left-bottom\",\"right-center\":\"left-center\"},y:{\"bottom-left\":\"top-left\",\"bottom-right\":\"top-right\",\"bottom-center\":\"top-center\",\"top-left\":\"bottom-left\",\"top-right\":\"bottom-right\",\"top-center\":\"bottom-center\",\"left-top\":\"left-bottom\",\"left-bottom\":\"left-top\",\"left-center\":\"left-center\",\"right-top\":\"right-bottom\",\"right-bottom\":\"right-top\",\"right-center\":\"right-center\"},xy:{\"bottom-left\":\"top-right\",\"bottom-right\":\"top-left\",\"bottom-center\":\"top-center\",\"top-left\":\"bottom-right\",\"top-right\":\"bottom-left\",\"top-center\":\"bottom-center\",\"left-top\":\"right-bottom\",\"left-bottom\":\"right-top\",\"left-center\":\"right-center\",\"right-top\":\"left-bottom\",\"right-bottom\":\"left-top\",\"right-center\":\"left-center\"}};t.component(\"dropdown\",{defaults:{mode:\"hover\",pos:\"bottom-left\",offset:0,remaintime:800,justify:!1,boundary:t.$win,delay:0,dropdownSelector:\".uk-dropdown,.uk-dropdown-blank\",hoverDelayIdle:250,preventflip:!1},remainIdle:!1,boot:function(){var e=t.support.touch?\"click\":\"mouseenter\";t.$html.on(e+\".dropdown.uikit focus\",\"[data-uk-dropdown]\",function(n){var i=t.$(this);if(!i.data(\"dropdown\")){var r=t.dropdown(i,t.Utils.options(i.attr(\"data-uk-dropdown\")));(\"click\"==e||\"mouseenter\"==e&&\"hover\"==r.options.mode)&&r.element.trigger(e),r.element.find(r.options.dropdownSelector).length&&n.preventDefault()}})},init:function(){var e=this;this.dropdown=this.find(this.options.dropdownSelector),this.offsetParent=this.dropdown.parents().filter(function(){return-1!==t.$.inArray(t.$(this).css(\"position\"),[\"relative\",\"fixed\",\"absolute\"])}).slice(0,1),this.centered=this.dropdown.hasClass(\"uk-dropdown-center\"),this.justified=!!this.options.justify&&t.$(this.options.justify),this.boundary=t.$(this.options.boundary),this.boundary.length||(this.boundary=t.$win),this.dropdown.hasClass(\"uk-dropdown-up\")&&(this.options.pos=\"top-left\"),this.dropdown.hasClass(\"uk-dropdown-flip\")&&(this.options.pos=this.options.pos.replace(\"left\",\"right\")),this.dropdown.hasClass(\"uk-dropdown-center\")&&(this.options.pos=this.options.pos.replace(/(left|right)/,\"center\")),this.element.attr(\"aria-haspopup\",\"true\"),this.element.attr(\"aria-expanded\",this.element.hasClass(\"uk-open\")),this.dropdown.attr(\"aria-hidden\",\"true\"),\"click\"==this.options.mode||t.support.touch?this.on(\"click.uk.dropdown\",function(n){var i=t.$(n.target);i.parents(e.options.dropdownSelector).length||((i.is(\"a[href='#']\")||i.parent().is(\"a[href='#']\")||e.dropdown.length&&!e.dropdown.is(\":visible\"))&&n.preventDefault(),i.blur()),e.element.hasClass(\"uk-open\")?(!e.dropdown.find(n.target).length||i.is(\".uk-dropdown-close\")||i.parents(\".uk-dropdown-close\").length)&&e.hide():e.show()}):this.on(\"mouseenter\",function(){e.trigger(\"pointerenter.uk.dropdown\",[e]),e.remainIdle&&clearTimeout(e.remainIdle),n&&clearTimeout(n),i&&i==e||(n=i&&i!=e?setTimeout(function(){n=setTimeout(e.show.bind(e),e.options.delay)},e.options.hoverDelayIdle):setTimeout(e.show.bind(e),e.options.delay))}).on(\"mouseleave\",function(){n&&clearTimeout(n),e.remainIdle=setTimeout(function(){i&&i==e&&e.hide()},e.options.remaintime),e.trigger(\"pointerleave.uk.dropdown\",[e])}).on(\"click\",function(n){var r=t.$(n.target);return e.remainIdle&&clearTimeout(e.remainIdle),i&&i==e?void((!e.dropdown.find(n.target).length||r.is(\".uk-dropdown-close\")||r.parents(\".uk-dropdown-close\").length)&&e.hide()):((r.is(\"a[href='#']\")||r.parent().is(\"a[href='#']\"))&&n.preventDefault(),void e.show())})},show:function(){t.$html.off(\"click.outer.dropdown\"),i&&i!=this&&i.hide(!0),n&&clearTimeout(n),this.trigger(\"beforeshow.uk.dropdown\",[this]),this.checkDimensions(),this.element.addClass(\"uk-open\"),this.element.attr(\"aria-expanded\",\"true\"),this.dropdown.attr(\"aria-hidden\",\"false\"),this.trigger(\"show.uk.dropdown\",[this]),t.Utils.checkDisplay(this.dropdown,!0),t.Utils.focus(this.dropdown),i=this,this.registerOuterClick()},hide:function(t){this.trigger(\"beforehide.uk.dropdown\",[this,t]),this.element.removeClass(\"uk-open\"),this.remainIdle&&clearTimeout(this.remainIdle),this.remainIdle=!1,this.element.attr(\"aria-expanded\",\"false\"),this.dropdown.attr(\"aria-hidden\",\"true\"),this.trigger(\"hide.uk.dropdown\",[this,t]),i==this&&(i=!1)},registerOuterClick:function(){var e=this;t.$html.off(\"click.outer.dropdown\"),setTimeout(function(){t.$html.on(\"click.outer.dropdown\",function(r){n&&clearTimeout(n),t.$(r.target),i!=e||e.element.find(r.target).length||(e.hide(!0),t.$html.off(\"click.outer.dropdown\"))})},10)},checkDimensions:function(){if(this.dropdown.length){this.dropdown.removeClass(\"uk-dropdown-top uk-dropdown-bottom uk-dropdown-left uk-dropdown-right uk-dropdown-stack\").css({\"top-left\":\"\",left:\"\",\"margin-left\":\"\",\"margin-right\":\"\"}),this.justified&&this.justified.length&&this.dropdown.css(\"min-width\",\"\");var n,i=t.$.extend({},this.offsetParent.offset(),{width:this.offsetParent[0].offsetWidth,height:this.offsetParent[0].offsetHeight}),a=this.options.offset,o=this.dropdown,s=(o.show().offset()||{left:0,top:0},o.outerWidth()),u=o.outerHeight(),l=this.boundary.width(),c=(this.boundary[0]!==window&&this.boundary.offset()?this.boundary.offset():{top:0,left:0},this.options.pos),h={\"bottom-left\":{top:0+i.height+a,left:0},\"bottom-right\":{top:0+i.height+a,left:0+i.width-s},\"bottom-center\":{top:0+i.height+a,left:0+i.width/2-s/2},\"top-left\":{top:0-u-a,left:0},\"top-right\":{top:0-u-a,left:0+i.width-s},\"top-center\":{top:0-u-a,left:0+i.width/2-s/2},\"left-top\":{top:0,left:0-s-a},\"left-bottom\":{top:0+i.height-u,left:0-s-a},\"left-center\":{top:0+i.height/2-u/2,left:0-s-a},\"right-top\":{top:0,left:0+i.width+a},\"right-bottom\":{top:0+i.height-u,left:0+i.width+a},\"right-center\":{\ntop:0+i.height/2-u/2,left:0+i.width+a}},f={};if(n=c.split(\"-\"),f=h[c]?h[c]:h[\"bottom-left\"],this.justified&&this.justified.length)e(o.css({left:0}),this.justified,l);else if(this.options.preventflip!==!0){var d;switch(this.checkBoundary(i.left+f.left,i.top+f.top,s,u,l)){case\"x\":\"x\"!==this.options.preventflip&&(d=r.x[c]||\"right-top\");break;case\"y\":\"y\"!==this.options.preventflip&&(d=r.y[c]||\"top-left\");break;case\"xy\":this.options.preventflip||(d=r.xy[c]||\"right-bottom\")}d&&(n=d.split(\"-\"),f=h[d]?h[d]:h[\"bottom-left\"],this.checkBoundary(i.left+f.left,i.top+f.top,s,u,l)&&(n=c.split(\"-\"),f=h[c]?h[c]:h[\"bottom-left\"]))}s>l&&(o.addClass(\"uk-dropdown-stack\"),this.trigger(\"stack.uk.dropdown\",[this])),o.css(f).css(\"display\",\"\").addClass(\"uk-dropdown-\"+n[0])}},checkBoundary:function(e,n,i,r,a){var o=\"\";return(0>e||e-t.$win.scrollLeft()+i>a)&&(o+=\"x\"),(n-t.$win.scrollTop()<0||n-t.$win.scrollTop()+r>window.innerHeight)&&(o+=\"y\"),o}}),t.component(\"dropdownOverlay\",{defaults:{justify:!1,cls:\"\",duration:200},boot:function(){t.ready(function(e){t.$(\"[data-uk-dropdown-overlay]\",e).each(function(){var e=t.$(this);e.data(\"dropdownOverlay\")||t.dropdownOverlay(e,t.Utils.options(e.attr(\"data-uk-dropdown-overlay\")))})})},init:function(){var n=this;this.justified=!!this.options.justify&&t.$(this.options.justify),this.overlay=this.element.find(\"uk-dropdown-overlay\"),this.overlay.length||(this.overlay=t.$('<div class=\"uk-dropdown-overlay\"></div>').appendTo(this.element)),this.overlay.addClass(this.options.cls),this.on({\"beforeshow.uk.dropdown\":function(t,i){n.dropdown=i,n.justified&&n.justified.length&&e(n.overlay.css({display:\"block\",\"margin-left\":\"\",\"margin-right\":\"\"}),n.justified,n.justified.outerWidth())},\"show.uk.dropdown\":function(){var e=n.dropdown.dropdown.outerHeight(!0);n.dropdown.element.removeClass(\"uk-open\"),n.overlay.stop().css(\"display\",\"block\").animate({height:e},n.options.duration,function(){n.dropdown.dropdown.css(\"visibility\",\"\"),n.dropdown.element.addClass(\"uk-open\"),t.Utils.checkDisplay(n.dropdown.dropdown,!0)}),n.pointerleave=!1},\"hide.uk.dropdown\":function(){n.overlay.stop().animate({height:0},n.options.duration)},\"pointerenter.uk.dropdown\":function(){clearTimeout(n.remainIdle)},\"pointerleave.uk.dropdown\":function(){n.pointerleave=!0}}),this.overlay.on({mouseenter:function(){n.remainIdle&&(clearTimeout(n.dropdown.remainIdle),clearTimeout(n.remainIdle))},mouseleave:function(){n.pointerleave&&i&&(n.remainIdle=setTimeout(function(){i&&i.hide()},i.options.remaintime))}})}})}(UIkit),function(t){\"use strict\";var e=[];t.component(\"gridMatchHeight\",{defaults:{target:!1,row:!0,ignorestacked:!1,observe:!1},boot:function(){t.ready(function(e){t.$(\"[data-uk-grid-match]\",e).each(function(){var e,n=t.$(this);n.data(\"gridMatchHeight\")||(e=t.gridMatchHeight(n,t.Utils.options(n.attr(\"data-uk-grid-match\"))))})})},init:function(){var n=this;this.columns=this.element.children(),this.elements=this.options.target?this.find(this.options.target):this.columns,this.columns.length&&(t.$win.on(\"load resize orientationchange\",function(){var e=function(){n.element.is(\":visible\")&&n.match()};return t.$(function(){e()}),t.Utils.debounce(e,50)}()),this.options.observe&&t.domObserve(this.element,function(){n.element.is(\":visible\")&&n.match()}),this.on(\"display.uk.check\",function(){this.element.is(\":visible\")&&this.match()}.bind(this)),e.push(this))},match:function(){var e=this.columns.filter(\":visible:first\");if(e.length){var n=Math.ceil(100*parseFloat(e.css(\"width\"))/parseFloat(e.parent().css(\"width\")))>=100;return n&&!this.options.ignorestacked?this.revert():t.Utils.matchHeights(this.elements,this.options),this}},revert:function(){return this.elements.css(\"min-height\",\"\"),this}}),t.component(\"gridMargin\",{defaults:{cls:\"uk-grid-margin\",rowfirst:\"uk-row-first\"},boot:function(){t.ready(function(e){t.$(\"[data-uk-grid-margin]\",e).each(function(){var e,n=t.$(this);n.data(\"gridMargin\")||(e=t.gridMargin(n,t.Utils.options(n.attr(\"data-uk-grid-margin\"))))})})},init:function(){t.stackMargin(this.element,this.options)}})}(UIkit),function(t){\"use strict\";function e(e,n){return n?(\"object\"==typeof e?(e=e instanceof r?e:t.$(e),e.parent().length&&(n.persist=e,n.persist.data(\"modalPersistParent\",e.parent()))):e=\"string\"==typeof e||\"number\"==typeof e?t.$(\"<div></div>\").html(e):t.$(\"<div></div>\").html(\"UIkit.modal Error: Unsupported data type: \"+typeof e),e.appendTo(n.element.find(\".uk-modal-dialog\")),n):void 0}var n,i=!1,a=0,o=t.$html;t.$win.on(\"resize orientationchange\",t.Utils.debounce(function(){t.$(\".uk-modal.uk-open\").each(function(){return t.$(this).data(\"modal\")&&t.$(this).data(\"modal\").resize()})},150)),t.component(\"modal\",{defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1,modal:!0},scrollable:!1,transition:!1,hasTransitioned:!0,init:function(){if(n||(n=t.$(\"body\")),this.element.length){var e=this;this.paddingdir=\"padding-\"+(\"left\"==t.langdirection?\"right\":\"left\"),this.dialog=this.find(\".uk-modal-dialog\"),this.active=!1,this.element.attr(\"aria-hidden\",this.element.hasClass(\"uk-open\")),this.on(\"click\",\".uk-modal-close\",function(t){t.preventDefault(),e.hide()}).on(\"click\",function(n){var i=t.$(n.target);i[0]==e.element[0]&&e.options.bgclose&&e.hide()}),t.domObserve(this.element,function(){e.resize()})}},toggle:function(){return this[this.isActive()?\"hide\":\"show\"]()},show:function(){if(this.element.length){var e=this;if(!this.isActive())return this.options.modal&&i&&i.hide(!0),this.element.removeClass(\"uk-open\").show(),this.resize(!0),this.options.modal&&(i=this),this.active=!0,a++,t.support.transition?(this.hasTransitioned=!1,this.element.one(t.support.transition.end,function(){e.hasTransitioned=!0,t.Utils.focus(e.dialog,\"a[href]\")}).addClass(\"uk-open\")):(this.element.addClass(\"uk-open\"),t.Utils.focus(this.dialog,\"a[href]\")),o.addClass(\"uk-modal-page\").height(),this.element.attr(\"aria-hidden\",\"false\"),this.element.trigger(\"show.uk.modal\"),t.Utils.checkDisplay(this.dialog,!0),this}},hide:function(e){if(!e&&t.support.transition&&this.hasTransitioned){var n=this;this.one(t.support.transition.end,function(){n._hide()}).removeClass(\"uk-open\")}else this._hide();return this},resize:function(t){if(this.isActive()||t){var e=n.width();if(this.scrollbarwidth=window.innerWidth-e,n.css(this.paddingdir,this.scrollbarwidth),this.element.css(\"overflow-y\",this.scrollbarwidth?\"scroll\":\"auto\"),!this.updateScrollable()&&this.options.center){var i=this.dialog.outerHeight(),r=parseInt(this.dialog.css(\"margin-top\"),10)+parseInt(this.dialog.css(\"margin-bottom\"),10);i+r<window.innerHeight?this.dialog.css({top:window.innerHeight/2-i/2-r}):this.dialog.css({top:\"\"})}}},updateScrollable:function(){var t=this.dialog.find(\".uk-overflow-container:visible:first\");if(t.length){t.css(\"height\",0);var e=Math.abs(parseInt(this.dialog.css(\"margin-top\"),10)),n=this.dialog.outerHeight(),i=window.innerHeight,r=i-2*(20>e?20:e)-n;return t.css({\"max-height\":r<this.options.minScrollHeight?\"\":r,height:\"\"}),!0}return!1},_hide:function(){this.active=!1,a>0?a--:a=0,this.element.hide().removeClass(\"uk-open\"),this.element.attr(\"aria-hidden\",\"true\"),a||(o.removeClass(\"uk-modal-page\"),n.css(this.paddingdir,\"\")),i===this&&(i=!1),this.trigger(\"hide.uk.modal\")},isActive:function(){return this.element.hasClass(\"uk-open\")}}),t.component(\"modalTrigger\",{boot:function(){t.$html.on(\"click.modal.uikit\",\"[data-uk-modal]\",function(e){var n=t.$(this);if(n.is(\"a\")&&e.preventDefault(),!n.data(\"modalTrigger\")){var i=t.modalTrigger(n,t.Utils.options(n.attr(\"data-uk-modal\")));i.show()}}),t.$html.on(\"keydown.modal.uikit\",function(t){i&&27===t.keyCode&&i.options.keyboard&&(t.preventDefault(),i.hide())})},init:function(){var e=this;this.options=t.$.extend({target:!!e.element.is(\"a\")&&e.element.attr(\"href\")},this.options),this.modal=t.modal(this.options.target,this.options),this.on(\"click\",function(t){t.preventDefault(),e.show()}),this.proxy(this.modal,\"show hide isActive\")}}),t.modal.dialog=function(n,i){var r=t.modal(t.$(t.modal.dialog.template).appendTo(\"body\"),i);return r.on(\"hide.uk.modal\",function(){r.persist&&(r.persist.appendTo(r.persist.data(\"modalPersistParent\")),r.persist=!1),r.element.remove()}),e(n,r),r},t.modal.dialog.template='<div class=\"uk-modal\"><div class=\"uk-modal-dialog\" style=\"min-height:0;\"></div></div>',t.modal.alert=function(e,n){n=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},n);var i=t.modal.dialog(['<div class=\"uk-margin uk-modal-content\">'+String(e)+\"</div>\",'<div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-button-primary uk-modal-close\">'+n.labels.Ok+\"</button></div>\"].join(\"\"),n);return i.on(\"show.uk.modal\",function(){setTimeout(function(){i.element.find(\"button:first\").focus()},50)}),i.show()},t.modal.confirm=function(e,n,i){var r=arguments.length>1&&arguments[arguments.length-1]?arguments[arguments.length-1]:{};n=t.$.isFunction(n)?n:function(){},i=t.$.isFunction(i)?i:function(){},r=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},t.$.isFunction(r)?{}:r);var a=t.modal.dialog(['<div class=\"uk-margin uk-modal-content\">'+String(e)+\"</div>\",'<div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button js-modal-confirm-cancel\">'+r.labels.Cancel+'</button> <button class=\"uk-button uk-button-primary js-modal-confirm\">'+r.labels.Ok+\"</button></div>\"].join(\"\"),r);return a.element.find(\".js-modal-confirm, .js-modal-confirm-cancel\").on(\"click\",function(){t.$(this).is(\".js-modal-confirm\")?n():i(),a.hide()}),a.on(\"show.uk.modal\",function(){setTimeout(function(){a.element.find(\".js-modal-confirm\").focus()},50)}),a.show()},t.modal.prompt=function(e,n,i,r){i=t.$.isFunction(i)?i:function(){},r=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},r);var a=t.modal.dialog([e?'<div class=\"uk-modal-content uk-form\">'+String(e)+\"</div>\":\"\",'<div class=\"uk-margin-small-top uk-modal-content uk-form\"><p><input type=\"text\" class=\"uk-width-1-1\"></p></div>','<div class=\"uk-modal-footer uk-text-right\"><button class=\"uk-button uk-modal-close\">'+r.labels.Cancel+'</button> <button class=\"uk-button uk-button-primary js-modal-ok\">'+r.labels.Ok+\"</button></div>\"].join(\"\"),r),o=a.element.find(\"input[type='text']\").val(n||\"\").on(\"keyup\",function(t){13==t.keyCode&&a.element.find(\".js-modal-ok\").trigger(\"click\")});return a.element.find(\".js-modal-ok\").on(\"click\",function(){i(o.val())!==!1&&a.hide()}),a.show()},t.modal.blockUI=function(e,n){var i=t.modal.dialog(['<div class=\"uk-margin uk-modal-content\">'+String(e||'<div class=\"uk-text-center\">...</div>')+\"</div>\"].join(\"\"),t.$.extend({bgclose:!1,keyboard:!1,modal:!1},n));return i.content=i.element.find(\".uk-modal-content:first\"),i.show()},t.modal.labels={Ok:\"Ok\",Cancel:\"Cancel\"}}(UIkit),function(t){\"use strict\";function e(e){var n=t.$(e),i=\"auto\";if(n.is(\":visible\"))i=n.outerHeight();else{var r={position:n.css(\"position\"),visibility:n.css(\"visibility\"),display:n.css(\"display\")};i=n.css({position:\"absolute\",visibility:\"hidden\",display:\"block\"}).outerHeight(),n.css(r)}return i}t.component(\"nav\",{defaults:{toggle:\">li.uk-parent > a[href='#']\",lists:\">li.uk-parent > ul\",multiple:!1},boot:function(){t.ready(function(e){t.$(\"[data-uk-nav]\",e).each(function(){var e=t.$(this);e.data(\"nav\")||t.nav(e,t.Utils.options(e.attr(\"data-uk-nav\")))})})},init:function(){var e=this;this.on(\"click.uk.nav\",this.options.toggle,function(n){n.preventDefault();var i=t.$(this);e.open(i.parent()[0]==e.element[0]?i:i.parent(\"li\"))}),this.update(!0),t.domObserve(this.element,function(){e.element.find(this.options.lists).not(\"[role]\").length&&e.update()})},update:function(){var e=this;this.find(this.options.lists).each(function(){var n=t.$(this).attr(\"role\",\"menu\"),i=n.closest(\"li\"),r=i.hasClass(\"uk-active\");i.data(\"list-container\")||(n.wrap('<div style=\"overflow:hidden;height:0;position:relative;\"></div>'),i.data(\"list-container\",n.parent()[r?\"removeClass\":\"addClass\"](\"uk-hidden\"))),i.attr(\"aria-expanded\",i.hasClass(\"uk-open\")),r&&e.open(i,!0)})},open:function(n,i){var r=this,a=this.element,o=t.$(n),s=o.data(\"list-container\");this.options.multiple||a.children(\".uk-open\").not(n).each(function(){var e=t.$(this);e.data(\"list-container\")&&e.data(\"list-container\").stop().animate({height:0},function(){t.$(this).parent().removeClass(\"uk-open\").end().addClass(\"uk-hidden\")})}),o.toggleClass(\"uk-open\"),o.attr(\"aria-expanded\",o.hasClass(\"uk-open\")),s&&(o.hasClass(\"uk-open\")&&s.removeClass(\"uk-hidden\"),i?(s.stop().height(o.hasClass(\"uk-open\")?\"auto\":0),o.hasClass(\"uk-open\")||s.addClass(\"uk-hidden\"),this.trigger(\"display.uk.check\")):s.stop().animate({height:o.hasClass(\"uk-open\")?e(s.find(\"ul:first\")):0},function(){o.hasClass(\"uk-open\")?s.css(\"height\",\"\"):s.addClass(\"uk-hidden\"),r.trigger(\"display.uk.check\")}))}})}(UIkit),function(t){\"use strict\";var e={x:window.scrollX,y:window.scrollY},n=(t.$win,t.$doc,t.$html),i={show:function(i,r){if(i=t.$(i),i.length){r=t.$.extend({mode:\"push\"},r);var a=t.$(\"body\"),o=i.find(\".uk-offcanvas-bar:first\"),s=\"right\"==t.langdirection,u=o.hasClass(\"uk-offcanvas-bar-flip\")?-1:1,l=u*(s?-1:1),c=window.innerWidth-a.width();e={x:window.pageXOffset,y:window.pageYOffset},o.attr(\"mode\",r.mode),i.addClass(\"uk-active\"),a.css({width:window.innerWidth-c,height:window.innerHeight}).addClass(\"uk-offcanvas-page\"),(\"push\"==r.mode||\"reveal\"==r.mode)&&a.css(s?\"margin-right\":\"margin-left\",(s?-1:1)*o.outerWidth()*l),\"reveal\"==r.mode&&o.css(\"clip\",\"rect(0, \"+o.outerWidth()+\"px, 100vh, 0)\"),n.css(\"margin-top\",-1*e.y).width(),o.addClass(\"uk-offcanvas-bar-show\"),this._initElement(i),o.trigger(\"show.uk.offcanvas\",[i,o]),i.attr(\"aria-hidden\",\"false\")}},hide:function(i){var r=t.$(\"body\"),a=t.$(\".uk-offcanvas.uk-active\"),o=\"right\"==t.langdirection,s=a.find(\".uk-offcanvas-bar:first\"),u=function(){r.removeClass(\"uk-offcanvas-page\").css({width:\"\",height:\"\",\"margin-left\":\"\",\"margin-right\":\"\"}),a.removeClass(\"uk-active\"),s.removeClass(\"uk-offcanvas-bar-show\"),n.css(\"margin-top\",\"\"),window.scrollTo(e.x,e.y),s.trigger(\"hide.uk.offcanvas\",[a,s]),a.attr(\"aria-hidden\",\"true\")};a.length&&(\"none\"==s.attr(\"mode\")&&(i=!0),t.support.transition&&!i?(r.one(t.support.transition.end,function(){u()}).css(o?\"margin-right\":\"margin-left\",\"\"),\"reveal\"==s.attr(\"mode\")&&s.css(\"clip\",\"\"),setTimeout(function(){s.removeClass(\"uk-offcanvas-bar-show\")},0)):u())},_initElement:function(e){e.data(\"OffcanvasInit\")||(e.on(\"click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas\",function(e){var n=t.$(e.target);if(!e.type.match(/swipe/)&&!n.hasClass(\"uk-offcanvas-close\")){if(n.hasClass(\"uk-offcanvas-bar\"))return;if(n.parents(\".uk-offcanvas-bar:first\").length)return}e.stopImmediatePropagation(),i.hide()}),e.on(\"click\",\"a[href*='#']\",function(){var e=t.$(this),n=e.attr(\"href\");\"#\"!=n&&(t.$doc.one(\"hide.uk.offcanvas\",function(){var i;try{i=t.$(e[0].hash)}catch(t){i=\"\"}i.length||(i=t.$('[name=\"'+e[0].hash.replace(\"#\",\"\")+'\"]')),i.length&&t.Utils.scrollToElement?t.Utils.scrollToElement(i,t.Utils.options(e.attr(\"data-uk-smooth-scroll\")||\"{}\")):window.location.href=n}),i.hide())}),e.data(\"OffcanvasInit\",!0))}};t.component(\"offcanvasTrigger\",{boot:function(){n.on(\"click.offcanvas.uikit\",\"[data-uk-offcanvas]\",function(e){e.preventDefault();var n=t.$(this);n.data(\"offcanvasTrigger\")||(t.offcanvasTrigger(n,t.Utils.options(n.attr(\"data-uk-offcanvas\"))),n.trigger(\"click\"))}),n.on(\"keydown.uk.offcanvas\",function(t){27===t.keyCode&&i.hide()})},init:function(){var e=this;this.options=t.$.extend({target:!!e.element.is(\"a\")&&e.element.attr(\"href\"),mode:\"push\"},this.options),this.on(\"click\",function(t){t.preventDefault(),i.show(e.options.target,e.options)})}}),t.offcanvas=i}(UIkit),function(t){\"use strict\";function e(e,n,i){var r,a=t.$.Deferred(),o=e,s=e;return i[0]===n[0]?(a.resolve(),a.promise()):(\"object\"==typeof e&&(o=e[0],s=e[1]||e[0]),t.$body.css(\"overflow-x\",\"hidden\"),r=function(){n&&n.hide().removeClass(\"uk-active \"+s+\" uk-animation-reverse\"),i.addClass(o).one(t.support.animation.end,function(){setTimeout(function(){i.removeClass(\"\"+o).css({opacity:\"\",display:\"\"})},0),a.resolve(),t.$body.css(\"overflow-x\",\"\"),n&&n.css({opacity:\"\",display:\"\"})}.bind(this)).show()},i.css(\"animation-duration\",this.options.duration+\"ms\"),n&&n.length?(n.css(\"animation-duration\",this.options.duration+\"ms\"),n.css(\"display\",\"none\").addClass(s+\" uk-animation-reverse\").one(t.support.animation.end,function(){r()}.bind(this)).css(\"display\",\"\")):(i.addClass(\"uk-active\"),r()),a.promise())}var n;t.component(\"switcher\",{defaults:{connect:!1,toggle:\">*\",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){t.ready(function(e){t.$(\"[data-uk-switcher]\",e).each(function(){var e=t.$(this);e.data(\"switcher\")||t.switcher(e,t.Utils.options(e.attr(\"data-uk-switcher\")))})})},init:function(){var e=this;this.on(\"click.uk.switcher\",this.options.toggle,function(t){t.preventDefault(),e.show(this)}),this.options.connect&&(this.connect=t.$(this.options.connect),this.connect.length&&(this.connect.on(\"click.uk.switcher\",\"[data-uk-switcher-item]\",function(n){n.preventDefault();var i=t.$(this).attr(\"data-uk-switcher-item\");if(e.index!=i)switch(i){case\"next\":case\"previous\":e.show(e.index+(\"next\"==i?1:-1));break;default:e.show(parseInt(i,10))}}),this.options.swiping&&this.connect.on(\"swipeRight swipeLeft\",function(t){t.preventDefault(),window.getSelection().toString()||e.show(e.index+(\"swipeLeft\"==t.type?1:-1))}),this.update()))},update:function(){this.connect.children().removeClass(\"uk-active\").attr(\"aria-hidden\",\"true\");var t=this.find(this.options.toggle),e=t.filter(\".uk-active\");if(e.length)this.show(e,!1);else{if(this.options.active===!1)return;e=t.eq(this.options.active),this.show(e.length?e:t.eq(0),!1)}t.not(e).attr(\"aria-expanded\",\"false\"),e.attr(\"aria-expanded\",\"true\")},show:function(i,r){if(!this.animating){if(isNaN(i))i=t.$(i);else{var a=this.find(this.options.toggle);i=0>i?a.length-1:i,i=a.eq(a[i]?i:0)}var o=this,a=this.find(this.options.toggle),s=t.$(i),u=n[this.options.animation]||function(t,i){if(!o.options.animation)return n.none.apply(o);var r=o.options.animation.split(\",\");return 1==r.length&&(r[1]=r[0]),r[0]=r[0].trim(),r[1]=r[1].trim(),e.apply(o,[r,t,i])};r!==!1&&t.support.animation||(u=n.none),s.hasClass(\"uk-disabled\")||(a.attr(\"aria-expanded\",\"false\"),s.attr(\"aria-expanded\",\"true\"),a.filter(\".uk-active\").removeClass(\"uk-active\"),s.addClass(\"uk-active\"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(s),-1==this.index&&(this.index=0),this.connect.each(function(){var e=t.$(this),n=t.$(e.children()),i=t.$(n.filter(\".uk-active\")),r=t.$(n.eq(o.index));o.animating=!0,u.apply(o,[i,r]).then(function(){i.removeClass(\"uk-active\"),r.addClass(\"uk-active\"),i.attr(\"aria-hidden\",\"true\"),r.attr(\"aria-hidden\",\"false\"),t.Utils.checkDisplay(r,!0),o.animating=!1})})),this.trigger(\"show.uk.switcher\",[s]))}}}),n={none:function(){var e=t.$.Deferred();return e.resolve(),e.promise()},fade:function(t,n){return e.apply(this,[\"uk-animation-fade\",t,n])},\"slide-bottom\":function(t,n){return e.apply(this,[\"uk-animation-slide-bottom\",t,n])},\"slide-top\":function(t,n){return e.apply(this,[\"uk-animation-slide-top\",t,n])},\"slide-vertical\":function(t,n){var i=[\"uk-animation-slide-top\",\"uk-animation-slide-bottom\"];return t&&t.index()>n.index()&&i.reverse(),e.apply(this,[i,t,n])},\"slide-left\":function(t,n){return e.apply(this,[\"uk-animation-slide-left\",t,n])},\"slide-right\":function(t,n){return e.apply(this,[\"uk-animation-slide-right\",t,n])},\"slide-horizontal\":function(t,n){var i=[\"uk-animation-slide-right\",\"uk-animation-slide-left\"];return t&&t.index()>n.index()&&i.reverse(),e.apply(this,[i,t,n])},scale:function(t,n){return e.apply(this,[\"uk-animation-scale-up\",t,n])}},t.switcher.animations=n}(UIkit),function(t){\"use strict\";t.component(\"tab\",{defaults:{target:\">li:not(.uk-tab-responsive, .uk-disabled)\",connect:!1,active:0,animation:!1,duration:200,swiping:!0},boot:function(){t.ready(function(e){t.$(\"[data-uk-tab]\",e).each(function(){var e=t.$(this);e.data(\"tab\")||t.tab(e,t.Utils.options(e.attr(\"data-uk-tab\")))})})},init:function(){var e=this;this.current=!1,this.on(\"click.uk.tab\",this.options.target,function(n){if(n.preventDefault(),!e.switcher||!e.switcher.animating){var i=e.find(e.options.target).not(this);i.removeClass(\"uk-active\").blur(),e.trigger(\"change.uk.tab\",[t.$(this).addClass(\"uk-active\"),e.current]),e.current=t.$(this),e.options.connect||(i.attr(\"aria-expanded\",\"false\"),t.$(this).attr(\"aria-expanded\",\"true\"))}}),this.options.connect&&(this.connect=t.$(this.options.connect)),this.responsivetab=t.$('<li class=\"uk-tab-responsive uk-active\"><a></a></li>').append('<div class=\"uk-dropdown uk-dropdown-small\"><ul class=\"uk-nav uk-nav-dropdown\"></ul><div>'),this.responsivetab.dropdown=this.responsivetab.find(\".uk-dropdown\"),this.responsivetab.lst=this.responsivetab.dropdown.find(\"ul\"),this.responsivetab.caption=this.responsivetab.find(\"a:first\"),this.element.hasClass(\"uk-tab-bottom\")&&this.responsivetab.dropdown.addClass(\"uk-dropdown-up\"),this.responsivetab.lst.on(\"click.uk.tab\",\"a\",function(n){n.preventDefault(),n.stopPropagation();var i=t.$(this);e.element.children(\"li:not(.uk-tab-responsive)\").eq(i.data(\"index\")).trigger(\"click\")}),this.on(\"show.uk.switcher change.uk.tab\",function(t,n){e.responsivetab.caption.html(n.text())}),this.element.append(this.responsivetab),this.options.connect&&(this.switcher=t.switcher(this.element,{toggle:\">li:not(.uk-tab-responsive)\",connect:this.options.connect,active:this.options.active,animation:this.options.animation,duration:this.options.duration,swiping:this.options.swiping})),t.dropdown(this.responsivetab,{mode:\"click\",preventflip:\"y\"}),e.trigger(\"change.uk.tab\",[this.element.find(this.options.target).not(\".uk-tab-responsive\").filter(\".uk-active\")]),this.check(),t.$win.on(\"resize orientationchange\",t.Utils.debounce(function(){e.element.is(\":visible\")&&e.check()},100)),this.on(\"display.uk.check\",function(){e.element.is(\":visible\")&&e.check()})},check:function(){var e=this.element.children(\"li:not(.uk-tab-responsive)\").removeClass(\"uk-hidden\");if(!e.length)return void this.responsivetab.addClass(\"uk-hidden\");var n,i,r,a=e.eq(0).offset().top+Math.ceil(e.eq(0).height()/2),o=!1;if(this.responsivetab.lst.empty(),e.each(function(){t.$(this).offset().top>a&&(o=!0)}),o)for(var s=0;s<e.length;s++)n=t.$(e.eq(s)),i=n.find(\"a\"),\"none\"==n.css(\"float\")||n.attr(\"uk-dropdown\")||(n.hasClass(\"uk-disabled\")||(r=n[0].outerHTML.replace(\"<a \",'<a data-index=\"'+s+'\" '),this.responsivetab.lst.append(r)),n.addClass(\"uk-hidden\"));this.responsivetab[this.responsivetab.lst.children(\"li\").length?\"removeClass\":\"addClass\"](\"uk-hidden\")}})}(UIkit),function(t){\"use strict\";t.component(\"cover\",{defaults:{automute:!0},boot:function(){t.ready(function(e){t.$(\"[data-uk-cover]\",e).each(function(){var e=t.$(this);e.data(\"cover\")||t.cover(e,t.Utils.options(e.attr(\"data-uk-cover\")))})})},init:function(){if(this.parent=this.element.parent(),t.$win.on(\"load resize orientationchange\",t.Utils.debounce(function(){this.check()}.bind(this),100)),this.on(\"display.uk.check\",function(){this.element.is(\":visible\")&&this.check()}.bind(this)),this.check(),this.element.is(\"iframe\")&&this.options.automute){var e=this.element.attr(\"src\");this.element.attr(\"src\",\"\").on(\"load\",function(){this.contentWindow.postMessage('{ \"event\": \"command\", \"func\": \"mute\", \"method\":\"setVolume\", \"value\":0}',\"*\")}).attr(\"src\",[e,e.indexOf(\"?\")>-1?\"&\":\"?\",\"enablejsapi=1&api=1\"].join(\"\"))}},check:function(){this.element.css({width:\"\",height:\"\"}),this.dimension={w:this.element.width(),h:this.element.height()},this.element.attr(\"width\")&&!isNaN(this.element.attr(\"width\"))&&(this.dimension.w=this.element.attr(\"width\")),this.element.attr(\"height\")&&!isNaN(this.element.attr(\"height\"))&&(this.dimension.h=this.element.attr(\"height\")),this.ratio=this.dimension.w/this.dimension.h;var t,e,n=this.parent.width(),i=this.parent.height();n/this.ratio<i?(t=Math.ceil(i*this.ratio),e=i):(t=n,e=Math.ceil(n/this.ratio)),this.element.css({width:t,height:e})}})}(UIkit)}).call(e,n(6),n(6))},,,function(t,e,n){(function(t){!function(t,e,n){function i(){r=e[s](function(){a.each(function(){var e=t(this),n=e.width(),i=e.height(),r=t.data(this,l);n===r.w&&i===r.h||e.trigger(u,[r.w=n,r.h=i])}),i()},o[c])}var r,a=t([]),o=t.resize=t.extend(t.resize,{}),s=\"setTimeout\",u=\"resize\",l=u+\"-special-event\",c=\"delay\",h=\"throttleWindow\";o[c]=250,o[h]=!0,t.event.special[u]={setup:function(){if(!o[h]&&this[s])return!1;var e=t(this);a=a.add(e),t.data(this,l,{w:e.width(),h:e.height()}),1===a.length&&i()},teardown:function(){if(!o[h]&&this[s])return!1;var e=t(this);a=a.not(e),e.removeData(l),a.length||clearTimeout(r)},add:function(e){function i(e,i,a){var o=t(this),s=t.data(this,l);s&&(s.w=i!==n?i:o.width(),s.h=a!==n?a:o.height(),r.apply(this,arguments))}if(!o[h]&&this[s])return!1;var r;return t.isFunction(e)?(r=e,i):(r=e.handler,void(e.handler=i))}}}(t,window)}).call(e,n(6))},,,function(t,e,n){var i,r;n(12),i=n(16),r=n(193),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(13);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\"#App[_v-210bbbd2]{width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:15px;display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden}\",\"\"])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push(\"@media \"+n[2]+\"{\"+n[1]+\"}\"):t.push(n[1])}return t.join(\"\")},t.i=function(e,n){\"string\"==typeof e&&(e=[[null,e,\"\"]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];\"number\"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];\"number\"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]=\"(\"+o[2]+\") and (\"+n+\")\"),t.push(o))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=h[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(u(i.parts[a],e))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(u(i.parts[a],e));h[i.id]={id:i.id,refs:1,parts:o}}}}function r(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],a=r[0],o=r[1],s=r[2],u=r[3],l={css:o,media:s,sourceMap:u};n[a]?n[a].parts.push(l):e.push(n[a]={id:a,parts:[l]})}return e}function a(t,e){var n=p(),i=g[g.length-1];if(\"top\"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if(\"bottom\"!==t.insertAt)throw new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");n.appendChild(e)}}function o(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function s(t){var e=document.createElement(\"style\");return e.type=\"text/css\",a(t,e),e}function u(t,e){var n,i,r;if(e.singleton){var a=v++;n=_||(_=s(e)),i=l.bind(null,n,a,!1),r=l.bind(null,n,a,!0)}else n=s(e),i=c.bind(null,n),r=function(){o(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function l(t,e,n,i){var r=n?\"\":i.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function c(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute(\"media\",i),r&&(n+=\"\\n/*# sourceURL=\"+r.sources[0]+\" */\",n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var h={},f=function(t){var e;return function(){return\"undefined\"==typeof e&&(e=t.apply(this,arguments)),e}},d=f(function(){return/msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase())}),p=f(function(){return document.head||document.getElementsByTagName(\"head\")[0]}),_=null,v=0,g=[];t.exports=function(t,e){e=e||{},\"undefined\"==typeof e.singleton&&(e.singleton=d()),\"undefined\"==typeof e.insertAt&&(e.insertAt=\"bottom\");var n=r(t);return i(n,e),function(t){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=h[s.id];u.refs--,a.push(u)}if(t){var l=r(t);i(l,e)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join(\"\\n\")}}()},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(17),a=n(18),o=i(a),s=n(23),u=i(s),l=n(103),c=n(36),h=n(192),f=i(h),d=n(46),p=i(d),_=n(6),v=i(_);e.default={vuex:{actions:{updatePageSize:l.updatePageSize},getters:{pageWidth:c.pageWidth}},data:function(){return{timer:!1}},watch:{pageWidth:function(t){console.log(\"now\",t)}},components:{AppHeader:o.default,AppMain:u.default},ready:function(){function t(t,e){console.log(t);var n=\"\"+(t+1),r=new XMLHttpRequest;t+1<10&&(n=\"0\"+n),r.open(\"GET\",\"../data/tiffile/image\"+n+\"_\"+i[t]+\".tif\",!0),r.responseType=\"arraybuffer\",r.onload=function(t){for(var n=f.default.decode(t.target.response),i=[],r=0;r<651;r++){i.push([]);for(var a=0;a<651;a++)i[r].push(0)}for(var s=n[0].data,u=0;u<651;u++)for(var l=0;l<651;l++){var c=6*(651*u+l);i[l][u]=[s[c],s[c+1],s[c+2],s[c+3],s[c+4],s[c+5]]}return o+=1,12===o&&((0,v.default)(\".loading\").hide(),(0,v.default)(\".main-top\").css(\"visibility\",\"visible\"),(0,v.default)(\".main-bottom\").css(\"visibility\",\"visible\")),e(i)},r.send()}var e=this,n=(0,r.getPageSize)();n.height=.421875*n.width,e.updatePageSize(n.width,n.height),window.onresize=function(){return function(){e.timer||(e.timer=!0,setTimeout(function(){var t=(0,r.getPageSize)();t.height=.421875*t.width,e.updatePageSize(t.width,t.height),console.log(e.pageWidth,\"that\"),e.timer=!1},400))}()};var i=p.default.date,a=[],o=0;i.forEach(function(e,n){t(n,function(t){a.push(t)})}),window.dataArr=a}}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=(e.getPageSize=function(){var t=0,e=0;return window.innerWidth?t=window.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),window.innerHeight?e=window.innerHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(e=document.documentElement.clientHeight,t=document.documentElement.clientWidth),{width:t,height:e}},e.getPointsOfArea=function(t){function e(t,e){for(var n=e.length,i=+t[0],r=-1*+t[1],a=0,o=0;o<n-1;o++){var s=e[o],u=e[(o+1)%n],l=s[0],c=-1*s[1],h=u[0],f=-1*u[1];if(c!==f&&!(r<Math.min(c,f)||r>Math.max(c,f))){var d=(r-c)*(h-l)/(f-c)+l;d>i&&(a+=1)}}return a%2===1}for(var n=[],i=t[0].length,r=0;r<i;r++)n.push([t[0][r],t[1][r]]);for(var a=1e5,o=-1,s=1e5,u=-1,l=0;l<i;l++)a=Math.min(a,n[l][0]),o=Math.max(o,n[l][0]),s=Math.min(s,n[l][1]),u=Math.max(u,n[l][1]);for(var c=[],h=a;h<o;h++)for(var f=s;f<u;f++)e([h,f],n)&&c.push([h,f]);return c});e.getColorRgb=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.toLowerCase(),i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(n&&i.test(n)){if(4===n.length){for(var r=\"#\",a=1;a<4;a+=1)r+=n.slice(a,a+1).concat(n.slice(a,a+1));n=r}for(var o=[],s=1;s<7;s+=2)o.push(parseInt(\"0x\"+n.slice(s,s+2)));return 0===e?o:\"RGB(\"+o.join(\",\")+\")\"}return n},e.transSelectRegionToBase64=function(t,e,i){for(var r=t.width,a=t.height,o=Array(a).fill([]),s=0;s<a;s++)o[s]=Array(r).fill(0);for(var u=(n(e),0);u<a;u++)for(var l=0;l<r;l++)if(1===o[u][l]){var c=4*(u*r+l);t.data[c]=i[0],t.data[c+1]=i[1],t.data[c+2]=i[2]}return t},e.getBoundary=function(t){for(var e=new Array(4),n=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=0,a=0,o=0;o<t.length;++o){var s=t[o][0],u=t[o][1];s<n&&(n=s),\ns>r&&(r=s),u<i&&(i=u),u>a&&(a=u)}return e[0]=n,e[1]=i,e[2]=r,e[3]=a,e},e.getBoundaryToArray=function(t,e){var n=Array(t.length).fill([]);return t.forEach(function(t,i){n[i]=[t,e[i]]}),n}},function(t,e,n){var i,r;n(19),i=n(21),r=n(22),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(20);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".header-wraper[_v-53bea60f]{height:30px}.header-wraper .header[_v-53bea60f]{position:relative;height:30px;line-height:30px;top:0;left:0;background-color:#324057;z-index:100}.header-wraper .header h1[_v-53bea60f]{color:#a4aebd;margin:0;float:left;font-size:15px;font-weight:400;line-height:30px}.header-wraper .header .container[_v-53bea60f]{height:100%;box-sizing:border-box;margin:0 auto;padding:0 25px}\",\"\"])},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={data:function(){return{messages:\"VAST Challenge 2017 MC3 Visualization Analysis System\"}},ready:function(){}}},function(t,e){t.exports=' <div class=header-wraper _v-53bea60f=\"\"> <header class=header _v-53bea60f=\"\"> <div class=container _v-53bea60f=\"\"> <h1 _v-53bea60f=\"\">{{messages}}</h1> </div> </header> </div> '},function(t,e,n){var i,r;n(24),i=n(26),r=n(191),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(25);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\"#AppMain[_v-2f1425bb]{box-sizing:border-box;min-height:100%;overflow:auto}#AppMain .containter[_v-2f1425bb]{position:absolute;box-sizing:border-box;padding:0;margin:0;width:100%;height:80%;overflow-y:hidden}#AppMain .loading[_v-2f1425bb]{position:absolute;width:100%;height:100%;transition:all .3s ease}#AppMain .loading .back[_v-2f1425bb]{position:absolute;width:100%;height:100%;background-color:#f8f8f8;opacity:.8;z-index:99}#AppMain .loading .logo[_v-2f1425bb]{position:absolute;margin:50px auto;font-size:30px;text-align:center;left:45%;top:40%;z-index:100}#AppMain .loading .hidden[_v-2f1425bb]{opacity:0;transition:all .3s ease}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(27),a=i(r),o=n(117),s=i(o);e.default={data:function(){return{}},components:{AppMainTopView:a.default,AppMainBottomView:s.default},ready:function(){}}},function(t,e,n){var i,r;n(28),i=n(30),r=n(116),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(29);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".main-top[_v-c16713a6]{position:relative;width:100%;visibility:hidden}.main-top #event-list[_v-c16713a6]{position:absolute;left:0;top:0;width:16.6%;height:33.3%;overflow-y:auto}.main-top #icon-list[_v-c16713a6]{position:absolute;left:16.6%;top:0;width:4.2%;height:33.3%;overflow-y:auto}.main-top #image-matrix[_v-c16713a6]{position:absolute;top:0;left:20.8%;width:79.2%;height:100%;overflow-y:hidden}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(31),a=i(r),o=n(49),s=i(o),u=n(89),l=i(u),c=n(36);e.default={vuex:{getters:{pageSize:c.pageSize}},data:function(){return{}},components:{EventViewList:a.default,IconListView:s.default,ImageMatrixView:l.default},computed:{mainTopStyle:function(){var t={},e=this.pageSize.pageHeight/3-15+\"px\";return t.height=e,t},eventListStyle:function(){var t={};return t.height=this.pageSize.pageHeight/3-15+\"px\",t.width=.166*this.pageSize.pageWidth+\"px\",t},iconListStyle:function(){var t={};return t.height=this.pageSize.pageHeight/3-15+\"px\",t.width=.042*this.pageSize.pageWidth+\"px\",t}},ready:function(){}}},function(t,e,n){var i,r;n(32),i=n(34),r=n(48),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(33);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".event-view-main[_v-ad46c310]{padding:2px 1px}.listLine[_v-ad46c310]{stroke:gray;stroke-width:1px}\",\"\"])},function(t,e,n){(function(t){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(6),a=i(r),o=n(36),s=n(46),u=i(s);e.default={vuex:{getters:{pageSize:o.pageSize,event:o.event}},props:[\"detectedEvent\"],data:function(){return{eventList:[],eventNum:0,colors:{Burnt:\"red\",Flood:\"#2b8cbe\"}}},watch:{detectedEvent:function(){this.addEvent()},pageSize:{handler:function(t,e){this.init()},deep:!0},event:{handler:function(t,e){this.addEvent(this.event)},deep:!0}},methods:{init:function(){var e=(0,a.default)(\"#event-list\").width(),n=(0,a.default)(\"#event-list\").height(),i=t,r=1,o={top:5,left:20,right:5,bottom:2};this.eventNum=0,o.left=1.2*u.default.emSize,i.select(\"#eventList\").html(\"\");var s=i.select(\"#eventList\").append(\"svg\").attr(\"width\",e*r).attr(\"height\",n).attr(\"id\",\"eSvg\");this.width=e,this.height=n,this.svgL=s;var l=this.rectValue=(e*r-o.left-o.right)/12;this.fontSize=this.rectValue/2,this.svgLWidth=e*r,this.padding=o;var c=[2014,2015,2016];this.svgL.selectAll(\"text\").data(c).enter().append(\"text\").text(function(t){return t}).attr(\"x\",function(t,e){return o.left+2*l+4*e*l}).attr(\"y\",o.top).attr(\"font-size\",u.default.emSize).attr(\"text-anchor\",\"middle\").attr(\"alignment-baseline\",\"hanging\"),this.svgL.append(\"line\").attr(\"x1\",o.left).attr(\"y1\",o.top+u.default.emSize).attr(\"x2\",this.svgLWidth-o.right).attr(\"y2\",o.top+u.default.emSize).style(\"stroke\",\"grey\").attr(\"class\",\"listLine\").attr(\"stroke-width\",\"1px\")},addEvent:function(e){var n=t,i=this.eventNum,r=this.rectValue,o=this.padding,s=this.svgL,l=this.height,c=o.top+u.default.emSize;if(i*r>l-2*o.top){var h=(0,a.default)(\"#eSvg\").height();n.select(\"#eSvg\").attr(\"height\",h+r)}s.append(\"line\").attr(\"x1\",o.left).attr(\"y1\",(i+1)*r+c).attr(\"x2\",this.svgLWidth-o.right).attr(\"y2\",(i+1)*r+c).attr(\"class\",\"listLine\").style(\"stroke\",\"grey\").attr(\"stroke-width\",\"1px\"),s.append(\"text\").text(this.eventNum+1).attr(\"x\",o.left-2).attr(\"y\",c+i*r+r/2).attr(\"alignment-baseline\",\"middle\").attr(\"text-anchor\",\"end\").attr(\"font-size\",u.default.emSize);for(var f=0;f<13;f++)s.append(\"line\").attr(\"x1\",f*r+o.left).attr(\"x2\",f*r+o.left).attr(\"y1\",i*r+c).attr(\"y2\",(i+1)*r+c).style(\"stroke\",\"grey\").attr(\"stroke-width\",\"1px\");var d=3,p=5,_=this.colors;s.append(\"rect\").attr(\"x\",d*r+o.left).attr(\"y\",i*r+c).attr(\"width\",r*(p-d)).attr(\"height\",r).style(\"fill\",_[e.type]).append(\"title\").text(e.comments),this.eventNum+=1}},ready:function(){}}}).call(e,n(35))},function(t,e){t.exports=window.d3},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.featureColors=e.transedFeatures=e.addedFeatures=e.activeRegionByIds=e.activeRegionsImages=e.allRegions=e.activeImages=e.activeRegion=e.selectedImage=e.lassoArea=e.comparedMessage=e.event=e.pageHeight=e.pageWidth=e.pageSize=void 0;var r=n(37),a=i(r),o=n(38),s=i(o),u=n(39),l=i(u),c=n(40),h=i(c),f=n(41),d=i(f),p=n(42),_=i(p),v=n(43),g=i(v),m=n(44),y=i(m),b=n(45),x=i(b);e.pageSize=a.default.pageSize,e.pageWidth=a.default.pageWidth,e.pageHeight=a.default.pageHeight,e.event=s.default.event,e.comparedMessage=l.default.comparedMessage,e.lassoArea=h.default.lassoArea,e.selectedImage=_.default.selectedImage,e.activeRegion=d.default.activeRegion,e.activeImages=d.default.activeImages,e.allRegions=d.default.allRegions,e.activeRegionsImages=d.default.activeRegionsImages,e.activeRegionByIds=d.default.activeRegionByIds,e.addedFeatures=g.default.addedFeatures,e.transedFeatures=y.default.transedFeatures,e.featureColors=x.default.featureColors},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={pageWidth:function(t){return console.log(t.pageWidth),t.pageWidth},pageHeight:function(t){return t.pageHeight},pageSize:function(t){return t.pageSize}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={event:function(t){return t.event}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={comparedMessage:function(t){return t.comparedMessage}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={lassoArea:function(t){return t.lassoArea}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={activeRegion:function(t){return t.selections.activeRegion},activeRegionByIds:function(t){return t.selections.activeRegionByIds},activeImages:function(t){return t.selections.activeImages},allRegions:function(t){return t.selections.regions},activeRegionsImages:function(t){return t.selections.activeRegionsImages}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={selectedImage:function(t){return t.selectedImage}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={addedFeatures:function(t){return t.addedFeatures}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={transedFeatures:function(t){return t.transedFeatures}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={featureColors:function(t){return t.featureColors}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(47),a=i(r);console.log(a.default);var o={debug:\"dev\"==={ENV:\"pro\",PACKAGE_JSON:{main:\"\",scripts:{dev:\"gulp dev\",pro:\"gulp pro\"},repository:{type:\"git\",url:\"\"},license:\"ISC\",devDependencies:{\"@qnpm/skyfutils\":\"^0.1.2\",\"assets-webpack-plugin\":\"3.4.0\",autoprefixer:\"~6.3.6\",\"babel-core\":\"6.9.0\",\"babel-eslint\":\"6.0.4\",\"babel-loader\":\"6.2.4\",\"babel-plugin-add-module-exports\":\"0.2.1\",\"babel-plugin-transform-runtime\":\"6.9.0\",\"babel-polyfill\":\"6.23.0\",\"babel-preset-es2015\":\"6.9.0\",\"clean-webpack-plugin\":\"0.1.10\",\"css-loader\":\"0.23.1\",ejs:\"2.5.1\",eslint:\"2.10.2\",\"eslint-config-standard\":\"5.3.1\",\"eslint-friendly-formatter\":\"2.0.4\",\"eslint-loader\":\"1.3.0\",\"eslint-plugin-html\":\"1.5.1\",\"eslint-plugin-promise\":\"1.1.0\",\"eslint-plugin-standard\":\"1.3.2\",\"eslint-plugin-vue\":\"0.1.1\",express:\"4.14.0\",\"extract-text-webpack-plugin\":\"1.0.1\",\"file-loader\":\"0.8.5\",gulp:\"3.9.1\",\"gulp-clean-css\":\"2.0.12\",\"gulp-ejs\":\"2.2.0\",\"gulp-uglify\":\"2.0.0\",\"gulp-util\":\"3.0.7\",\"html-loader\":\"0.4.3\",\"html-res-webpack-plugin\":\"1.0.2\",\"html-webpack-plugin\":\"2.21.0\",\"http-proxy-middleware\":\"0.17.0\",\"imports-loader\":\"~0.6.5\",\"json-loader\":\"0.5.4\",less:\"2.7.1\",\"less-loader\":\"2.2.3\",\"less-vars-loader\":\"1.1.0\",ora:\"0.2.1\",\"postcss-loader\":\"~0.9.1\",precss:\"~1.4.0\",progress:\"1.1.8\",\"source-map-loader\":\"~0.1.5\",\"style-loader\":\"0.13.1\",stylelint:\"7.10.1\",\"stylelint-config-standard\":\"16.0.0\",\"stylelint-processor-html\":\"1.0.0\",\"stylelint-webpack-plugin\":\"0.7.0\",\"url-loader\":\"0.5.7\",\"vue-hot-reload-api\":\"1.3.3\",\"vue-html-loader\":\"1.2.3\",\"vue-loader\":\"8.5.3\",\"vue-style-loader\":\"1.0.0\",webpack:\"1.14.0\",\"webpack-dev-middleware\":\"1.6.1\",\"webpack-hot-middleware\":\"2.12.1\",\"webpack-merge\":\"0.12.0\",\"worker-loader\":\"~0.7.0\"},dependencies:{bluebird:\"^3.5.0\",d3:\"^4.9.1\",\"font-awesome\":\"^4.7.0\",jquery:\"^3.2.1\",\"jquery-ui\":\"^1.12.1\",lodash:\"^4.17.4\",moment:\"^2.18.1\",nprogress:\"^0.2.0\",numeric:\"^1.2.6\",page:\"^1.7.1\",postal:\"^2.0.4\",vue:\"1.0.24\",\"vue-resource\":\"^1.3.4\",vuex:\"0.6.3\"},name:\"ftest\",version:\"0.0.1\",description:\"some desc\",keywords:[\"test\"],author:\"hh\",_addons:{group:\"360 SkyEye FrontEnd\"}}}.ENV,emSize:0,burnt:\"#ef8a62\",flood:\"#2b8cbe\",defaultFeatures:[[\"Plant\",\"green\"],[\"Moun\",\"orange\"],[\"Lake\",\"blue\"],[\"City\",\"gray\"]],featureColors:{B4B3B2:{Plant:\"red\",City:\"gray\",Water:\"black\"},B5B4B2:{Water:\"black\",Soil:\"blue\",Ground:\"pink\",City:\"purple\"},B1B5B6:{Ice:\"red\",Snow:\"Orange\",Cloud:\"Pink\"},B3B2B1:{Plant:\"green\",City:\"gray\",Water:\"blue\"}},date:[\"2014_03_17\",\"2014_08_24\",\"2014_11_28\",\"2014_12_30\",\"2015_02_15\",\"2015_06_24\",\"2015_09_12\",\"2015_11_15\",\"2016_03_06\",\"2016_06_26\",\"2016_09_06\",\"2016_12_19\"],defaultFeaturesObj:{Moun:\"orange\",Rode:\"#D6E2D7\",Lake:\"blue\",City:\"gray\",Flood:\"#2b8cbe\",Burnt:\"red\"},baseDataPath:\"../../../data/\"},s=0,u=0;window.innerWidth?s=window.innerWidth:document.body&&document.body.clientWidth&&(s=document.body.clientWidth),window.innerHeight?u=window.innerHeight:document.body&&document.body.clientHeight&&(u=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(u=document.documentElement.clientHeight,s=document.documentElement.clientWidth);var l=\"12px\";s<2e3?l=12:s<3e3?l=15:s<4e3?l=25:s<5e3?l=30:s<6e3?l=35:s<7e3?l=40:s<8e3?l=45:s<9e3&&(l=50),o.emSize=l,e.default=o,t.exports=e.default},function(t,e){t.exports={bgColor:\"#222\",colorText:\"rgba(255, 255, 255, 0.8)\"}},function(t,e){t.exports=' <div class=event-view-main id=eventList _v-ad46c310=\"\"> </div> '},function(t,e,n){var i,r;n(50),i=n(52),r=n(88),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(51);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".list-view-main{color:gray}.feature-name{font-size:.7em}\",\"\"])},function(t,e,n){(function(t){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(53),a=i(r),o=n(6),s=i(o),u=n(36),l=n(46),c=i(l),h=t;e.default={vuex:{getters:{pageSize:u.pageSize,selectedImage:u.selectedImage}},props:[\"features\"],data:function(){return{}},watch:{iconUpdate:function(){var t=this.svg;this.features.forEach(function(e,n){t.select(\"#\"+e[0]).style(\"fill\",e[1])})},pageSize:{handler:function(t,e){this.init()},deep:!0},selectedImage:{handler:function(t,e){console.log(\"iconListView selectedImage\",this.selectedImage);var n=this.selectedImage.split(\"_\")[0];n.length>4&&this.updateFeaturesList(c.default.featureColors[n])},deep:!0}},methods:{init:function(){console.log(c.default);var t=(0,s.default)(\"#icon-list\").width(),e=(0,s.default)(\"#icon-list\").height(),n={top:2,left:20,right:2,bottom:2};h.select(\"#iconList\").html(\"\");var i=h.select(\"#iconList\").append(\"svg\").attr(\"width\",t).attr(\"height\",e).attr(\"id\",\"iconSvg\"),r=.12*t;this.width=t,this.height=e,this.svg=i,this.padding=n;var a=.08,o=.2;this.vRatio=a,this.r=r,i.append(\"circle\").attr(\"cx\",t*o).attr(\"cy\",e*a).attr(\"r\",r).style(\"fill\",c.default.burnt),i.append(\"text\").text(\"Burnt\").attr(\"x\",t*o).attr(\"class\",\"feature-name\").attr(\"y\",e*a+1.5*c.default.emSize).attr(\"text-anchor\",\"middle\"),i.append(\"circle\").attr(\"cx\",t*o).attr(\"cy\",e*a*3).attr(\"r\",r).style(\"fill\",c.default.flood),i.append(\"text\").text(\"Flood\").attr(\"x\",t*o).attr(\"class\",\"feature-name\").attr(\"y\",e*a*3+1.5*c.default.emSize).attr(\"text-anchor\",\"middle\");var u=i.append(\"g\").attr(\"id\",\"featureList\"),l=c.default.defaultFeatures,f=.8;this.leftR2=f,u.selectAll(\"circle\").data(l).enter().append(\"circle\").attr(\"cx\",t*f).attr(\"cy\",function(t,n){return e*a*(2*n+1)}).attr(\"r\",r).style(\"fill\",function(t,e){return t[1]}).attr(\"id\",function(t,e){return t[0]}),u.selectAll(\"text\").data(l).enter().append(\"text\").attr(\"x\",t*f).attr(\"y\",function(t,n){return e*a*(2*n+1)+1.5*c.default.emSize}).attr(\"class\",\"feature-name\").text(function(t,e){return t[0]}).attr(\"text-anchor\",\"middle\")},updateFeaturesList:function(t){var e=this.width,n=this.height,i=this.vRatio,r=(0,a.default)(t),o=this.leftR2,u=this.r;(0,s.default)(\"#featureList\").empty();var l=h.select(\"#featureList\");console.log(r),l.selectAll(\"circle\").data(r).enter().append(\"circle\").attr(\"cx\",e*o).attr(\"cy\",function(t,e){return n*i*(2*e+1)}).attr(\"r\",u).style(\"fill\",function(e,n){return t[e]}).attr(\"id\",function(t,e){return t}),l.selectAll(\"text\").data(r).enter().append(\"text\").attr(\"x\",e*o).attr(\"y\",function(t,e){return n*i*(2*e+1)+1.5*c.default.emSize}).attr(\"class\",\"feature-name\").text(function(t,e){return t}).attr(\"text-anchor\",\"middle\")}},ready:function(){this.init()}}}).call(e,n(35))},function(t,e,n){t.exports={default:n(54),__esModule:!0}},function(t,e,n){n(55),t.exports=n(75).Object.keys},function(t,e,n){var i=n(56),r=n(58);n(73)(\"keys\",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(57);t.exports=function(t){return Object(i(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){var i=n(59),r=n(72);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(60),r=n(61),a=n(64)(!1),o=n(68)(\"IE_PROTO\");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=o&&i(s,n)&&l.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(62),r=n(57);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(63);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==i(t)?t.split(\"\"):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(61),r=n(65),a=n(67);t.exports=function(t){return function(e,n,o){var s,u=i(e),l=r(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var i=n(66),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(66),r=Math.max,a=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):a(t,e)}},function(t,e,n){var i=n(69)(\"keys\"),r=n(71);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(70),r=\"__core-js_shared__\",a=i[r]||(i[r]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e){var n=0,i=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+i).toString(36))}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){var i=n(74),r=n(75),a=n(84);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),\"Object\",o)}},function(t,e,n){var i=n(70),r=n(75),a=n(76),o=n(78),s=\"prototype\",u=function(t,e,n){var l,c,h,f=t&u.F,d=t&u.G,p=t&u.S,_=t&u.P,v=t&u.B,g=t&u.W,m=d?r:r[e]||(r[e]={}),y=m[s],b=d?i:p?i[e]:(i[e]||{})[s];d&&(n=e);for(l in n)c=!f&&b&&void 0!==b[l],c&&l in m||(h=c?b[l]:n[l],m[l]=d&&\"function\"!=typeof b[l]?n[l]:v&&c?a(h,i):g&&b[l]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[s]=t[s],e}(h):_&&\"function\"==typeof h?a(Function.call,h):h,_&&((m.virtual||(m.virtual={}))[l]=h,t&u.R&&y&&!y[l]&&o(y,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports={version:\"2.4.0\"};\"number\"==typeof __e&&(__e=n)},function(t,e,n){var i=n(77);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){var i=n(79),r=n(87);t.exports=n(83)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(80),r=n(82),a=n(86),o=Object.defineProperty;e.f=n(83)?Object.defineProperty:function(t,e,n){if(i(t),e=a(e,!0),i(n),r)try{return o(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(81);t.exports=function(t){if(!i(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e,n){t.exports=!n(83)&&!n(84)(function(){return 7!=Object.defineProperty(n(85)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(84)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(81),r=n(70).document,a=i(r)&&i(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e,n){var i=n(81);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if(\"function\"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&\"function\"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=\" <div class=list-view-main id=iconList> </div> \"},function(t,e,n){var i,r;n(90),i=n(92),r=n(115),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(91);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".image-matrix-view{border:1px solid gray;width:100%;margin-left:0}.background-image{fill:#fff}.feature-image{fill:#fff;stroke-width:.3px}.left-control[class~=control-hidden],.right-control[class~=control-hidden]{visibility:hidden}.feature-image[class~=click-selection]{stroke:#ef8a62!important;stroke-width:2px}.feature-image[class~=hovering-selection]{stroke:#ef8a62;stroke-width:2px}.image-components[class~=click-highlight]{opacity:1!important}.background-image[class~=click-feature-highlight]{fill:#c7e6c0}.image-components[class~=mouseover-unhighlight]{opacity:.3}.background-image[class~=click-highlight],.background-image[class~=mouseover-highlight]{fill:#999}.channel-name[class~=mouseover-highlight]{font-size:.8em;fill:#000!important}.channel-name[class~=selection-highlight]{font-size:.8em;fill:#000}.channel-name[class~=selection-unhighlight]{fill:#ddd}.feature-image[class~=same-feature-highlight]{stroke:gray;stroke-width:2px}.edit-icon-bg{fill:#fff;opacity:.7}.edit-icon{font-size:1em}.control{font-size:.6em}.original-image-bg[class~=mouseover-highlight]{stroke:#999;stroke-width:2px;-webkit-animation-name:original-highlight-animation;animation-name:original-highlight-animation;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.original-image-bg[class~=click-highlight]{stroke:#fff;stroke-width:4px}.feature-event{font-size:.7em}.feature-event[class~=event-highlight]{font-size:.8em}.feature-event-index{font-size:.6em}.feature-event-index[class~=event-highlight]{font-size:.7em}.feature-image[class~=feature-highlight]{stroke:#fc8d59;stroke-width:1px;-webkit-animation-name:feature-highlight-animation;animation-name:feature-highlight-animation;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.channel-name{font-size:.7em}.belong-line{stroke:gray}@-webkit-keyframes original-highlight-animation{50%{stroke-width:2px}}@keyframes original-highlight-animation{50%{stroke-width:2px}}@-webkit-keyframes feature-highlight-animation{50%{stroke-width:3px}}@keyframes feature-highlight-animation{50%{stroke-width:3px}}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(93),a=i(r),o=n(6),s=i(o),u=n(103),l=n(36),c=n(46),h=i(c),f=n(114);e.default={vuex:{getters:{pageSize:l.pageSize,event:l.event,addedFeatures:l.addedFeatures,transedFeatures:l.transedFeatures},actions:{imgCompare:u.imgCompare,imageToTaggedView:u.imageToTaggedView}},components:{ImageRow:a.default},data:function(){return{processedImageObjArray:[],channelInfoObj:{},imageObjArray2:[],selectionArray:[],selectionFeaturesArray:[],selectionImage:null,imageMatrixViewHeight:0,imageHeight:0,channelArray:[],dateArray:[],featureSelectionIndex:0,eventArray:[],categoryColor:h.default.defaultFeaturesObj}},watch:{event:{handler:function(t,e){this.dealWithEvent()},deep:!0},addedFeatures:{handler:function(t,e){console.log(\"transedFeatures\",this.addedFeatures),this.handleWithFeatures()},deep:!0},transedFeatures:{handler:function(t,e){console.log(\"addedFeatures\",this.transedFeatures)},deep:!0},pageSize:{handler:function(t,e){this.initSize(),this.getImageOriginalData(),this.init(),this.render(),this.renderBgRect(),this.renderOriginalImage(),this.renderFeaturesControl(),this.renderFeaturesImage(),this.renderEvents()},deep:!0}},ready:function(){},methods:{initSize:function(){var t=+(0,s.default)(\"#image-matrix\").width()/.792,e=+this.pageSize.pageHeight/3-15,n=e/11,i=.1*n,r=.9*n,a=.0625*t,o=a-r,u=o/8,l=.9*u,c=.1*u,h=r+i,f=.043*t;this.globalWidth=t,this.padding=i,this.paddingTop=0,this.originalImageWidth=r,this.featureImageEachInterval=u,this.featureImageWidth=l,this.paddingFeatureX=c,this.imageHeight=h,this.globalXInterval=a,this.globalYInterval=n,this.paddingX=f,this.paddingY=i},init:function(){var t=(0,s.default)(\"#image-matrix-div\").width(),e=(0,s.default)(\"#image-matrix-div\").height();f.select(\"#image-matrix-div\").append(\"svg\").attr(\"width\",t).attr(\"height\",e).attr(\"id\",\"image-matrix-svg\")},getImageOriginalData:function(){var t=this.padding,e=this.paddingTop,n=this.originalImageWidth,i=this.featureImageWidth,r=this.imageHeight,a=this.globalXInterval,o=this.globalYInterval,u=this.paddingX,l=this.paddingFeatureX,c=[\"B1B5B6\",\"B3B2B1\",\"B4B3B2\",\"B5B4B2\",\"NDVI\",\"B1\",\"B2\",\"B3\",\"B4\",\"B5\",\"B6\"],h=[\"2014_03_17\",\"2014_08_24\",\"2014_11_28\",\"2014_12_30\",\"2015_02_15\",\"2015_06_24\",\"2015_09_12\",\"2015_11_15\",\"2016_03_06\",\"2016_06_26\",\"2016_09_06\",\"2016_12_19\"];this.channelArray=c,this.dateArray=h;var f=r*c.length+e;(0,s.default)(\"#image-matrix-div\").height(f);for(var d=[],p=0;p<c.length;p++){for(var _=[],v=p*o+e,g=c[p],m=0;m<h.length;m++){var y={},b=h[m],x=u+a*m;y={},y.channelName=g,y.date=b,y.imageName=g+\"_\"+b,y.imageHeight=r,y.originalImageWidth=n,y.featureImageWidth=i,y.globalXInterval=a,y.locationX=x,y.locationY=v,y.padding=t,y.paddingFeatureX=l,y.iIndex=p,y.jIndex=m,y.featuresArray=[],y.displayRange=[0,6],y.eventsArray=[],_.push(y)}d.push(_),this.imageObjArray2=d}},render:function(){var t=this.originalImageWidth,e=this.imageObjArray2,n=f.select(\"#image-matrix-svg\"),i=this.paddingX,r=n.selectAll(\".image-row\").data(e);r.enter().append(\"g\").attr(\"class\",\"image-row\").attr(\"id\",function(t,e){return t[0].channelName}).attr(\"transform\",function(t,e){return\"translate(0,\"+t[0].locationY+\")\"}),r.attr(\"transform\",function(t,e){return\"translate(0,\"+t[0].locationY+\")\"}),r.exit().remove();for(var a=function(n){var r=e[n],a=r[0].channelName,o=f.select(\"#image-matrix-svg\").select(\"#\"+a).selectAll(\".image-components\").data(r);o.enter().append(\"g\").attr(\"class\",\"image-components\").attr(\"id\",function(t,e){return t.imageName}).attr(\"transform\",function(t,e){return\"translate(\"+t.locationX+\",0)\"}),o.exit().remove(),f.select(\"#image-matrix-svg\").select(\"#\"+a).select(\"#text-\"+a).empty()?f.select(\"#image-matrix-svg\").select(\"#\"+a).append(\"text\").attr(\"class\",\"channel-name\").attr(\"id\",\"text-\"+a).text(function(t,e){return a}).attr(\"transform\",function(e,n){return\"translate(\"+3*i/4+\",\"+t/2+\")\"}).attr(\"text-anchor\",\"end\").attr(\"cursor\",\"pointer\").attr(\"dominant-baseline\",\"middle\").on(\"mouseover\",function(t,e){f.select(this).classed(\"mouseover-highlight\",!0)}).on(\"mouseout\",function(t,e){f.select(this).classed(\"mouseover-highlight\",!1)}):f.select(\"#image-matrix-svg\").select(\"#\"+a).select(\"#text-\"+a).attr(\"transform\",function(e,n){return\"translate(\"+3*i/4+\",\"+t/2+\")\"})},o=0;o<e.length;o++)a(o)},renderBgRect:function(){for(var t=this,e=this.imageObjArray2,n=f.select(\"#image-matrix-svg\"),i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++){var a=e[i][r].imageName,o=e[i][r].originalImageWidth,s=e[i][r].globalXInterval;n.select(\".image-components#\"+a).append(\"rect\").attr(\"id\",a).attr(\"class\",\"background-image\").attr(\"x\",0).attr(\"y\",0).attr(\"width\",s).attr(\"height\",o).attr(\"fill\",\"white\").on(\"mouseover\",function(e,n){var i=f.select(this).attr(\"id\");t.mouseover_handler(i)}).on(\"mouseout\",function(e,n){var i=f.select(this).attr(\"id\");t.mouseout_handler(i)})}},renderOriginalImage:function(){for(var t=this,e=this.imageObjArray2,n=f.select(\"#image-matrix-svg\"),i=0;i<e.length;i++)for(var r=function(r){var a=e[i][r].imageName,o=e[i][r].channelName,s=e[i][r].originalImageWidth;n.select(\"#\"+a).append(\"rect\").attr(\"class\",\"original-image-bg\").attr(\"id\",a).attr(\"width\",s).attr(\"height\",s),n.select(\"#\"+a).append(\"svg:image\").attr(\"class\",\"original-image\").attr(\"id\",a).attr(\"xlink:href\",\"../../../data/\"+o+\"/\"+a+\".png\").attr(\"cursor\",\"pointer\").attr(\"width\",function(t,e){return s}).attr(\"height\",function(t,e){return s}).on(\"mouseover\",function(e,n){var i=f.select(this).attr(\"id\");f.select(this).classed(\"mouseover-highlight\",!0),f.select(\".original-image-bg#\"+a).classed(\"mouseover-highlight\",!0),t.mouseover_handler(i)}).on(\"mouseout\",function(e,n){var i=f.select(this).attr(\"id\");f.select(this).classed(\"mouseover-highlight\",!1),f.select(\".original-image-bg#\"+a).classed(\"mouseover-highlight\",!1),t.mouseout_handler(i)}).on(\"click\",function(e,i){var r=f.select(this).attr(\"id\");t.unhighlightChannelText(),f.select(\".original-image-bg#\"+a).classed(\"click-highlight\")?(f.select(\".original-image-bg#\"+a).classed(\"click-highlight\",!1),n.selectAll(\".edit-icon\").remove()):(f.select(\".original-image-bg#\"+a).classed(\"click-highlight\",!0),t.renderEditIcon(a),t.highlightChannelText(a)),t.click_handler(r)})},a=0;a<e[i].length;a++)r(a)},highlightChannelText:function(t){var e=t.split(\"_\")[0];f.select(\"#image-matrix-svg\").selectAll(\".channel-name\").classed(\"selection-unhighlight\",!0),f.select(\"#image-matrix-svg\").select(\".channel-name#\"+e).classed(\"selection-unhighlight\",!1),f.select(\"#image-matrix-svg\").select(\".channel-name#\"+e).classed(\"selection-highlight\",!0)},unhighlightChannelText:function(){f.select(\"#image-matrix-svg\").selectAll(\".selection-highlight\").classed(\"selection-highlight\",!1),f.select(\"#image-matrix-svg\").selectAll(\".channel-name\").classed(\"selection-unhighlight\",!1)},renderEditIcon:function(t){var e=this,n=f.select(\"#image-matrix-svg\");n.selectAll(\".edit-icon\").remove(),n.selectAll(\".edit-icon-bg\").remove();var i=+n.select(\"#\"+t).select(\".original-image-bg\").attr(\"width\"),r=+n.select(\"#\"+t).select(\".original-image-bg\").attr(\"height\"),a=+n.select(\"#\"+t).select(\".original-image-bg\").attr(\"x\"),o=+n.select(\"#\"+t).select(\".original-image-bg\").attr(\"y\"),s=a+i/2,u=o+r/2;\nn.select(\"#\"+t).append(\"rect\").attr(\"id\",\"edit-icon-bg-\"+t).attr(\"class\",\"edit-icon-bg\").attr(\"x\",a).attr(\"y\",o).attr(\"width\",i).attr(\"height\",r),n.select(\"#\"+t).append(\"text\").attr(\"x\",s).attr(\"y\",u).attr(\"class\",\"edit-icon\").attr(\"id\",\"edit-icon-\"+t).attr(\"text-anchor\",\"middle\").attr(\"dominant-baseline\",\"middle\").attr(\"font-family\",\"FontAwesome\").attr(\"cursor\",\"pointer\").text(\"\").on(\"mouseover\",function(n,i){var r=f.select(this).attr(\"id\").split(\"-\")[2];f.select(\".original-image-bg#\"+t).classed(\"mouseover-highlight\",!1),e.mouseout_handler(r)}).on(\"mouseout\",function(n,i){var r=f.select(this).attr(\"id\").split(\"-\")[2];f.select(\".original-image-bg#\"+t).classed(\"mouseover-highlight\",!1),e.mouseout_handler(r)}).on(\"click\",function(i,r){f.select(\".original-image-bg#\"+t).classed(\"click-highlight\",!1),n.selectAll(\".edit-icon-bg\").remove(),n.selectAll(\".edit-icon\").remove(),e.sendSelectImage(),e.unhighlightChannelText()}).style(\"fill\",\"black\")},renderFeaturesControl:function(){for(var t=this,e=f.select(\"#image-matrix-svg\"),n=this.imageObjArray2,i=this.paddingFeatureX,r=this.featureImageEachInterval,a=this.featureImageWidth,o=0;o<n.length;o++)for(var s=0;s<n[o].length;s++){var u=n[o][s].imageName,l=n[o][s].originalImageWidth;e.select(\"#\"+u).append(\"g\").attr(\"class\",\"feature-control\").attr(\"id\",\"feature-control-\"+u).attr(\"transform\",\"translate(\"+l+\",\"+(l-r)+\")\"),e.select(\"#feature-control-\"+u).append(\"text\").attr(\"x\",function(t,e){return i+a/4}).attr(\"y\",function(t,e){return a/2}).attr(\"text-anchor\",\"middle\").attr(\"dominant-baseline\",\"middle\").attr(\"cursor\",\"pointer\").attr(\"id\",\"left-\"+o+\"-\"+s).attr(\"class\",\"control left-control control-hidden\").attr(\"font-family\",\"FontAwesome\").text(\"\").on(\"click\",function(e,i){for(var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=0;s<n[o].length;s++)t.featureRightClickHandler(o,s)}).on(\"mouseover\",function(e,i){var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=a[2],u=n[o][s].imageName;t.mouseover_handler(u)}).on(\"mouseout\",function(e,i){var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=a[2],u=n[o][s].imageName;t.mouseout_handler(u)}),e.select(\"#feature-control-\"+u).append(\"text\").attr(\"x\",function(t,e){return 8*r-a/2+a/4}).attr(\"y\",function(t,e){return a/2}).attr(\"text-anchor\",\"middle\").attr(\"dominant-baseline\",\"middle\").attr(\"cursor\",\"pointer\").attr(\"id\",\"right-\"+o+\"-\"+s).attr(\"class\",\"control right-control control-hidden\").attr(\"font-family\",\"FontAwesome\").text(\"\").on(\"click\",function(e,i){for(var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=0;s<n[o].length;s++)t.featureLeftClickHandler(o,s)}).on(\"mouseover\",function(e,i){var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=a[2],u=n[o][s].imageName;t.mouseover_handler(u)}).on(\"mouseout\",function(e,i){var r=f.select(this).attr(\"id\"),a=r.split(\"-\"),o=a[1],s=a[2],u=n[o][s].imageName;t.mouseout_handler(u)})}},featureLeftClickHandler:function(t,e){var n=this.imageObjArray2,i=n[t][e].displayRange;i[0]>0&&(i[0]=i[0]-1,i[1]=i[1]-1),this.render_each_features_image(t,e),this.render_each_events(t,e),this.highlight_features_image(),this.render_each_component_belong_line(t,e)},featureRightClickHandler:function(t,e){var n=this.imageObjArray2,i=n[t][e].displayRange,r=n[t][e].featuresArray;i[1]<r.length-1&&(i[0]=i[0]+1,i[1]=i[1]+1),this.render_each_features_image(t,e),this.render_each_events(t,e),this.highlight_features_image(),this.render_each_component_belong_line(t,e)},renderFeaturesImage:function(){for(var t=this.imageObjArray2,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)this.render_each_features_image(e,n)},renderBelongLine:function(){for(var t=this.imageObjArray2,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)for(var i=t[e][n],r=i.featuresArray,a=0;a<r.length;a++)if(r[a].belongThisImage){var o=r[a].featureName;this.render_each_feature_belonged_line(e,n,o)}},render_each_component_belong_line:function(t,e){var n=this.imageObjArray2,i=n[t][e],r=i.featuresArray,a=n[t][e].imageName;f.select(\"#\"+a).selectAll(\".belong-line\").remove();for(var o=0;o<r.length;o++)if(r[o].belongThisImage){var s=r[o].featureName;this.render_each_feature_belonged_line(t,e,s)}},renderEvents:function(){for(var t=this.imageObjArray2,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)this.render_each_events(e,n)},highlight_features_image:function(){for(var t=f.select(\"#image-matrix-svg\"),e=this.selectionFeaturesArray,n=0;n<e.length;n++){var i=e[n],r=i.split(\"-\"),a=r[0];0===n?(t.selectAll(\".click-selection\").classed(\"click-selection\",!1),t.select(\"#feature-image-\"+a).select(\"#\"+i).classed(\"click-selection\",!0)):(t.selectAll(\".click-selection\").classed(\"click-selection\",!1),t.select(\"#feature-image-\"+a).select(\"#\"+i).classed(\"click-selection\",!0))}},render_each_events:function(t,e){var n=this,i=this.imageObjArray2,r=this.featureImageEachInterval,a=f.select(\"#image-matrix-svg\"),o=i[t][e].imageName,s=i[t][e].featuresArray,u=i[t][e].displayRange,l=i[t][e].originalImageWidth,c=i[t][e].featureImageWidth,h=this.categoryColor;a.select(\"#\"+o).select(\"#feature-events-\"+o).empty()&&a.select(\"#\"+o).append(\"g\").attr(\"class\",\"feature-events\").attr(\"id\",\"feature-events-\"+o).attr(\"transform\",\"translate(\"+l+\",\"+(l-2*c)+\")\");var d=a.select(\"#feature-events-\"+o).selectAll(\".feature-event\").data(s.filter(function(t,e){return e>=u[0]&&e<=u[1]}),function(t,e){return\"undefined\"!=typeof t.eventObj?t.eventObj.eventName:\"non-exist\"});d.enter().append(\"text\").attr(\"cursor\",\"pointer\").attr(\"class\",function(t,e){return\"undefined\"!=typeof t.eventObj?\"feature-event \"+t.eventObj.eventName+\" \"+t.eventObj.eventType:\"feature-event non-exist\"}).attr(\"id\",function(t,e){return\"undefined\"!=typeof t.eventObj?o+\"-\"+t.eventObj.eventName:o+\"-nonexist\"}).attr(\"x\",function(t,e){return r+r*e}).attr(\"y\",c/2).attr(\"text-anchor\",\"middle\").attr(\"dominant-baseline\",\"middle\").attr(\"cursor\",\"pointer\").attr(\"font-family\",\"FontAwesome\").text(function(t,e){return\"undefined\"==typeof t.eventObj?\"\":\"start\"===t.eventObj.eventType?\"\":\"end\"===t.eventObj.eventType?\"\":void 0}).on(\"mouseover\",function(t,e){f.select(this).classed(\"event-highlight\",!0);var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseover_handler(i);var r=f.select(this).attr(\"class\"),a=r.split(\" \"),o=a[1];\"start\"===t.eventObj.eventType?f.selectAll(\".end.\"+o).classed(\"event-highlight\",!0):f.selectAll(\".start.\"+o).classed(\"event-highlight\",!0)}).on(\"mouseout\",function(t,e){f.select(this).classed(\"event-highlight\",!1);var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseout_handler(i);var r=f.select(this).attr(\"class\"),a=r.split(\" \"),o=a[1];\"start\"===t.eventObj.eventType?f.selectAll(\".end.\"+o).classed(\"event-highlight\",!1):f.selectAll(\".start.\"+o).classed(\"event-highlight\",!1)}).style(\"fill\",function(t,e){if(\"undefined\"==typeof t.eventObj)return\"black\";var n=t.eventObj.eventCategory;return\"undefined\"!=typeof h?h[n]:\"black\"}).on(\"click\",function(t,e){}),d.attr(\"id\",function(t,e){return\"undefined\"!=typeof t.eventObj?o+\"-\"+t.eventObj.eventName:o+\"-nonexist\"}).attr(\"x\",function(t,e){return r+r*e}).attr(\"y\",c/2),d.exit().remove();var p=a.select(\"#feature-events-\"+o).selectAll(\".feature-event-index\").data(s.filter(function(t,e){return e>=u[0]&&e<=u[1]}),function(t,e){return\"undefined\"!=typeof t.eventObj?t.eventObj.eventName:\"non-exist\"});p.enter().append(\"text\").attr(\"cursor\",\"pointer\").attr(\"class\",function(t,e){return\"undefined\"!=typeof t.eventObj?\"feature-event-index \"+t.eventObj.eventName+\" \"+t.eventObj.eventType:\"feature-event-index non-exist\"}).attr(\"id\",function(t,e){return\"undefined\"!=typeof t.eventObj?o+\"-\"+t.eventObj.eventName:o+\"-nonexist\"}).attr(\"x\",function(t,e){return r/2+r+r*e}).attr(\"y\",c).attr(\"text-anchor\",\"middle\").attr(\"dominant-baseline\",\"middle\").attr(\"cursor\",\"pointer\").attr(\"font-family\",\"FontAwesome\").text(function(t){return t.eventObj.eventIndex}).on(\"mouseover\",function(t,e){f.select(this).classed(\"event-highlight\",!0);var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseover_handler(i);var r=f.select(this).attr(\"class\"),a=r.split(\" \"),o=a[1];f.selectAll(\".\"+o).classed(\"event-highlight\",!0)}).on(\"mouseout\",function(t,e){f.select(this).classed(\"event-highlight\",!1);var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseout_handler(i);var r=f.select(this).attr(\"class\"),a=r.split(\" \"),o=a[1];f.selectAll(\".\"+o).classed(\"event-highlight\",!1)}).style(\"fill\",function(t,e){if(\"undefined\"==typeof t.eventObj)return\"black\";var n=t.eventObj.eventCategory;return\"undefined\"!=typeof h?h[n]:\"black\"}).on(\"click\",function(t,e){}),p.attr(\"id\",function(t,e){return\"undefined\"!=typeof t.eventObj?o+\"-\"+t.eventObj.eventName:o+\"-nonexist\"}).attr(\"x\",function(t,e){return r/2+r+r*e}).attr(\"y\",c),p.exit().remove()},render_each_feature_belonged_line:function(t,e,n){var i=this.imageObjArray2,r=f.select(\"#image-matrix-svg\"),a=i[t][e].imageName,o=this.paddingY;if(!r.select(\"#\"+a+\"-\"+n).empty()){var s=+r.select(\"#\"+a+\"-\"+n).attr(\"x\"),u=+r.select(\"#\"+a+\"-\"+n).attr(\"y\"),l=+r.select(\"#\"+a+\"-\"+n).attr(\"height\"),c=+r.select(\"#\"+a+\"-\"+n).attr(\"width\"),h=o;r.select(\"#feature-image-\"+a).select(\"#belong-line-\"+a+\"-\"+n).empty()&&r.select(\"#feature-image-\"+a).append(\"line\").attr(\"class\",\"belong-line\").attr(\"id\",\"belong-line-\"+a+\"-\"+n).attr(\"x1\",s).attr(\"y1\",u+l+h).attr(\"x2\",s+c).attr(\"y2\",u+l+h)}},render_each_features_image:function(t,e){var n=this,i=this.imageObjArray2,r=this.featureImageEachInterval,a=f.select(\"#image-matrix-svg\"),o=i[t][e].imageName,s=i[t][e].originalImageWidth,u=i[t][e].featureImageWidth,l=i[t][e].featuresArray,c=i[t][e].displayRange,h=this.selectionFeaturesArray;a.select(\"#\"+o).select(\"#feature-image-\"+o).empty()&&a.select(\"#\"+o).append(\"g\").attr(\"class\",\"feature-images\").attr(\"id\",\"feature-image-\"+o).attr(\"transform\",\"translate(\"+s+\",\"+(s-u)+\")\");var d=a.select(\"#feature-image-\"+o).selectAll(\".feature-image\").data(l.filter(function(t,e){return e>=c[0]&&e<=c[1]}),function(t,e){return t.featureName});d.enter().append(\"rect\").attr(\"class\",function(t,e){return\"feature-image \"+t.featureName}).attr(\"id\",function(t,e){return o+\"-\"+t.featureName}).attr(\"cursor\",\"pointer\").attr(\"x\",function(t,e){return r/2+r*e}).attr(\"y\",0).attr(\"width\",u).attr(\"height\",u),d.attr(\"x\",function(t,e){return r/2+r*e}).attr(\"y\",0).attr(\"width\",u).attr(\"height\",u);var p=a.select(\"#feature-image-\"+o).selectAll(\".feature-real-image\").data(l.filter(function(t,e){return e>=c[0]&&e<=c[1]}),function(t,e){return t.featureName});p.enter().append(\"image\").attr(\"class\",function(t,e){return\"feature-real-image \"+t.featureName}).attr(\"id\",function(t,e){return o+\"-\"+t.featureName}).attr(\"cursor\",\"pointer\").attr(\"x\",function(t,e){return r/2+r*e}).attr(\"y\",0).attr(\"width\",u).attr(\"height\",u).attr(\"xlink:href\",function(t){return t.imageData}).on(\"mouseover\",function(t,e){var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseover_handler(i),n.mouseover_feature_handler(t.featureName,i),f.select(this).classed(\"same-feature-highlight\",!1),f.select(this).classed(\"hovering-selection\",!0)}).on(\"mouseout\",function(t,e){f.select(this).classed(\"hovering-selection\",!1);var i=f.select(this).attr(\"id\").split(\"-\")[0];n.mouseout_handler(i),n.mouseout_feature_handler(i)}).on(\"click\",function(t,e){var i=f.select(this).attr(\"id\");n.feature_click_handler(i)}),p.attr(\"x\",function(t,e){return r/2+r*e}).attr(\"y\",0).attr(\"width\",u).attr(\"height\",u);for(var _=0;_<h.length;_++){var v=h[_];a.select(\"#feature-image-\"+o).select(\"#\"+v).classed(\"click-selection\",!0)}d.exit().remove()},feature_click_handler:function(t){var e=this.selectionFeaturesArray;f.select(\"#\"+t).classed(\"click-selection\")?e.splice(e.indexOf(t),1):2===e.length?e.splice(this.featureSelectionIndex%2,1,t):e.length<2&&e.push(t),this.featureSelectionIndex=this.featureSelectionIndex+1,f.selectAll(\".click-selection\").classed(\"click-selection\",!1),f.selectAll(\".click-feature-highlight\").classed(\"click-feature-highlight\",!1);for(var n=[],i=0;i<e.length;i++){0===i?f.select(\"#\"+e[i]).classed(\"click-selection\",!0):f.select(\"#\"+e[i]).classed(\"click-selection\",!0);var r=e[i];n.push(r)}this.update_comparison_features(n),f.select(\".click-feature-highlight\").empty()&&f.selectAll(\".image-components\").classed(\"mouseover-unhighlight\",!1)},mouseover_feature_handler:function(t,e){var n=e.split(\"_\")[0];f.select(\"#image-matrix-svg\").select(\".image-row#\"+n).selectAll(\".\"+t).classed(\"same-feature-highlight\",!0)},mouseout_feature_handler:function(t){var e=t.split(\"_\")[0];f.select(\"#image-matrix-svg\").select(\".image-row#\"+e).selectAll(\".same-feature-highlight\").classed(\"same-feature-highlight\",!1)},mouseover_handler:function(t){f.select(\".image-components#\"+t).select(\".background-image\").classed(\"mouseover-highlight\",!0);var e=this.getIndex(t),n=this.imageObjArray2,i=n[e.i][e.j],r=i.displayRange,a=i.featuresArray;f.select(\"#\"+t).select(\".feature-control\").select(\".right-control\").classed(\"control-hidden\",!1),f.select(\"#\"+t).select(\".feature-control\").select(\".left-control\").classed(\"control-hidden\",!1),0===r[0]?f.select(\"#\"+t).select(\".feature-control\").select(\".right-control\").classed(\"control-hidden\",!0):f.select(\"#\"+t).select(\".feature-control\").select(\".right-control\").classed(\"control-hidden\",!1),r[1]>=a.length-1?f.select(\"#\"+t).select(\".feature-control\").select(\".left-control\").classed(\"control-hidden\",!0):f.select(\"#\"+t).select(\".feature-control\").select(\".left-control\").classed(\"control-hidden\",!1)},mouseout_handler:function(t){f.select(\".image-components#\"+t).select(\".background-image\").classed(\"mouseover-highlight\",!1),f.select(\".image-components.click-highlight\").empty()&&f.select(\".image-components.click-feature-highlight\").empty()&&f.selectAll(\".image-components\").classed(\"mouseover-unhighlight\",!1),f.selectAll(\".feature-control\").select(\".right-control\").classed(\"control-hidden\",!0),f.selectAll(\".feature-control\").select(\".left-control\").classed(\"control-hidden\",!0)},click_handler:function(t){f.select(\".image-components#\"+t).select(\".background-image\").classed(\"click-highlight\")?(f.selectAll(\".background-image.click-highlight\").classed(\"click-highlight\",!1),f.selectAll(\".original-image-bg.click-highlight\").classed(\"click-highlight\",!1),this.sendSelectImage()):(f.selectAll(\".background-image.click-highlight\").classed(\"click-highlight\",!1),f.selectAll(\".original-image-bg.click-highlight\").classed(\"click-highlight\",!1),f.select(\".image-components#\"+t).select(\".original-image-bg\").classed(\"click-highlight\",!0),this.sendSelectImage(t))},getIndex:function(t){var e=t.split(\"_\"),n=e[0],i=e[1]+\"_\"+e[2]+\"_\"+e[3],r=this.channelArray,a=this.dateArray,o={i:r.indexOf(n),j:a.indexOf(i)};return o},update_comparison_features:function(t){if(1===t.length){var e=t[0],n=e.split(\"-\"),i=n[0],r=n[1];this.imgCompare({type:\"originalImgs\",img1:{feature:{name:r,path:[]},imgName:i,color:\"#ff7f00\"},img2:null})}else if(2===t.length){var a=t[0],o=a.split(\"-\"),s=o[0],u=o[1],l=t[1],c=l.split(\"-\"),h=c[0],f=c[1];this.imgCompare({type:\"originalImgs\",img1:{feature:{name:u,path:[]},imgName:s,color:\"#ff7f00\"},img2:{feature:{name:f,path:[]},imgName:h,color:\"#1b9e77\"}})}},dealWithEvent:function(){var t=this.eventArray,e=this.event.end,n=this.event.start,i=this.event.type;t.push(this.event);var r=t.length-1;\"undefined\"!=typeof n&&this.addEventStart(n,i,r,\"start\"),\"undefined\"!=typeof e&&this.addEventEnd(e,i,r,\"end\")},handleWithFeatures:function(){var t={};for(var e in this.addedFeatures)t[e]=this.addedFeatures[e];for(var n=t.imageName,i=t.imageUrl,r=n.split(\"_\"),a=r[0],o=r[1]+\"_\"+r[2]+\"_\"+r[3],u=this.dateArray,l=this.channelArray,c=l.indexOf(a),h=u.indexOf(o),f=this.imageObjArray2[c],d=0;d<f.length;d++){var p=f[d],_=p.imageName,v=p.featuresArray;d===h?t.belongThisImage=!0:t.belongThisImage=!1,t.imageData=i[_],v.push(s.default.extend(!0,{},t)),this.render_each_features_image(c,d);for(var g=0;g<v.length;g++)if(v[g].belongThisImage){var m=v[g].featureName;this.render_each_feature_belonged_line(c,d,m)}}},addEventStart:function(t,e,n,i){for(var r=t.channel,a=t.time,o=t.feature,s=this.dateArray,u=this.channelArray,l=this.imageObjArray2,c=u.indexOf(r),h=s.indexOf(a),f=l[c][h],d=f.featuresArray,p=\"event\"+n,_=0;_<d.length;_++)d[_].featureName===o&&(d[_].eventObj={},d[_].eventObj.eventName=p,d[_].eventObj.eventCategory=e,d[_].eventObj.eventType=i,d[_].eventObj.eventIndex=n);this.render_each_events(c,h)},addEventEnd:function(t,e,n,i){for(var r=t.channel,a=t.time,o=t.feature,s=this.dateArray,u=this.channelArray,l=this.imageObjArray2,c=u.indexOf(r),h=s.indexOf(a),f=l[c][h],d=f.featuresArray,p=\"event\"+n,_=0;_<d.length;_++)d[_].featureName===o&&(d[_].eventObj={},d[_].eventObj.eventName=p,d[_].eventObj.eventCategory=e,d[_].eventObj.eventType=i,d[_].eventObj.eventIndex=n);this.render_each_events(c,h)},sendSelectImage:function(t){\"undefined\"!=typeof t?this.imageToTaggedView(t):this.imageToTaggedView(null)},updateSelectedFeaturesHandler:function(t){this.update_comparison_features(t)}}}},function(t,e,n){var i,r;n(94),i=n(96),r=n(102),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(95);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".event-view-main[_v-b2c726a0]{border:1px solid gray;padding:5px 10px}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(97),a=i(r);e.default={components:{ImageFeatures:a.default},data:function(){return{}},watch:{},ready:function(){this.getImageOriginalData()},methods:{getImageOriginalData:function(){},render:function(){}}}},function(t,e,n){var i,r;n(98),i=n(100),r=n(101),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(99);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".event-view-main[_v-5f44bfc2]{border:1px solid gray;padding:5px 10px}\",\"\"])},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={data:function(){return{locationX:null,locationY:null,originalImage:null,FeaturesArray:[],EventsArray:[]}},ready:function(){}}},function(t,e){t.exports=' <div class=image-and-features _v-5f44bfc2=\"\"> </div> '},function(t,e){t.exports=' <div class=image-row _v-b2c726a0=\"\"> <image-features _v-b2c726a0=\"\"></image-features> </div> '},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(104);Object.keys(r).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=n(106);Object.keys(a).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var o=n(107);Object.keys(o).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=n(108);Object.keys(s).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var u=n(109);Object.keys(u).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var l=n(110);Object.keys(l).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var c=n(111);Object.keys(c).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var h=n(112);Object.keys(h).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})});var f=n(113);Object.keys(f).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})});var d=n(105);i(d)},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={updatePageWidth:function(t,e){t.dispatch(a.UPDATE_PAGE_WIDTH,e)},updatePageHeight:function(t,e){t.dispatch(a.UPDATE_PAGE_HEIGHT,e)},updatePageSize:function(t,e,n){t.dispatch(a.UPDATE_PAGE_SIZE,e,n)}},t.exports=e.default},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.UPDATE_PAGE_SIZE=\"UPDATE_PAGE_SIZE\",e.UPDATE_PAGE_WIDTH=\"UPDATE_PAGE_WIDTH\",e.UPDATE_PAGE_HEIGHT=\"UPDATE_PAGE_HEIGHT\",e.EVENT_SUBMIT=\"EVENT_SUBMIT\",e.EXPORT_AREA=\"EXPORT_AREA\",e.CREATE_SELECTION=\"CREATE_SELECTION\",e.UPDATE_SELECTION=\"UPDATE_SELECTION\",e.ACTIVE_IMAGE_SELECTION=\"ACTIVE_IMAGE_SELECTION\",e.ACTIVE_REGION_SELECTION=\"ACTIVE_REGION_SELECTION\",e.IMAGE_TO_TAGGED_VIEW=\"IMAGE_TO_TAGGED_VIEW\",e.ADD_FEATURES=\"ADD_FEATURES\",e.ACTIVE_REGION_SELECTION_IDS=\"ACTIVE_REGION_SELECTION_IDS\",e.ACTIVE_REGION_SELECTION_IMAGES=\"ACTIVE_REGION_SELECTION_IMAGES\",e.CHANGE_ICON_LIST=\"CHANGE_ICON_LIST\",e.IMG_COMPARE=\"IMG_COMPARE\"},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={eventSubmit:function(t,e){t.dispatch(a.EVENT_SUBMIT,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={imgCompare:function(t,e){t.dispatch(a.IMG_COMPARE,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={imageToTaggedView:function(t,e){t.dispatch(a.IMAGE_TO_TAGGED_VIEW,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={createSelection:function(t,e,n){t.dispatch(a.CREATE_SELECTION,e,n)},updateSelection:function(t,e,n){t.dispatch(a.UPDATE_SELECTION,e,n)},activeImagesSelection:function(t,e){t.dispatch(a.ACTIVE_IMAGE_SELECTION,e)},activeRegionSelection:function(t,e,n){t.dispatch(a.ACTIVE_REGION_SELECTION,e,n)},activeRegionSelectionIds:function(t,e,n){return t.dispatch(a.ACTIVE_REGION_SELECTION_IDS,e,n)},activeRegionSelectionImages:function(t,e,n){t.dispatch(a.ACTIVE_REGION_SELECTION_IMAGES,e,n)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={exportArea:function(t,e){t.dispatch(a.EXPORT_AREA,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={addFeatures:function(t,e){t.dispatch(a.ADD_FEATURES,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={changeIconList:function(t,e){t.dispatch(a.Change_Icon_List,e)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(105),a=i(r);e.default={transFeatures:function(t,e){t.dispatch(a.TRANS_FEATURES,e)}},t.exports=e.default},function(t,e,n){var i,r;(function(a){!function(){function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function s(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function u(t){return null===t?NaN:+t}function l(t){return!isNaN(t)}function c(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function h(t){return t.length}function f(t){for(var e=1;t*e%1;)e*=10;return e}function d(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function p(){this._=Object.create(null)}function _(t){return(t+=\"\")===mo||t[0]===yo?yo+t:t}function v(t){return(t+=\"\")[0]===yo?t.slice(1):t}function g(t){return _(t)in this._}function m(t){return(t=_(t))in this._&&delete this._[t]}function y(){var t=[];for(var e in this._)t.push(v(e));return t}function b(){var t=0;for(var e in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function w(){this._=Object.create(null)}function k(t){return t}function M(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function C(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=bo.length;i>n;++n){var r=bo[n]+e;if(r in t)return r}}function E(){}function S(){}function I(t){function e(){for(var e,i=n,r=-1,a=i.length;++r<a;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new p;return e.on=function(e,r){var a,o=i.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function O(){oo.event.preventDefault()}function T(){for(var t,e=oo.event;t=e.sourceEvent;)e=t;return e}function A(t){for(var e=new S,n=0,i=arguments.length;++n<i;)e[arguments[n]]=I(e);return e.of=function(n,i){return function(r){try{var a=r.sourceEvent=oo.event;r.target=t,oo.event=r,e[r.type].apply(n,i)}finally{oo.event=a}}},e}function P(t){return wo(t,Eo),t}function j(t){return\"function\"==typeof t?t:function(){return ko(t,this)}}function R(t){return\"function\"==typeof t?t:function(){return Mo(t,this)}}function N(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function o(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=oo.ns.qualify(t),null==e?t.local?i:n:\"function\"==typeof e?t.local?s:o:t.local?a:r}function F(t){return t.trim().replace(/\\s+/g,\" \")}function L(t){return new RegExp(\"(?:^|\\\\s+)\"+oo.requote(t)+\"(?:\\\\s+|$)\",\"g\")}function z(t){return(t+\"\").trim().split(/^|\\s+/)}function D(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=z(t).map($);var r=t.length;return\"function\"==typeof e?i:n}function $(t){var e=L(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute(\"class\")||\"\";i?(e.lastIndex=0,e.test(r)||n.setAttribute(\"class\",F(r+\" \"+t))):n.setAttribute(\"class\",F(r.replace(e,\" \")))}}function U(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function a(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:\"function\"==typeof e?a:r}function H(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:\"function\"==typeof e?r:i}function B(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return\"function\"==typeof t?t:(t=oo.ns.qualify(t)).local?n:e}function W(){var t=this.parentNode;t&&t.removeChild(this)}function V(t){return{__data__:t}}function q(t){return function(){return Co(this,t)}}function G(t){return arguments.length||(t=s),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function Y(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,a=t[n],o=0,s=a.length;s>o;o++)(r=a[o])&&e(r,o,n);return t}function X(t){return wo(t,Io),t}function Z(t){var e,n;return function(i,r,a){var o,s=t[a].update,u=s.length;for(a!=n&&(n=a,e=0),r>=e&&(e=r+1);!(o=s[e])&&++e<u;);return o}}function J(t,e,n){function i(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function r(){var r=u(e,uo(arguments));i.call(this),this.addEventListener(t,this[o]=r,r.$=n),r._=e}function a(){var e,n=new RegExp(\"^__on([^.]+)\"+oo.requote(t)+\"$\");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var o=\"__on\"+t,s=t.indexOf(\".\"),u=Q;s>0&&(t=t.slice(0,s));var l=Oo.get(t);return l&&(t=l,u=K),s?e?r:i:e?E:a}function Q(t,e){return function(n){var i=oo.event;oo.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{oo.event=i}}}function K(t,e){var n=Q(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function tt(t){var e=\".dragsuppress-\"+ ++Ao,n=\"click\"+e,i=oo.select(o(t)).on(\"touchmove\"+e,O).on(\"dragstart\"+e,O).on(\"selectstart\"+e,O);if(null==To&&(To=!(\"onselectstart\"in t)&&C(t.style,\"userSelect\")),To){var r=a(t).style,s=r[To];r[To]=\"none\"}return function(t){if(i.on(e,null),To&&(r[To]=s),t){var a=function(){i.on(n,null)};i.on(n,function(){O(),a()},!0),setTimeout(a,0)}}}function et(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Po){var r=o(t);if(r.scrollX||r.scrollY){n=oo.select(\"body\").append(\"svg\").style({position:\"absolute\",top:0,left:0,margin:0,padding:0,border:\"none\"},\"important\");var a=n[0][0].getScreenCTM();Po=!(a.f||a.e),n.remove()}}return Po?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function nt(){return oo.event.changedTouches[0].identifier}function it(t){return t>0?1:0>t?-1:0}function rt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function at(t){return t>1?0:-1>t?No:Math.acos(t)}function ot(t){return t>1?zo:-1>t?-zo:Math.asin(t)}function st(t){return((t=Math.exp(t))-1/t)/2}function ut(t){return((t=Math.exp(t))+1/t)/2}function lt(t){return((t=Math.exp(2*t))-1)/(t+1)}function ct(t){return(t=Math.sin(t/2))*t}function ht(){}function ft(t,e,n){return this instanceof ft?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ft?new ft(t.h,t.s,t.l):Et(\"\"+t,St,ft):new ft(t,e,n)}function dt(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?a+(o-a)*t/60:180>t?o:240>t?a+(o-a)*(240-t)/60:a}function r(t){return Math.round(255*i(t))}var a,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+e):n+e-n*e,a=2*n-o,new wt(r(t+120),r(t),r(t-120))}function pt(t,e,n){return this instanceof pt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof pt?new pt(t.h,t.c,t.l):t instanceof vt?mt(t.l,t.a,t.b):mt((t=It((t=oo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new pt(t,e,n)}function _t(t,e,n){\nreturn isNaN(t)&&(t=0),isNaN(e)&&(e=0),new vt(n,Math.cos(t*=Do)*e,Math.sin(t)*e)}function vt(t,e,n){return this instanceof vt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof vt?new vt(t.l,t.a,t.b):t instanceof pt?_t(t.h,t.c,t.l):It((t=wt(t)).r,t.g,t.b):new vt(t,e,n)}function gt(t,e,n){var i=(t+16)/116,r=i+e/500,a=i-n/200;return r=yt(r)*Zo,i=yt(i)*Jo,a=yt(a)*Qo,new wt(xt(3.2404542*r-1.5371385*i-.4985314*a),xt(-.969266*r+1.8760108*i+.041556*a),xt(.0556434*r-.2040259*i+1.0572252*a))}function mt(t,e,n){return t>0?new pt(Math.atan2(n,e)*$o,Math.sqrt(e*e+n*n),t):new pt(NaN,NaN,t)}function yt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function bt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function xt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function wt(t,e,n){return this instanceof wt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof wt?new wt(t.r,t.g,t.b):Et(\"\"+t,wt,dt):new wt(t,e,n)}function kt(t){return new wt(t>>16,t>>8&255,255&t)}function Mt(t){return kt(t)+\"\"}function Ct(t){return 16>t?\"0\"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Et(t,e,n){var i,r,a,o=0,s=0,u=0;if(i=/([a-z]+)\\((.*)\\)/i.exec(t))switch(r=i[2].split(\",\"),i[1]){case\"hsl\":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case\"rgb\":return e(Tt(r[0]),Tt(r[1]),Tt(r[2]))}return(a=es.get(t.toLowerCase()))?e(a.r,a.g,a.b):(null==t||\"#\"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function St(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(r=.5>u?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(n>e?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=u>0&&1>u?0:i),new ft(i,r,u)}function It(t,e,n){t=Ot(t),e=Ot(e),n=Ot(n);var i=bt((.4124564*t+.3575761*e+.1804375*n)/Zo),r=bt((.2126729*t+.7151522*e+.072175*n)/Jo),a=bt((.0193339*t+.119192*e+.9503041*n)/Qo);return vt(116*r-16,500*(i-r),200*(r-a))}function Ot(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tt(t){var e=parseFloat(t);return\"%\"===t.charAt(t.length-1)?Math.round(2.55*e):e}function At(t){return\"function\"==typeof t?t:function(){return t}}function Pt(t){return function(e,n,i){return 2===arguments.length&&\"function\"==typeof n&&(i=n,n=null),jt(e,n,t,i)}}function jt(t,e,n,i){function r(){var t,e=u.status;if(!e&&Nt(u)||e>=200&&300>e||304===e){try{t=n.call(a,u)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,u)}var a={},o=oo.dispatch(\"beforesend\",\"progress\",\"load\",\"error\"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||\"withCredentials\"in u||!/^(http(s)?:)?\\/\\//.test(t)||(u=new XDomainRequest),\"onload\"in u?u.onload=u.onerror=r:u.onreadystatechange=function(){u.readyState>3&&r()},u.onprogress=function(t){var e=oo.event;oo.event=t;try{o.progress.call(a,u)}finally{oo.event=e}},a.header=function(t,e){return t=(t+\"\").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+\"\",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+\"\",a):e},a.responseType=function(t){return arguments.length?(l=t,a):l},a.response=function(t){return n=t,a},[\"get\",\"post\"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(uo(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&\"function\"==typeof i&&(r=i,i=null),u.open(n,t,!0),null==e||\"accept\"in s||(s.accept=e+\",*/*\"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=r&&a.on(\"error\",r).on(\"load\",function(t){r(null,t)}),o.beforesend.call(a,u),u.send(null==i?null:i),a},a.abort=function(){return u.abort(),a},oo.rebind(a,o,\"on\"),null==i?a:a.get(Rt(i))}function Rt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Nt(t){var e=t.responseType;return e&&\"text\"!==e?t.response:t.responseText}function Ft(){var t=Lt(),e=zt()-t;e>24?(isFinite(e)&&(clearTimeout(as),as=setTimeout(Ft,e)),rs=0):(rs=1,ss(Ft))}function Lt(){var t=Date.now();for(os=ns;os;)t>=os.t&&(os.f=os.c(t-os.t)),os=os.n;return t}function zt(){for(var t,e=ns,n=1/0;e;)e.f?e=t?t.n=e.n:ns=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return is=t,n}function Dt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function $t(t,e){var n=Math.pow(10,3*go(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ut(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,a=i&&n?function(t,e){for(var r=t.length,a=[],o=0,s=i[0],u=0;r>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),a.push(t.substring(r-=s,r+s)),!((u+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:k;return function(t){var n=ls.exec(t),i=n[1]||\" \",o=n[2]||\">\",s=n[3]||\"-\",u=n[4]||\"\",l=n[5],c=+n[6],h=n[7],f=n[8],d=n[9],p=1,_=\"\",v=\"\",g=!1,m=!0;switch(f&&(f=+f.substring(1)),(l||\"0\"===i&&\"=\"===o)&&(l=i=\"0\",o=\"=\"),d){case\"n\":h=!0,d=\"g\";break;case\"%\":p=100,v=\"%\",d=\"f\";break;case\"p\":p=100,v=\"%\",d=\"r\";break;case\"b\":case\"o\":case\"x\":case\"X\":\"#\"===u&&(_=\"0\"+d.toLowerCase());case\"c\":m=!1;case\"d\":g=!0,f=0;break;case\"s\":p=-1,d=\"r\"}\"$\"===u&&(_=r[0],v=r[1]),\"r\"!=d||f||(d=\"g\"),null!=f&&(\"g\"==d?f=Math.max(1,Math.min(21,f)):(\"e\"==d||\"f\"==d)&&(f=Math.max(0,Math.min(20,f)))),d=cs.get(d)||Ht;var y=l&&h;return function(t){var n=v;if(g&&t%1)return\"\";var r=0>t||0===t&&0>1/t?(t=-t,\"-\"):\"-\"===s?\"\":s;if(0>p){var u=oo.formatPrefix(t,f);t=u.scale(t),n=u.symbol+v}else t*=p;t=d(t,f);var b,x,w=t.lastIndexOf(\".\");if(0>w){var k=m?t.lastIndexOf(\"e\"):-1;0>k?(b=t,x=\"\"):(b=t.substring(0,k),x=t.substring(k))}else b=t.substring(0,w),x=e+t.substring(w+1);!l&&h&&(b=a(b,1/0));var M=_.length+b.length+x.length+(y?0:r.length),C=c>M?new Array(M=c-M+1).join(i):\"\";return y&&(b=a(C+b,C.length?c-x.length:1/0)),r+=_,t=b+x,(\"<\"===o?r+t+C:\">\"===o?C+r+t:\"^\"===o?C.substring(0,M>>=1)+r+t+C.substring(M):r+(y?t:C+t))+n}}}function Ht(t){return t+\"\"}function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Wt(t,e,n){function i(e){var n=t(e),i=a(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new fs(n-1)),1),n}function a(t,n){return e(t=new fs(+t),n),t}function o(t,i,a){var o=r(t),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;i>o;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{fs=Bt;var i=new Bt;return i._=t,o(i,e,n)}finally{fs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=a,t.range=o;var u=t.utc=Vt(t);return u.floor=u,u.round=Vt(i),u.ceil=Vt(r),u.offset=Vt(a),u.range=s,t}function Vt(t){return function(e,n){try{fs=Bt;var i=new Bt;return i._=e,t(i,n)._}finally{fs=Date}}}function qt(t){function e(t){function e(e){for(var n,r,a,o=[],s=-1,u=0;++s<i;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(r=ps[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=I[n])&&(n=a(e,null==r?\"e\"===n?\" \":\"0\":r)),o.push(n),u=s+1);return o.push(t.slice(u,s)),o.join(\"\")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;\"p\"in i&&(i.H=i.H%12+12*i.p);var a=null!=i.Z&&fs!==Bt,o=new(a?Bt:fs);return\"j\"in i?o.setFullYear(i.y,0,i.j):\"w\"in i&&(\"W\"in i||\"U\"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,\"W\"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,a,o,s=0,u=e.length,l=n.length;u>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37===r){if(o=e.charAt(s++),a=O[o in ps?e.charAt(s++):o],!a||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){w.lastIndex=0;var i=w.exec(e.slice(n));return i?(t.w=k.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){b.lastIndex=0;var i=b.exec(e.slice(n));return i?(t.w=x.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){E.lastIndex=0;var i=E.exec(e.slice(n));return i?(t.m=S.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){M.lastIndex=0;var i=M.exec(e.slice(n));return i?(t.m=C.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,I.c.toString(),e,i)}function u(t,e,i){return n(t,I.x.toString(),e,i)}function l(t,e,i){return n(t,I.X.toString(),e,i)}function c(t,e,n){var i=y.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,f=t.date,d=t.time,p=t.periods,_=t.days,v=t.shortDays,g=t.months,m=t.shortMonths;e.utc=function(t){function n(t){try{fs=Bt;var e=new fs;return e._=t,i(e)}finally{fs=Date}}var i=e(t);return n.parse=function(t){try{fs=Bt;var e=i.parse(t);return e&&e._}finally{fs=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=fe;var y=oo.map(),b=Yt(_),x=Xt(_),w=Yt(v),k=Xt(v),M=Yt(g),C=Xt(g),E=Yt(m),S=Xt(m);p.forEach(function(t,e){y.set(t.toLowerCase(),e)});var I={a:function(t){return v[t.getDay()]},A:function(t){return _[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return g[t.getMonth()]},c:e(h),d:function(t,e){return Gt(t.getDate(),e,2)},e:function(t,e){return Gt(t.getDate(),e,2)},H:function(t,e){return Gt(t.getHours(),e,2)},I:function(t,e){return Gt(t.getHours()%12||12,e,2)},j:function(t,e){return Gt(1+hs.dayOfYear(t),e,3)},L:function(t,e){return Gt(t.getMilliseconds(),e,3)},m:function(t,e){return Gt(t.getMonth()+1,e,2)},M:function(t,e){return Gt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Gt(t.getSeconds(),e,2)},U:function(t,e){return Gt(hs.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Gt(hs.mondayOfYear(t),e,2)},x:e(f),X:e(d),y:function(t,e){return Gt(t.getFullYear()%100,e,2)},Y:function(t,e){return Gt(t.getFullYear()%1e4,e,4)},Z:ce,\"%\":function(){return\"%\"}},O={a:i,A:r,b:a,B:o,c:s,d:re,e:re,H:oe,I:oe,j:ae,L:le,m:ie,M:se,p:c,S:ue,U:Jt,w:Zt,W:Qt,x:u,X:l,y:te,Y:Kt,Z:ee,\"%\":he};return e}function Gt(t,e,n){var i=0>t?\"-\":\"\",r=(i?-t:t)+\"\",a=r.length;return i+(n>a?new Array(n-a+1).join(e)+r:r)}function Yt(t){return new RegExp(\"^(?:\"+t.map(oo.requote).join(\"|\")+\")\",\"i\")}function Xt(t){for(var e=new p,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Zt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Jt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Qt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Kt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function te(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.y=ne(+i[0]),n+i[0].length):-1}function ee(t,e,n){return/^[+-]\\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function ne(t){return t+(t>68?1900:2e3)}function ie(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function re(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ae(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function oe(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function se(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ue(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function le(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ce(t){var e=t.getTimezoneOffset(),n=e>0?\"-\":\"+\",i=go(e)/60|0,r=go(e)%60;return n+Gt(i,\"0\",2)+Gt(r,\"0\",2)}function he(t,e,n){vs.lastIndex=0;var i=vs.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function fe(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function de(){}function pe(t,e,n){var i=n.s=t+e,r=i-t,a=i-r;n.t=t-a+(e-r)}function _e(t,e){t&&bs.hasOwnProperty(t.type)&&bs[t.type](t,e)}function ve(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ge(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ve(t[n],e,1);e.polygonEnd()}function me(){function t(t,e){t*=Do,e=e*Do/2+No/4;var n=t-i,o=n>=0?1:-1,s=o*n,u=Math.cos(e),l=Math.sin(e),c=a*l,h=r*u+c*Math.cos(s),f=c*o*Math.sin(s);ws.add(Math.atan2(f,h)),i=t,r=u,a=l}var e,n,i,r,a;ks.point=function(o,s){ks.point=t,i=(e=o)*Do,r=Math.cos(s=(n=s)*Do/2+No/4),a=Math.sin(s)},ks.lineEnd=function(){t(e,n)}}function ye(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function be(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function we(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ke(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Me(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ce(t){return[Math.atan2(t[1],t[0]),ot(t[2])]}function Ee(t,e){return go(t[0]-e[0])<jo&&go(t[1]-e[1])<jo}function Se(t,e){t*=Do;var n=Math.cos(e*=Do);Ie(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ie(t,e,n){++Ms,Es+=(t-Es)/Ms,Ss+=(e-Ss)/Ms,Is+=(n-Is)/Ms}function Oe(){function t(t,r){t*=Do;var a=Math.cos(r*=Do),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(r),l=Math.atan2(Math.sqrt((l=n*u-i*s)*l+(l=i*o-e*u)*l+(l=e*s-n*o)*l),e*o+n*s+i*u);Cs+=l,Os+=l*(e+(e=o)),Ts+=l*(n+(n=s)),As+=l*(i+(i=u)),Ie(e,n,i)}var e,n,i;Ns.point=function(r,a){r*=Do;var o=Math.cos(a*=Do);e=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),Ns.point=t,Ie(e,n,i)}}function Te(){Ns.point=Se}function Ae(){function t(t,e){t*=Do;var n=Math.cos(e*=Do),o=n*Math.cos(t),s=n*Math.sin(t),u=Math.sin(e),l=r*u-a*s,c=a*o-i*u,h=i*s-r*o,f=Math.sqrt(l*l+c*c+h*h),d=i*o+r*s+a*u,p=f&&-at(d)/f,_=Math.atan2(f,d);Ps+=p*l,js+=p*c,Rs+=p*h,Cs+=_,Os+=_*(i+(i=o)),Ts+=_*(r+(r=s)),As+=_*(a+(a=u)),Ie(i,r,a)}var e,n,i,r,a;Ns.point=function(o,s){e=o,n=s,Ns.point=t,o*=Do;var u=Math.cos(s*=Do);i=u*Math.cos(o),r=u*Math.sin(o),a=Math.sin(s),Ie(i,r,a)},Ns.lineEnd=function(){t(e,n),Ns.lineEnd=Te,Ns.point=Se}}function Pe(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function je(){return!0}function Re(t,e,n,i,r){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Ee(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var u=new Fe(n,t,null,!0),l=new Fe(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new Fe(i,t,null,!1),l=new Fe(i,null,u,!0),u.o=l,a.push(u),o.push(l)}}),o.sort(e),Ne(a),Ne(o),a.length){for(var s=0,u=n,l=o.length;l>s;++s)o[s].e=u=!u;for(var c,h,f=a[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,l=c.length;l>s;++s)r.point((h=c[s])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);r.lineEnd()}}}function Ne(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Fe(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Le(t,e,n,i){return function(r,a){function o(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&a.point(e,n)}function s(t,e){var n=r(t,e);v.point(n[0],n[1])}function u(){m.point=s,v.lineStart()}function l(){m.point=o,v.lineEnd()}function c(t,e){_.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),_=[]}function f(){c(_[0][0],_[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),i=n.length;if(_.pop(),p.push(_),_=null,i)if(1&e){t=n[0];var r,i=t.length-1,o=-1;if(i>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(ze))}var d,p,_,v=e(a),g=r.invert(i[0],i[1]),m={point:o,lineStart:u,lineEnd:l,polygonStart:function(){m.point=c,m.lineStart=h,m.lineEnd=f,d=[],p=[]},polygonEnd:function(){m.point=o,m.lineStart=u,m.lineEnd=l,d=oo.merge(d);var t=We(g,p);d.length?(x||(a.polygonStart(),x=!0),Re(d,$e,t,n,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),d=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=De(),b=e(y),x=!1;return m}}function ze(t){return t.length>1}function De(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:E,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function $e(t,e){return((t=t.x)[0]<0?t[1]-zo-jo:zo-t[1])-((e=e.x)[0]<0?e[1]-zo-jo:zo-e[1])}function Ue(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?No:-No,u=go(a-n);go(u-No)<jo?(t.point(n,i=(i+o)/2>0?zo:-zo),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(a,i),e=0):r!==s&&u>=No&&(go(n-r)<jo&&(n-=r*jo),go(a-s)<jo&&(a-=s*jo),i=He(n,i,a,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=a,i=o),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function He(t,e,n,i){var r,a,o=Math.sin(t-n);return go(o)>jo?Math.atan((Math.sin(e)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*a*o)):(e+i)/2}function Be(t,e,n,i){var r;if(null==t)r=n*zo,i.point(-No,r),i.point(0,r),i.point(No,r),i.point(No,0),i.point(No,-r),i.point(0,-r),i.point(-No,-r),i.point(-No,0),i.point(-No,r);else if(go(t[0]-e[0])>jo){var a=t[0]<e[0]?No:-No;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function We(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;ws.reset();for(var s=0,u=e.length;u>s;++s){var l=e[s],c=l.length;if(c)for(var h=l[0],f=h[0],d=h[1]/2+No/4,p=Math.sin(d),_=Math.cos(d),v=1;;){v===c&&(v=0),t=l[v];var g=t[0],m=t[1]/2+No/4,y=Math.sin(m),b=Math.cos(m),x=g-f,w=x>=0?1:-1,k=w*x,M=k>No,C=p*y;if(ws.add(Math.atan2(C*w*Math.sin(k),_*b+C*Math.cos(k))),a+=M?x+w*Fo:x,M^f>=n^g>=n){var E=xe(ye(h),ye(t));Me(E);var S=xe(r,E);Me(S);var I=(M^x>=0?-1:1)*ot(S[2]);(i>I||i===I&&(E[0]||E[1]))&&(o+=M^x>=0?1:-1)}if(!v++)break;f=g,p=y,_=b,h=t}}return(-jo>a||jo>a&&0>ws)^1&o}function Ve(t){function e(t,e){return Math.cos(t)*Math.cos(e)>a}function n(t){var n,a,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var d,p=[h,f],_=e(h,f),v=o?_?0:r(h,f):_?r(h+(0>h?No:-No),f):0;if(!n&&(l=u=_)&&t.lineStart(),_!==u&&(d=i(n,p),(Ee(n,d)||Ee(p,d))&&(p[0]+=jo,p[1]+=jo,_=e(p[0],p[1]))),_!==u)c=0,_?(t.lineStart(),d=i(p,n),t.point(d[0],d[1])):(d=i(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&o^_){var g;v&a||!(g=i(p,n,!0))||(c=0,o?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!_||n&&Ee(n,p)||t.point(p[0],p[1]),n=p,u=_,a=v},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function i(t,e,n){var i=ye(t),r=ye(e),o=[1,0,0],s=xe(i,r),u=be(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var h=a*u/c,f=-a*l/c,d=xe(o,s),p=ke(o,h),_=ke(s,f);we(p,_);var v=d,g=be(p,v),m=be(v,v),y=g*g-m*(be(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),x=ke(v,(-g-b)/m);if(we(x,p),x=Ce(x),!n)return x;var w,k=t[0],M=e[0],C=t[1],E=e[1];k>M&&(w=k,k=M,M=w);var S=M-k,I=go(S-No)<jo,O=I||jo>S;if(!I&&C>E&&(w=C,C=E,E=w),O?I?C+E>0^x[1]<(go(x[0]-k)<jo?C:E):C<=x[1]&&x[1]<=E:S>No^(k<=x[0]&&x[0]<=M)){var T=ke(v,(-g+b)/m);return we(T,p),[x,Ce(T)]}}}function r(e,n){var i=o?t:No-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(t),o=a>0,s=go(a)>jo,u=yn(t,6*Do);return Le(e,n,u,o?[0,-t]:[-No,t-No])}function qe(t,e,n,i){return function(r){var a,o=r.a,s=r.b,u=o.x,l=o.y,c=s.x,h=s.y,f=0,d=1,p=c-u,_=h-l;if(a=t-u,p||!(a>0)){if(a/=p,0>p){if(f>a)return;d>a&&(d=a)}else if(p>0){if(a>d)return;a>f&&(f=a)}if(a=n-u,p||!(0>a)){if(a/=p,0>p){if(a>d)return;a>f&&(f=a)}else if(p>0){if(f>a)return;d>a&&(d=a)}if(a=e-l,_||!(a>0)){if(a/=_,0>_){if(f>a)return;d>a&&(d=a)}else if(_>0){if(a>d)return;a>f&&(f=a)}if(a=i-l,_||!(0>a)){if(a/=_,0>_){if(a>d)return;a>f&&(f=a)}else if(_>0){if(f>a)return;d>a&&(d=a)}return f>0&&(r.a={x:u+f*p,y:l+f*_}),1>d&&(r.b={x:u+d*p,y:l+d*_}),r}}}}}}function Ge(t,e,n,i){function r(i,r){return go(i[0]-t)<jo?r>0?0:3:go(i[0]-n)<jo?r>0?2:1:go(i[1]-e)<jo?r>0?1:0:r>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,n=v.length,i=t[1],r=0;n>r;++r)for(var a,o=1,s=v[r],u=s.length,l=s[0];u>o;++o)a=s[o],l[1]<=i?a[1]>i&&rt(l,a,t)>0&&++e:a[1]<=i&&rt(l,a,t)<0&&--e,l=a;return 0!==e}function l(a,s,u,l){var c=0,h=0;if(null==a||(c=r(a,u))!==(h=r(s,u))||o(a,s)<0^u>0){do l.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+u+4)%4)!==h)}else l.point(s[0],s[1])}function c(r,a){return r>=t&&n>=r&&a>=e&&i>=a}function h(t,e){c(t,e)&&s.point(t,e)}function f(){O.point=p,v&&v.push(g=[]),M=!0,k=!1,x=w=NaN}function d(){_&&(p(m,y),b&&k&&S.rejoin(),_.push(S.buffer())),O.point=h,k&&s.lineEnd()}function p(t,e){t=Math.max(-Ls,Math.min(Ls,t)),e=Math.max(-Ls,Math.min(Ls,e));var n=c(t,e);if(v&&g.push([t,e]),M)m=t,y=e,b=n,M=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&k)s.point(t,e);else{var i={a:{x:x,y:w},b:{x:t,y:e}};I(i)?(k||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),C=!1):n&&(s.lineStart(),s.point(t,e),C=!1)}x=t,w=e,k=n}var _,v,g,m,y,b,x,w,k,M,C,E=s,S=De(),I=qe(t,e,n,i),O={point:h,lineStart:f,lineEnd:d,polygonStart:function(){s=S,_=[],v=[],C=!0},polygonEnd:function(){s=E,_=oo.merge(_);var e=u([t,i]),n=C&&e,r=_.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&Re(_,a,e,l,s),s.polygonEnd()),_=v=g=null}};return O}}function Ye(t){var e=0,n=No/3,i=hn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*No/180,n=t[1]*No/180):[e/No*180,n/No*180]},r}function Xe(t,e){function n(t,e){var n=Math.sqrt(a-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,ot((a-(t*t+n*n)*r*r)/(2*r))]},n}function Ze(){function t(t,e){Ds+=r*t-i*e,i=t,r=e}var e,n,i,r;Ws.point=function(a,o){Ws.point=t,e=i=a,n=r=o},Ws.lineEnd=function(){t(e,n)}}function Je(t,e){$s>t&&($s=t),t>Hs&&(Hs=t),Us>e&&(Us=e),e>Bs&&(Bs=e)}function Qe(){function t(t,e){o.push(\"M\",t,\",\",e,a)}function e(t,e){o.push(\"M\",t,\",\",e),s.point=n}function n(t,e){o.push(\"L\",t,\",\",e)}function i(){s.point=t}function r(){o.push(\"Z\")}var a=Ke(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=Ke(t),s},result:function(){if(o.length){var t=o.join(\"\");return o=[],t}}};return s}function Ke(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}function tn(t,e){Es+=t,Ss+=e,++Is}function en(){function t(t,i){var r=t-e,a=i-n,o=Math.sqrt(r*r+a*a);Os+=o*(e+t)/2,Ts+=o*(n+i)/2,As+=o,tn(e=t,n=i)}var e,n;qs.point=function(i,r){qs.point=t,tn(e=i,n=r)}}function nn(){qs.point=tn}function rn(){function t(t,e){var n=t-i,a=e-r,o=Math.sqrt(n*n+a*a);Os+=o*(i+t)/2,Ts+=o*(r+e)/2,As+=o,o=r*t-i*e,Ps+=o*(i+t),js+=o*(r+e),Rs+=3*o,tn(i=t,r=e)}var e,n,i,r;qs.point=function(a,o){qs.point=t,tn(e=i=a,n=r=o)},qs.lineEnd=function(){t(e,n)}}function an(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Fo)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return o=t,s},result:E};return s}function on(t){function e(t){return(s?i:n)(t)}function n(e){return ln(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){y=NaN,M.point=a,e.lineStart()}function a(n,i){var a=ye([n,i]),o=t(n,i);r(y,b,m,x,w,k,y=o[0],b=o[1],m=n,x=a[0],w=a[1],k=a[2],s,e),e.point(y,b)}function o(){M.point=n,e.lineEnd()}function u(){i(),M.point=l,M.lineEnd=c}function l(t,e){a(h=t,f=e),d=y,p=b,_=x,v=w,g=k,M.point=a}function c(){r(y,b,m,x,w,k,d,p,h,_,v,g,s,e),M.lineEnd=o,o()}var h,f,d,p,_,v,g,m,y,b,x,w,k,M={point:n,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),M.lineStart=u},polygonEnd:function(){e.polygonEnd(),M.lineStart=i}};return M}function r(e,n,i,s,u,l,c,h,f,d,p,_,v,g){var m=c-e,y=h-n,b=m*m+y*y;if(b>4*a&&v--){var x=s+d,w=u+p,k=l+_,M=Math.sqrt(x*x+w*w+k*k),C=Math.asin(k/=M),E=go(go(k)-1)<jo||go(i-f)<jo?(i+f)/2:Math.atan2(w,x),S=t(E,C),I=S[0],O=S[1],T=I-e,A=O-n,P=y*T-m*A;(P*P/b>a||go((m*T+y*A)/b-.5)>.3||o>s*d+u*p+l*_)&&(r(e,n,i,s,u,l,I,O,E,x/=M,w/=M,k,v,g),g.point(I,O),r(I,O,E,x,w,k,c,h,f,d,p,_,v,g))}}var a=.5,o=Math.cos(30*Do),s=16;return e.precision=function(t){return arguments.length?(s=(a=t*t)>0&&16,e):Math.sqrt(a)},e}function sn(t){var e=on(function(e,n){return t([e*$o,n*$o])});return function(t){return fn(e(t))}}function un(t){this.stream=t}function ln(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function cn(t){return hn(function(){return t})()}function hn(t){function e(t){return t=s(t[0]*Do,t[1]*Do),[t[0]*f+u,l-t[1]*f]}function n(t){return t=s.invert((t[0]-u)/f,(l-t[1])/f),t&&[t[0]*$o,t[1]*$o]}function i(){s=Pe(o=_n(g,m,y),a);var t=a(_,v);return u=d-t[0]*f,l=p+t[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),e}var a,o,s,u,l,c,h=on(function(t,e){return t=a(t,e),[t[0]*f+u,l-t[1]*f]}),f=150,d=480,p=250,_=0,v=0,g=0,m=0,y=0,b=Fs,x=k,w=null,M=null;return e.stream=function(t){return c&&(c.valid=!1),c=fn(b(o,h(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(w=t,Fs):Ve((w=+t)*Do),r()):w},e.clipExtent=function(t){return arguments.length?(M=t,x=t?Ge(t[0][0],t[0][1],t[1][0],t[1][1]):k,r()):M},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],i()):[d,p]},e.center=function(t){return arguments.length?(_=t[0]%360*Do,v=t[1]%360*Do,i()):[_*$o,v*$o]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Do,m=t[1]%360*Do,y=t.length>2?t[2]%360*Do:0,i()):[g*$o,m*$o,y*$o]},oo.rebind(e,h,\"precision\"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function fn(t){return ln(t,function(e,n){t.point(e*Do,n*Do)})}function dn(t,e){return[t,e]}function pn(t,e){return[t>No?t-Fo:-No>t?t+Fo:t,e]}function _n(t,e,n){return t?e||n?Pe(gn(t),mn(e,n)):gn(t):e||n?mn(e,n):pn}function vn(t){return function(e,n){return e+=t,[e>No?e-Fo:-No>e?e+Fo:e,n]}}function gn(t){var e=vn(t);return e.invert=vn(-t),e}function mn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*i+s*r;return[Math.atan2(u*a-c*o,s*i-l*r),ot(c*a+u*o)]}var i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*a-u*o;return[Math.atan2(u*a+l*o,s*i+c*r),ot(c*i-s*r)]},n}function yn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,a,o,s){var u=o*e;null!=r?(r=bn(n,r),a=bn(n,a),(o>0?a>r:r>a)&&(r+=o*Fo)):(r=t+o*Fo,a=t-.5*u);for(var l,c=r;o>0?c>a:a>c;c-=u)s.point((l=Ce([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],l[1])}}function bn(t,e){var n=ye(e);n[0]-=t,Me(n);var i=at(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-jo)%(2*Math.PI)}function xn(t,e,n){var i=oo.range(t,e-jo,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function wn(t,e,n){var i=oo.range(t,e-jo,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function kn(t){return t.source}function Mn(t){return t.target}function Cn(t,e,n,i){var r=Math.cos(e),a=Math.sin(e),o=Math.cos(i),s=Math.sin(i),u=r*Math.cos(t),l=r*Math.sin(t),c=o*Math.cos(n),h=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ct(i-e)+r*o*ct(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*u+e*c,r=n*l+e*h,o=n*a+e*s;return[Math.atan2(r,i)*$o,Math.atan2(o,Math.sqrt(i*i+r*r))*$o]}:function(){return[t*$o,e*$o]};return p.distance=f,p}function En(){function t(t,r){var a=Math.sin(r*=Do),o=Math.cos(r),s=go((t*=Do)-e),u=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*u)*s),n*a+i*o*u),e=t,n=a,i=o}var e,n,i;Ys.point=function(r,a){e=r*Do,n=Math.sin(a*=Do),i=Math.cos(a),Ys.point=t},Ys.lineEnd=function(){Ys.point=Ys.lineEnd=E}}function Sn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),a=t(i*r);return[a*r*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*a,i*o),Math.asin(i&&n*a/i)]},n}function In(t,e){function n(t,e){o>0?-zo+jo>e&&(e=-zo+jo):e>zo-jo&&(e=zo-jo);var n=o/Math.pow(r(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var i=Math.cos(t),r=function(t){return Math.tan(No/4+t/2)},a=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),o=i*Math.pow(r(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,i=it(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/i,1/a))-zo]},n):Tn}function On(t,e){function n(t,e){var n=a-e;return[n*Math.sin(r*t),a-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return go(r)<jo?dn:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,a-it(r)*Math.sqrt(t*t+n*n)]},n)}function Tn(t,e){return[t,Math.log(Math.tan(No/4+e/2))]}function An(t){var e,n=cn(t),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=No*i(),u=r();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function Pn(t,e){return[Math.log(Math.tan(No/4+e/2)),-t]}function jn(t){return t[0]}function Rn(t){return t[1]}function Nn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&rt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Fn(t,e){return t[0]-e[0]||t[1]-e[1]}function Ln(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,u=t[1],l=n[1],c=e[1]-u,h=i[1]-l,f=(s*(u-l)-h*(r-a))/(h*o-s*c);return[r+f*o,u+f*c]}function Dn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function $n(){si(this),this.edge=this.site=this.circle=null}function Un(t){var e=ou.pop()||new $n;return e.site=t,e}function Hn(t){Qn(t),iu.remove(t),ou.push(t),si(t)}function Bn(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},a=t.P,o=t.N,s=[t];Hn(t);for(var u=a;u.circle&&go(n-u.circle.x)<jo&&go(i-u.circle.cy)<jo;)a=u.P,s.unshift(u),Hn(u),u=a;s.unshift(u),Qn(u);for(var l=o;l.circle&&go(n-l.circle.x)<jo&&go(i-l.circle.cy)<jo;)o=l.N,s.push(l),Hn(l),l=o;s.push(l),Qn(l);var c,h=s.length;for(c=1;h>c;++c)l=s[c],u=s[c-1],ri(l.edge,u.site,l.site,r);u=s[0],l=s[h-1],l.edge=ni(u.site,l.site,null,r),Jn(u),Jn(l)}function Wn(t){for(var e,n,i,r,a=t.x,o=t.y,s=iu._;s;)if(i=Vn(s,o)-a,i>jo)s=s.L;else{if(r=a-qn(s,o),!(r>jo)){i>-jo?(e=s.P,n=s):r>-jo?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=Un(t);if(iu.insert(e,u),e||n){if(e===n)return Qn(e),n=Un(e.site),iu.insert(u,n),u.edge=n.edge=ni(e.site,u.site),Jn(e),void Jn(n);if(!n)return void(u.edge=ni(e.site,u.site));Qn(e),Qn(n);var l=e.site,c=l.x,h=l.y,f=t.x-c,d=t.y-h,p=n.site,_=p.x-c,v=p.y-h,g=2*(f*v-d*_),m=f*f+d*d,y=_*_+v*v,b={x:(v*m-d*y)/g+c,y:(f*y-_*m)/g+h};ri(n.edge,l,p,b),u.edge=ni(l,t,null,b),n.edge=ni(t,p,null,b),Jn(e),Jn(n)}}function Vn(t,e){var n=t.site,i=n.x,r=n.y,a=r-e;if(!a)return i;var o=t.P;if(!o)return-1/0;n=o.site;var s=n.x,u=n.y,l=u-e;if(!l)return s;\nvar c=s-i,h=1/a-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-a/2)))/h+i:(i+s)/2}function qn(t,e){var n=t.N;if(n)return Vn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Gn(t){this.site=t,this.edges=[]}function Yn(t){for(var e,n,i,r,a,o,s,u,l,c,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],_=nu,v=_.length;v--;)if(a=_[v],a&&a.prepare())for(s=a.edges,u=s.length,o=0;u>o;)c=s[o].end(),i=c.x,r=c.y,l=s[++o%u].start(),e=l.x,n=l.y,(go(i-e)>jo||go(r-n)>jo)&&(s.splice(o,0,new ai(ii(a.site,c,go(i-h)<jo&&p-r>jo?{x:h,y:go(e-h)<jo?n:p}:go(r-p)<jo&&f-i>jo?{x:go(n-p)<jo?e:f,y:p}:go(i-f)<jo&&r-d>jo?{x:f,y:go(e-f)<jo?n:d}:go(r-d)<jo&&i-h>jo?{x:go(n-d)<jo?e:h,y:d}:null),a.site,null)),++u)}function Xn(t,e){return e.angle-t.angle}function Zn(){si(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,a=n.site;if(i!==a){var o=r.x,s=r.y,u=i.x-o,l=i.y-s,c=a.x-o,h=a.y-s,f=2*(u*h-l*c);if(!(f>=-Ro)){var d=u*u+l*l,p=c*c+h*h,_=(h*d-l*p)/f,v=(u*p-c*d)/f,h=v+s,g=su.pop()||new Zn;g.arc=t,g.site=r,g.x=_+o,g.y=h+Math.sqrt(_*_+v*v),g.cy=h,t.circle=g;for(var m=null,y=au._;y;)if(g.y<y.y||g.y===y.y&&g.x<=y.x){if(!y.L){m=y.P;break}y=y.L}else{if(!y.R){m=y;break}y=y.R}au.insert(m,g),m||(ru=g)}}}}function Qn(t){var e=t.circle;e&&(e.P||(ru=e.N),au.remove(e),su.push(e),si(e),t.circle=null)}function Kn(t){for(var e,n=eu,i=qe(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!ti(e,t)||!i(e)||go(e.a.x-e.b.x)<jo&&go(e.a.y-e.b.y)<jo)&&(e.a=e.b=null,n.splice(r,1))}function ti(t,e){var n=t.b;if(n)return!0;var i,r,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,p=h.x,_=h.y,v=(f+p)/2,g=(d+_)/2;if(_===d){if(o>v||v>=s)return;if(f>p){if(a){if(a.y>=l)return}else a={x:v,y:u};n={x:v,y:l}}else{if(a){if(a.y<u)return}else a={x:v,y:l};n={x:v,y:u}}}else if(i=(f-p)/(_-d),r=g-i*v,-1>i||i>1)if(f>p){if(a){if(a.y>=l)return}else a={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else if(_>d){if(a){if(a.x>=s)return}else a={x:o,y:i*o+r};n={x:s,y:i*s+r}}else{if(a){if(a.x<o)return}else a={x:s,y:i*s+r};n={x:o,y:i*o+r}}return t.a=a,t.b=n,!0}function ei(t,e){this.l=t,this.r=e,this.a=this.b=null}function ni(t,e,n,i){var r=new ei(t,e);return eu.push(r),n&&ri(r,t,e,n),i&&ri(r,e,t,i),nu[t.i].edges.push(new ai(r,t,e)),nu[e.i].edges.push(new ai(r,e,t)),r}function ii(t,e,n){var i=new ei(t,null);return i.a=e,i.b=n,eu.push(i),i}function ri(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ai(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function oi(){this._=null}function si(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ui(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function li(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ci(t){for(;t.L;)t=t.L;return t}function hi(t,e){var n,i,r,a=t.sort(fi).pop();for(eu=[],nu=new Array(t.length),iu=new oi,au=new oi;;)if(r=ru,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))(a.x!==n||a.y!==i)&&(nu[a.i]=new Gn(a),Wn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;Bn(r.arc)}e&&(Kn(e),Yn(e));var o={cells:nu,edges:eu};return iu=au=eu=nu=null,o}function fi(t,e){return e.y-t.y||e.x-t.x}function di(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function pi(t){return t.x}function _i(t){return t.y}function vi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gi(t,e,n,i,r,a){if(!t(e,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),u=e.nodes;u[0]&&gi(t,u[0],n,i,o,s),u[1]&&gi(t,u[1],o,i,r,s),u[2]&&gi(t,u[2],n,s,o,a),u[3]&&gi(t,u[3],o,s,r,a)}}function mi(t,e,n,i,r,a,o){var s,u=1/0;return function t(l,c,h,f,d){if(!(c>a||h>o||i>f||r>d)){if(p=l.point){var p,_=e-l.x,v=n-l.y,g=_*_+v*v;if(u>g){var m=Math.sqrt(u=g);i=e-m,r=n-m,a=e+m,o=n+m,s=p}}for(var y=l.nodes,b=.5*(c+f),x=.5*(h+d),w=e>=b,k=n>=x,M=k<<1|w,C=M+4;C>M;++M)if(l=y[3&M])switch(3&M){case 0:t(l,c,h,b,x);break;case 1:t(l,b,h,f,x);break;case 2:t(l,c,x,b,d);break;case 3:t(l,b,x,f,d)}}}(t,i,r,a,o),s}function yi(t,e){t=oo.rgb(t),e=oo.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return\"#\"+Ct(Math.round(n+a*t))+Ct(Math.round(i+o*t))+Ct(Math.round(r+s*t))}}function bi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=ki(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function xi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wi(t,e){var n,i,r,a=lu.lastIndex=cu.lastIndex=0,o=-1,s=[],u=[];for(t+=\"\",e+=\"\";(n=lu.exec(t))&&(i=cu.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:xi(n,i)})),a=cu.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+\"\"}):function(){return e}:(e=u.length,function(t){for(var n,i=0;e>i;++i)s[(n=u[i]).i]=n.x(t);return s.join(\"\")})}function ki(t,e){for(var n,i=oo.interpolators.length;--i>=0&&!(n=oo.interpolators[i](t,e)););return n}function Mi(t,e){var n,i=[],r=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(ki(t[n],e[n]));for(;a>n;++n)r[n]=t[n];for(;o>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function Ci(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Ei(t){return function(e){return 1-t(1-e)}}function Si(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ii(t){return t*t}function Oi(t){return t*t*t}function Ti(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Ai(t){return function(e){return Math.pow(e,t)}}function Pi(t){return 1-Math.cos(t*zo)}function ji(t){return Math.pow(2,10*(t-1))}function Ri(t){return 1-Math.sqrt(1-t*t)}function Ni(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Fo*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Fo/e)}}function Fi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Li(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zi(t,e){t=oo.hcl(t),e=oo.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return _t(n+a*t,i+o*t,r+s*t)+\"\"}}function Di(t,e){t=oo.hsl(t),e=oo.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:-180>a&&(a+=360),function(t){return dt(n+a*t,i+o*t,r+s*t)+\"\"}}function $i(t,e){t=oo.lab(t),e=oo.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return gt(n+a*t,i+o*t,r+s*t)+\"\"}}function Ui(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Hi(t){var e=[t.a,t.b],n=[t.c,t.d],i=Wi(e),r=Bi(e,n),a=Wi(Vi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*$o,this.translate=[t.e,t.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*$o:0}function Bi(t,e){return t[0]*e[0]+t[1]*e[1]}function Wi(t){var e=Math.sqrt(Bi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function qi(t,e){var n,i=[],r=[],a=oo.transform(t),o=oo.transform(e),s=a.translate,u=o.translate,l=a.rotate,c=o.rotate,h=a.skew,f=o.skew,d=a.scale,p=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(i.push(\"translate(\",null,\",\",null,\")\"),r.push({i:1,x:xi(s[0],u[0])},{i:3,x:xi(s[1],u[1])})):i.push(u[0]||u[1]?\"translate(\"+u+\")\":\"\"),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),r.push({i:i.push(i.pop()+\"rotate(\",null,\")\")-2,x:xi(l,c)})):c&&i.push(i.pop()+\"rotate(\"+c+\")\"),h!=f?r.push({i:i.push(i.pop()+\"skewX(\",null,\")\")-2,x:xi(h,f)}):f&&i.push(i.pop()+\"skewX(\"+f+\")\"),d[0]!=p[0]||d[1]!=p[1]?(n=i.push(i.pop()+\"scale(\",null,\",\",null,\")\"),r.push({i:n-4,x:xi(d[0],p[0])},{i:n-2,x:xi(d[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+\"scale(\"+p+\")\"),n=r.length,function(t){for(var e,a=-1;++a<n;)i[(e=r[a]).i]=e.x(t);return i.join(\"\")}}function Gi(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Yi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Xi(t){for(var e=t.source,n=t.target,i=Ji(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Zi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var n=Zi(t),i=Zi(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Qi(t){t.fixed|=2}function Ki(t){t.fixed&=-7}function tr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function er(t){t.fixed&=-5}function nr(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,u=-1;++u<s;)a=o[u],null!=a&&(nr(a,e,n),t.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,i+=l*t.point.x,r+=l*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function ir(t,e){return oo.rebind(t,e,\"sort\",\"children\",\"value\"),t.nodes=t,t.links=lr,t}function rr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function ar(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function or(t){return t.children}function sr(t){return t.value}function ur(t,e){return e.value-t.value}function lr(t){return oo.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function cr(t){return t.x}function hr(t){return t.y}function fr(t,e,n){t.y0=e,t.y=n}function dr(t){return oo.range(t.length)}function pr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function _r(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;a>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function vr(t){return t.reduce(gr,0)}function gr(t,e){return t+e[1]}function mr(t,e){return yr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function yr(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function br(t){return[oo.min(t),oo.max(t)]}function xr(t,e){return t.value-e.value}function wr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function kr(t,e){t._pack_next=e,e._pack_prev=t}function Mr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function Cr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(l=n.length)){var n,i,r,a,o,s,u,l,c=1/0,h=-1/0,f=1/0,d=-1/0;if(n.forEach(Er),i=n[0],i.x=-i.r,i.y=0,e(i),l>1&&(r=n[1],r.x=r.r,r.y=0,e(r),l>2))for(a=n[2],Or(i,r,a),e(a),wr(i,a),i._pack_prev=a,wr(a,r),r=i._pack_next,o=3;l>o;o++){Or(i,r,a=n[o]);var p=0,_=1,v=1;for(s=r._pack_next;s!==r;s=s._pack_next,_++)if(Mr(s,a)){p=1;break}if(1==p)for(u=i._pack_prev;u!==s._pack_prev&&!Mr(u,a);u=u._pack_prev,v++);p?(v>_||_==v&&r.r<i.r?kr(i,r=s):kr(i=u,r),o--):(wr(i,a),r=a,e(a))}var g=(c+h)/2,m=(f+d)/2,y=0;for(o=0;l>o;o++)a=n[o],a.x-=g,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,n.forEach(Sr)}}function Er(t){t._pack_next=t._pack_prev=t}function Sr(t){delete t._pack_next,delete t._pack_prev}function Ir(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var a=-1,o=r.length;++a<o;)Ir(r[a],e,n,i)}function Or(t,e,n){var i=t.r+n.r,r=e.x-t.x,a=e.y-t.y;if(i&&(r||a)){var o=e.r+n.r,s=r*r+a*a;o*=o,i*=i;var u=.5+(i-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=t.x+u*r+l*a,n.y=t.y+u*a-l*r}else n.x=t.x+i,n.y=t.y}function Tr(t,e){return t.parent==e.parent?1:2}function Ar(t){var e=t.children;return e.length?e[0]:t.t}function Pr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function jr(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Rr(t){for(var e,n=0,i=0,r=t.children,a=r.length;--a>=0;)e=r[a],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Nr(t,e,n){return t.a.parent===e.parent?t.a:n}function Fr(t){return 1+oo.max(t,function(t){return t.y})}function Lr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function zr(t){var e=t.children;return e&&e.length?zr(e[0]):t}function Dr(t){var e,n=t.children;return n&&(e=n.length)?Dr(n[e-1]):t}function $r(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ur(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Hr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Br(t){return t.rangeExtent?t.rangeExtent():Hr(t.range())}function Wr(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Vr(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function qr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:xu}function Gr(t,e,n,i){var r=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)r.push(n(t[o-1],t[o])),a.push(i(e[o-1],e[o]));return function(e){var n=oo.bisect(t,e,1,s)-1;return a[n](r[n](e))}}function Yr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Gr:Wr,u=i?Yi:Gi;return o=r(t,e,u,n),s=r(e,t,u,ki),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},a.range=function(t){return arguments.length?(e=t,r()):e},a.rangeRound=function(t){return a.range(t).interpolate(Ui)},a.clamp=function(t){return arguments.length?(i=t,r()):i},a.interpolate=function(t){return arguments.length?(n=t,r()):n},a.ticks=function(e){return Qr(t,e)},a.tickFormat=function(e,n){return Kr(t,e,n)},a.nice=function(e){return Zr(t,e),r()},a.copy=function(){return Yr(t,e,n,i)},r()}function Xr(t,e){return oo.rebind(t,e,\"range\",\"rangeRound\",\"interpolate\",\"clamp\")}function Zr(t,e){return Vr(t,qr(Jr(t,e)[2]))}function Jr(t,e){null==e&&(e=10);var n=Hr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),a=e/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Qr(t,e){return oo.range.apply(oo,Jr(t,e))}function Kr(t,e,n){var i=Jr(t,e);if(n){var r=ls.exec(n);if(r.shift(),\"s\"===r[8]){var a=oo.formatPrefix(Math.max(go(i[0]),go(i[1])));return r[7]||(r[7]=\".\"+ta(a.scale(i[2]))),r[8]=\"f\",n=oo.format(r.join(\"\")),function(t){return n(a.scale(t))+a.symbol}}r[7]||(r[7]=\".\"+ea(r[8],i)),n=r.join(\"\")}else n=\",.\"+ta(i[2])+\"f\";return oo.format(n)}function ta(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ea(t,e){var n=ta(e[2]);return t in wu?Math.abs(n-ta(Math.max(go(e[0]),go(e[1]))))+ +(\"e\"!==t):n-2*(\"%\"===t)}function na(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(r(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),o):i},o.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),o):e},o.nice=function(){var e=Vr(i.map(r),n?Math:Mu);return t.domain(e),i=e.map(a),o},o.ticks=function(){var t=Hr(i),o=[],s=t[0],u=t[1],l=Math.floor(r(s)),c=Math.ceil(r(u)),h=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var f=1;h>f;f++)o.push(a(l)*f);o.push(a(l))}else for(o.push(a(l));l++<c;)for(var f=h-1;f>0;f--)o.push(a(l)*f);for(l=0;o[l]<s;l++);for(c=o.length;o[c-1]>u;c--);o=o.slice(l,c)}return o},o.tickFormat=function(t,e){if(!arguments.length)return ku;arguments.length<2?e=ku:\"function\"!=typeof e&&(e=oo.format(e));var i,s=Math.max(.1,t/o.ticks().length),u=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/a(u(r(t)+i))<=s?e(t):\"\"}},o.copy=function(){return na(t.copy(),e,n,i)},Xr(o,t)}function ia(t,e,n){function i(e){return t(r(e))}var r=ra(e),a=ra(1/e);return i.invert=function(e){return a(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Qr(n,t)},i.tickFormat=function(t,e){return Kr(n,t,e)},i.nice=function(t){return i.domain(Zr(n,t))},i.exponent=function(o){return arguments.length?(r=ra(e=o),a=ra(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return ia(t.copy(),e,n)},Xr(i,t)}function ra(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function aa(t,e){function n(n){return a[((r.get(n)||(\"range\"===e.t?r.set(n,t.push(n)):NaN))-1)%a.length]}function i(e,n){return oo.range(t.length).map(function(t){return e+n*t})}var r,a,o;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new p;for(var a,o=-1,s=i.length;++o<s;)r.has(a=i[o])||r.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:\"range\",a:arguments},n):a},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var u=r[0],l=r[1],c=t.length<2?(u=(u+l)/2,0):(l-u)/(t.length-1+s);return a=i(u+c*s/2,c),o=0,e={t:\"rangePoints\",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var u=r[0],l=r[1],c=t.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(t.length-1+s)|0;return a=i(u+Math.round(c*s/2+(l-u-(t.length-1+s)*c)/2),c),o=0,e={t:\"rangeRoundPoints\",a:arguments},n},n.rangeBands=function(r,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=(h-c)/(t.length-s+2*u);return a=i(c+f*u,f),l&&a.reverse(),o=f*(1-s),e={t:\"rangeBands\",a:arguments},n},n.rangeRoundBands=function(r,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=Math.floor((h-c)/(t.length-s+2*u));return a=i(c+Math.round((h-c-(t.length-s)*f)/2),f),l&&a.reverse(),o=Math.round(f*(1-s)),e={t:\"rangeRoundBands\",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Hr(e.a[0])},n.copy=function(){return aa(t,e)},n.domain(t)}function oa(t,e){function n(){var n=0,a=e.length;for(r=[];++n<a;)r[n-1]=oo.quantile(t,n/a);return i}function i(t){return isNaN(t=+t)?void 0:e[oo.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.map(u).filter(l).sort(s),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},i.copy=function(){return oa(t,e)},n()}function sa(t,e,n){function i(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function r(){return a=n.length/(e-t),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/a+t,[e,e+1/a]},i.copy=function(){return sa(t,e,n)},r()}function ua(t,e){function n(n){return n>=n?e[oo.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ua(t,e)},n}function la(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Qr(t,e)},e.tickFormat=function(e,n){return Kr(t,e,n)},e.copy=function(){return la(t)},e}function ca(){return 0}function ha(t){return t.innerRadius}function fa(t){return t.outerRadius}function da(t){return t.startAngle}function pa(t){return t.endAngle}function _a(t){return t&&t.padAngle}function va(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function ga(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],s=(r?i:-i)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=t[0]+u,h=t[1]+l,f=e[0]+u,d=e[1]+l,p=(c+f)/2,_=(h+d)/2,v=f-c,g=d-h,m=v*v+g*g,y=n-i,b=c*d-f*h,x=(0>g?-1:1)*Math.sqrt(y*y*m-b*b),w=(b*g-v*x)/m,k=(-b*v-g*x)/m,M=(b*g+v*x)/m,C=(-b*v+g*x)/m,E=w-p,S=k-_,I=M-p,O=C-_;return E*E+S*S>I*I+O*O&&(w=M,k=C),[[w-u,k-l],[w*n/y,k*n/y]]}function ma(t){function e(e){function o(){l.push(\"M\",a(t(c),s))}for(var u,l=[],c=[],h=-1,f=e.length,d=At(n),p=At(i);++h<f;)r.call(this,u=e[h],h)?c.push([+d.call(this,u,h),+p.call(this,u,h)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(\"\"):null}var n=jn,i=Rn,r=je,a=ya,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(o=\"function\"==typeof t?a=t:(a=Tu.get(t)||ya).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function ya(t){return t.join(\"L\")}function ba(t){return ya(t)+\"Z\"}function xa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"H\",(i[0]+(i=t[e])[0])/2,\"V\",i[1]);return n>1&&r.push(\"H\",i[0]),r.join(\"\")}function wa(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"V\",(i=t[e])[1],\"H\",i[0]);return r.join(\"\")}function ka(t){for(var e=0,n=t.length,i=t[0],r=[i[0],\",\",i[1]];++e<n;)r.push(\"H\",(i=t[e])[0],\"V\",i[1]);return r.join(\"\")}function Ma(t,e){return t.length<4?ya(t):t[1]+Sa(t.slice(1,-1),Ia(t,e))}function Ca(t,e){return t.length<3?ya(t):t[0]+Sa((t.push(t[0]),t),Ia([t[t.length-2]].concat(t,[t[1]]),e))}function Ea(t,e){return t.length<3?ya(t):t[0]+Sa(t,Ia(t,e))}function Sa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return ya(t);var n=t.length!=e.length,i=\"\",r=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(i+=\"Q\"+(a[0]-2*o[0]/3)+\",\"+(a[1]-2*o[1]/3)+\",\"+a[0]+\",\"+a[1],r=t[1],u=2),e.length>1){s=e[1],a=t[u],u++,i+=\"C\"+(r[0]+o[0])+\",\"+(r[1]+o[1])+\",\"+(a[0]-s[0])+\",\"+(a[1]-s[1])+\",\"+a[0]+\",\"+a[1];for(var l=2;l<e.length;l++,u++)a=t[u],s=e[l],i+=\"S\"+(a[0]-s[0])+\",\"+(a[1]-s[1])+\",\"+a[0]+\",\"+a[1]}if(n){var c=t[u];i+=\"Q\"+(a[0]+2*s[0]/3)+\",\"+(a[1]+2*s[1]/3)+\",\"+c[0]+\",\"+c[1]}return i}function Ia(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Oa(t){if(t.length<3)return ya(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],u=[r,\",\",a,\"L\",ja(ju,o),\",\",ja(ju,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Ra(u,o,s);return t.pop(),u.push(\"L\",i),u.join(\"\")}function Ta(t){if(t.length<4)return ya(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(ja(ju,a)+\",\"+ja(ju,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ra(n,a,o);return n.join(\"\")}function Aa(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[ja(ju,o),\",\",ja(ju,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ra(e,o,s);return e.join(\"\")}function Pa(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,l=-1;++l<=n;)i=t[l],r=l/n,i[0]=e*i[0]+(1-e)*(a+r*s),i[1]=e*i[1]+(1-e)*(o+r*u);return Oa(t)}function ja(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ra(t,e,n){t.push(\"C\",ja(Au,e),\",\",ja(Au,n),\",\",ja(Pu,e),\",\",ja(Pu,n),\",\",ja(ju,e),\",\",ja(ju,n))}function Na(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Fa(t){for(var e=0,n=t.length-1,i=[],r=t[0],a=t[1],o=i[0]=Na(r,a);++e<n;)i[e]=(o+(o=Na(r=a,a=t[e+1])))/2;return i[e]=o,i}function La(t){for(var e,n,i,r,a=[],o=Fa(t),s=-1,u=t.length-1;++s<u;)e=Na(t[s],t[s+1]),go(e)<jo?o[s]=o[s+1]=0:(n=o[s]/e,i=o[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;++s<=u;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function za(t){return t.length<3?ya(t):t[0]+Sa(t,La(t))}function Da(t){for(var e,n,i,r=-1,a=t.length;++r<a;)e=t[r],n=e[0],i=e[1]-zo,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function $a(t){function e(e){function u(){_.push(\"M\",s(t(g),h),c,l(t(v.reverse()),h),\"Z\")}for(var f,d,p,_=[],v=[],g=[],m=-1,y=e.length,b=At(n),x=At(r),w=n===i?function(){return d}:At(i),k=r===a?function(){return p}:At(a);++m<y;)o.call(this,f=e[m],m)?(v.push([d=+b.call(this,f,m),p=+x.call(this,f,m)]),g.push([+w.call(this,f,m),+k.call(this,f,m)])):v.length&&(u(),v=[],g=[]);return v.length&&u(),_.length?_.join(\"\"):null}var n=jn,i=jn,r=0,a=Rn,o=je,s=ya,u=s.key,l=s,c=\"L\",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=a=t,e):a},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(u=\"function\"==typeof t?s=t:(s=Tu.get(t)||ya).key,l=s.reverse||s,c=s.closed?\"M\":\"L\",e):u},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Ua(t){return t.radius}function Ha(t){return[t.x,t.y]}function Ba(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-zo;return[n*Math.cos(i),n*Math.sin(i)]}}function Wa(){return 64}function Va(){return\"circle\"}function qa(t){var e=Math.sqrt(t/No);return\"M0,\"+e+\"A\"+e+\",\"+e+\" 0 1,1 0,\"+-e+\"A\"+e+\",\"+e+\" 0 1,1 0,\"+e+\"Z\"}function Ga(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ya(t,e,n){return wo(t,$u),t.namespace=e,t.id=n,t}function Xa(t,e,n,i){var r=t.id,a=t.namespace;return Y(t,\"function\"==typeof n?function(t,o,s){t[a][r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t[a][r].tween.set(e,n)}))}function Za(t){return null==t&&(t=\"\"),function(){this.textContent=t}}function Ja(t){return null==t?\"__transition__\":\"__transition_\"+t+\"__\"}function Qa(t,e,n,i,r){var a=t[n]||(t[n]={active:0,count:0}),o=a[i];if(!o){var s=r.time;o=a[i]={tween:new p,time:s,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++a.count,oo.timer(function(r){function u(n){if(a.active>i)return c();var r=a[a.active];r&&(--a.count,delete a[a.active],r.event&&r.event.interrupt.call(t,t.__data__,r.index)),a.active=i,o.event&&o.event.start.call(t,t.__data__,e),o.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&_.push(i)}),f=o.ease,h=o.duration,oo.timer(function(){return p.c=l(n||1)?je:l,1},0,s)}function l(n){if(a.active!==i)return 1;for(var r=n/h,s=f(r),u=_.length;u>0;)_[--u].call(t,s);return r>=1?(o.event&&o.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--a.count?delete a[i]:delete t[n],1}var h,f,d=o.delay,p=os,_=[];return p.t=d+s,r>=d?u(r-d):void(p.c=u)},0,s)}}function Ka(t,e,n){t.attr(\"transform\",function(t){var i=e(t);return\"translate(\"+(isFinite(i)?i:n(t))+\",0)\"})}function to(t,e,n){t.attr(\"transform\",function(t){var i=e(t);return\"translate(0,\"+(isFinite(i)?i:n(t))+\")\"})}function eo(t){return t.toISOString()}function no(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,a=oo.bisect(Xu,r);return a==Xu.length?[e.year,Jr(t.map(function(t){return t/31536e6}),n)[2]]:a?e[r/Xu[a-1]<Xu[a]/r?a-1:a]:[Qu,Jr(t,n)[2]]}return i.invert=function(e){return io(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(io)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,io(+n+1),e).length}var a=i.domain(),o=Hr(a),s=null==t?r(o,10):\"number\"==typeof t&&r(o,t);return s&&(t=s[0],e=s[1]),i.domain(Vr(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=io(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=io(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Hr(i.domain()),a=null==t?r(n,10):\"number\"==typeof t?r(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],io(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return no(t.copy(),e,n)},Xr(i,t)}function io(t){return new Date(t)}function ro(t){return JSON.parse(t.responseText)}function ao(t){var e=lo.createRange();return e.selectNode(lo.body),e.createContextualFragment(t.responseText)}var oo={version:\"3.5.5\"},so=[].slice,uo=function(t){return so.call(t)},lo=this.document;if(lo)try{uo(lo.documentElement.childNodes)[0].nodeType}catch(t){uo=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),lo)try{lo.createElement(\"DIV\").style.setProperty(\"opacity\",0,\"\")}catch(t){var co=this.Element.prototype,ho=co.setAttribute,fo=co.setAttributeNS,po=this.CSSStyleDeclaration.prototype,_o=po.setProperty;co.setAttribute=function(t,e){ho.call(this,t,e+\"\")},co.setAttributeNS=function(t,e,n){fo.call(this,t,e,n+\"\")},po.setProperty=function(t,e,n){_o.call(this,t,e+\"\",n)}}oo.ascending=s,oo.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},oo.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},oo.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},oo.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i>=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},oo.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)l(n=+t[a])&&(i+=n);else for(;++a<r;)l(n=+e.call(t,t[a],a))&&(i+=n);return i},oo.mean=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)l(n=u(t[a]))?i+=n:--o;else for(;++a<r;)l(n=u(e.call(t,t[a],a)))?i+=n:--o;return o?i/o:void 0},oo.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],a=n-i;return a?r+a*(t[i]-r):r},oo.median=function(t,e){var n,i=[],r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)l(n=u(t[a]))&&i.push(n);else for(;++a<r;)l(n=u(e.call(t,t[a],a)))&&i.push(n);return i.length?oo.quantile(i.sort(s),.5):void 0},oo.variance=function(t,e){var n,i,r=t.length,a=0,o=0,s=-1,c=0;if(1===arguments.length)for(;++s<r;)l(n=u(t[s]))&&(i=n-a,a+=i/++c,o+=i*(n-a));else for(;++s<r;)l(n=u(e.call(t,t[s],s)))&&(i=n-a,a+=i/++c,o+=i*(n-a));return c>1?o/(c-1):void 0},oo.deviation=function(){var t=oo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var vo=c(s);oo.bisectLeft=vo.left,oo.bisect=oo.bisectRight=vo.right,oo.bisector=function(t){return c(1===t.length?function(e,n){return s(t(e),n)}:t)},oo.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,2>a&&(e=0));for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},oo.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},oo.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],a=new Array(0>i?0:i);i>n;)a[n]=[e=r,r=t[++n]];return a},oo.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=oo.min(arguments,h),n=new Array(e);++t<e;)for(var i,r=-1,a=n[t]=new Array(i);++r<i;)a[r]=arguments[r][t];return n},oo.transpose=function(t){return oo.zip.apply(oo,t)},oo.keys=function(t){var e=[];for(var n in t)e.push(n);return e},oo.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},oo.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},oo.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--o]=i[e];return n};var go=Math.abs;oo.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error(\"infinite range\");var i,r=[],a=f(go(n)),o=-1;if(t*=a,e*=a,n*=a,\n0>n)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},oo.map=function(t,e){var n=new p;if(t instanceof p)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n};var mo=\"__proto__\",yo=\"\\0\";d(p,{has:g,get:function(t){return this._[_(t)]},set:function(t,e){return this._[_(t)]=e},remove:m,keys:y,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:v(e),value:this._[e]});return t},size:b,empty:x,forEach:function(t){for(var e in this._)t.call(this,v(e),this._[e])}}),oo.nest=function(){function t(e,o,s){if(s>=a.length)return i?i.call(r,o):n?o.sort(n):o;for(var u,l,c,h,f=-1,d=o.length,_=a[s++],v=new p;++f<d;)(h=v.get(u=_(l=o[f])))?h.push(l):v.set(u,[l]);return e?(l=e(),c=function(n,i){l.set(n,t(e,i,s))}):(l={},c=function(n,i){l[n]=t(e,i,s)}),v.forEach(c),l}function e(t,n){if(n>=a.length)return t;var i=[],r=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},a=[],o=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(oo.map,n,0),0)},r.key=function(t){return a.push(t),r},r.sortKeys=function(t){return o[a.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},oo.set=function(t){var e=new w;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},d(w,{has:g,add:function(t){return this._[_(t+=\"\")]=!0,t},remove:m,values:y,size:b,empty:x,forEach:function(t){for(var e in this._)t.call(this,v(e))}}),oo.behavior={},oo.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=M(t,e,e[n]);return t};var bo=[\"webkit\",\"ms\",\"moz\",\"Moz\",\"o\",\"O\"];oo.dispatch=function(){for(var t=new S,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=I(t);return t},S.prototype.on=function(t,e){var n=t.indexOf(\".\"),i=\"\";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},oo.event=null,oo.requote=function(t){return t.replace(xo,\"\\\\$&\")};var xo=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g,wo={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ko=function(t,e){return e.querySelector(t)},Mo=function(t,e){return e.querySelectorAll(t)},Co=function(t,e){var n=t.matches||t[C(t,\"matchesSelector\")];return(Co=function(t,e){return n.call(t,e)})(t,e)};\"function\"==typeof Sizzle&&(ko=function(t,e){return Sizzle(t,e)[0]||null},Mo=Sizzle,Co=Sizzle.matchesSelector),oo.selection=function(){return oo.select(lo.documentElement)};var Eo=oo.selection.prototype=[];Eo.select=function(t){var e,n,i,r,a=[];t=j(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var u=-1,l=i.length;++u<l;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,o)),n&&\"__data__\"in r&&(n.__data__=r.__data__)):e.push(null)}return P(a)},Eo.selectAll=function(t){var e,n,i=[];t=R(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,u=o.length;++s<u;)(n=o[s])&&(i.push(e=uo(t.call(n,n.__data__,s,r))),e.parentNode=n);return P(i)};var So={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};oo.ns={prefix:So,qualify:function(t){var e=t.indexOf(\":\"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),So.hasOwnProperty(n)?{space:So[n],local:t}:t}},Eo.attr=function(t,e){if(arguments.length<2){if(\"string\"==typeof t){var n=this.node();return t=oo.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(N(e,t[e]));return this}return this.each(N(t,e))},Eo.classed=function(t,e){if(arguments.length<2){if(\"string\"==typeof t){var n=this.node(),i=(t=z(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute(\"class\");++r<i;)if(!L(t[r]).test(e))return!1;return!0}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},Eo.style=function(t,e,n){var i=arguments.length;if(3>i){if(\"string\"!=typeof t){2>i&&(e=\"\");for(n in t)this.each(U(n,t[n],e));return this}if(2>i){var r=this.node();return o(r).getComputedStyle(r,null).getPropertyValue(t)}n=\"\"}return this.each(U(t,e,n))},Eo.property=function(t,e){if(arguments.length<2){if(\"string\"==typeof t)return this.node()[t];for(e in t)this.each(H(e,t[e]));return this}return this.each(H(t,e))},Eo.text=function(t){return arguments.length?this.each(\"function\"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?\"\":e}:null==t?function(){this.textContent=\"\"}:function(){this.textContent=t}):this.node().textContent},Eo.html=function(t){return arguments.length?this.each(\"function\"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?\"\":e}:null==t?function(){this.innerHTML=\"\"}:function(){this.innerHTML=t}):this.node().innerHTML},Eo.append=function(t){return t=B(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Eo.insert=function(t,e){return t=B(t),e=j(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Eo.remove=function(){return this.each(W)},Eo.data=function(t,e){function n(t,n){var i,r,a,o=t.length,c=n.length,h=Math.min(o,c),f=new Array(c),d=new Array(c),_=new Array(o);if(e){var v,g=new p,m=new Array(o);for(i=-1;++i<o;)g.has(v=e.call(r=t[i],r.__data__,i))?_[i]=r:g.set(v,r),m[i]=v;for(i=-1;++i<c;)(r=g.get(v=e.call(n,a=n[i],i)))?r!==!0&&(f[i]=r,r.__data__=a):d[i]=V(a),g.set(v,!0);for(i=-1;++i<o;)g.get(m[i])!==!0&&(_[i]=t[i])}else{for(i=-1;++i<h;)r=t[i],a=n[i],r?(r.__data__=a,f[i]=r):d[i]=V(a);for(;c>i;++i)d[i]=V(n[i]);for(;o>i;++i)_[i]=t[i]}d.update=f,d.parentNode=f.parentNode=_.parentNode=t.parentNode,s.push(d),u.push(f),l.push(_)}var i,r,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(i=this[0]).length);++a<o;)(r=i[a])&&(t[a]=r.__data__);return t}var s=X([]),u=P([]),l=P([]);if(\"function\"==typeof t)for(;++a<o;)n(i=this[a],t.call(i,i.parentNode.__data__,a));else for(;++a<o;)n(i=this[a],t);return u.enter=function(){return s},u.exit=function(){return l},u},Eo.datum=function(t){return arguments.length?this.property(\"__data__\",t):this.property(\"__data__\")},Eo.filter=function(t){var e,n,i,r=[];\"function\"!=typeof t&&(t=q(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;u>s;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return P(r)},Eo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Eo.sort=function(t){t=G.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Eo.each=function(t){return Y(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Eo.call=function(t){var e=uo(arguments);return t.apply(e[0]=this,e),this},Eo.empty=function(){return!this.node()},Eo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null},Eo.size=function(){var t=0;return Y(this,function(){++t}),t};var Io=[];oo.selection.enter=X,oo.selection.enter.prototype=Io,Io.append=Eo.append,Io.empty=Eo.empty,Io.node=Eo.node,Io.call=Eo.call,Io.size=Eo.size,Io.select=function(t){for(var e,n,i,r,a,o=[],s=-1,u=this.length;++s<u;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var l=-1,c=r.length;++l<c;)(a=r[l])?(e.push(i[l]=n=t.call(r.parentNode,a.__data__,l,s)),n.__data__=a.__data__):e.push(null)}return P(o)},Io.insert=function(t,e){return arguments.length<2&&(e=Z(this)),Eo.insert.call(this,t,e)},oo.select=function(t){var e;return\"string\"==typeof t?(e=[ko(t,lo)],e.parentNode=lo.documentElement):(e=[t],e.parentNode=a(t)),P([e])},oo.selectAll=function(t){var e;return\"string\"==typeof t?(e=uo(Mo(t,lo)),e.parentNode=lo.documentElement):(e=t,e.parentNode=null),P([e])},Eo.on=function(t,e,n){var i=arguments.length;if(3>i){if(\"string\"!=typeof t){2>i&&(e=!1);for(n in t)this.each(J(n,t[n],e));return this}if(2>i)return(i=this.node()[\"__on\"+t])&&i._;n=!1}return this.each(J(t,e,n))};var Oo=oo.map({mouseenter:\"mouseover\",mouseleave:\"mouseout\"});lo&&Oo.forEach(function(t){\"on\"+t in lo&&Oo.remove(t)});var To,Ao=0;oo.mouse=function(t){return et(t,T())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oo.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=T().changedTouches),e)for(var i,r=0,a=e.length;a>r;++r)if((i=e[r]).identifier===n)return et(t,i)},oo.behavior.drag=function(){function t(){this.on(\"mousedown.drag\",r).on(\"touchstart.drag\",a)}function e(t,e,r,a,o){return function(){function s(){var t,n,i=e(f,_);i&&(t=i[0]-y[0],n=i[1]-y[1],p|=t|n,y=i,d({type:\"drag\",x:i[0]+l[0],y:i[1]+l[1],dx:t,dy:n}))}function u(){e(f,_)&&(g.on(a+v,null).on(o+v,null),m(p&&oo.event.target===h),d({type:\"dragend\"}))}var l,c=this,h=oo.event.target,f=c.parentNode,d=n.of(c,arguments),p=0,_=t(),v=\".drag\"+(null==_?\"\":\"-\"+_),g=oo.select(r(h)).on(a+v,s).on(o+v,u),m=tt(h),y=e(f,_);i?(l=i.apply(c,arguments),l=[l.x-y[0],l.y-y[1]]):l=[0,0],d({type:\"dragstart\"})}}var n=A(t,\"drag\",\"dragstart\",\"dragend\"),i=null,r=e(E,oo.mouse,o,\"mousemove\",\"mouseup\"),a=e(nt,oo.touch,k,\"touchmove\",\"touchend\");return t.origin=function(e){return arguments.length?(i=e,t):i},oo.rebind(t,n,\"on\")},oo.touches=function(t,e){return arguments.length<2&&(e=T().touches),e?uo(e).map(function(e){var n=et(t,e);return n.identifier=e.identifier,n}):[]};var jo=1e-6,Ro=jo*jo,No=Math.PI,Fo=2*No,Lo=Fo-jo,zo=No/2,Do=No/180,$o=180/No,Uo=Math.SQRT2,Ho=2,Bo=4;oo.interpolateZoom=function(t,e){function n(t){var e=t*m;if(g){var n=ut(_),o=a/(Ho*f)*(n*lt(Uo*e+_)-st(_));return[i+o*l,r+o*c,a*n/ut(Uo*e+_)]}return[i+t*l,r+t*c,a*Math.exp(Uo*e)]}var i=t[0],r=t[1],a=t[2],o=e[0],s=e[1],u=e[2],l=o-i,c=s-r,h=l*l+c*c,f=Math.sqrt(h),d=(u*u-a*a+Bo*h)/(2*a*Ho*f),p=(u*u-a*a-Bo*h)/(2*u*Ho*f),_=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(p*p+1)-p),g=v-_,m=(g||Math.log(u/a))/Uo;return n.duration=1e3*m,n},oo.behavior.zoom=function(){function t(t){t.on(T,h).on(Vo+\".zoom\",d).on(\"dblclick.zoom\",p).on(R,f)}function e(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function n(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function i(t){M.k=Math.max(E[0],Math.min(E[1],t))}function r(t,e){e=n(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function a(e,n,a,o){e.__chart__={x:M.x,y:M.y,k:M.k},i(Math.pow(2,o)),r(v=n,a),e=oo.select(e),S>0&&(e=e.transition().duration(S)),e.call(t.event)}function s(){x&&x.domain(b.range().map(function(t){return(t-M.x)/M.k}).map(b.invert)),k&&k.domain(w.range().map(function(t){return(t-M.y)/M.k}).map(w.invert))}function u(t){I++||t({type:\"zoomstart\"})}function l(t){s(),t({type:\"zoom\",scale:M.k,translate:[M.x,M.y]})}function c(t){--I||t({type:\"zoomend\"}),v=null}function h(){function t(){h=1,r(oo.mouse(i),d),l(s)}function n(){f.on(P,null).on(j,null),p(h&&oo.event.target===a),c(s)}var i=this,a=oo.event.target,s=N.of(i,arguments),h=0,f=oo.select(o(i)).on(P,t).on(j,n),d=e(oo.mouse(i)),p=tt(i);Du.call(i),u(s)}function f(){function t(){var t=oo.touches(p);return d=M.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=oo.event.target;oo.select(e).on(b,o).on(x,s),w.push(e);for(var n=oo.event.changedTouches,i=0,r=n.length;r>i;++i)v[n[i].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-y){var c=u[0];a(p,c,v[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),O()}y=l}else if(u.length>1){var c=u[0],h=u[1],f=c[0]-h[0],d=c[1]-h[1];g=f*f+d*d}}function o(){var t,e,n,a,o=oo.touches(p);Du.call(p);for(var s=0,u=o.length;u>s;++s,a=null)if(n=o[s],a=v[n.identifier]){if(e)break;t=n,e=a}if(a){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=g&&Math.sqrt(c/g);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+a[0])/2,(e[1]+a[1])/2],i(h*d)}y=null,r(t,e),l(_)}function s(){if(oo.event.touches.length){for(var e=oo.event.changedTouches,n=0,i=e.length;i>n;++n)delete v[e[n].identifier];for(var r in v)return void t()}oo.selectAll(w).on(m,null),k.on(T,h).on(R,f),C(),c(_)}var d,p=this,_=N.of(p,arguments),v={},g=0,m=\".zoom-\"+oo.event.changedTouches[0].identifier,b=\"touchmove\"+m,x=\"touchend\"+m,w=[],k=oo.select(p),C=tt(p);n(),u(_),k.on(T,null).on(R,n)}function d(){var t=N.of(this,arguments);m?clearTimeout(m):(_=e(v=g||oo.mouse(this)),Du.call(this),u(t)),m=setTimeout(function(){m=null,c(t)},50),O(),i(Math.pow(2,.002*Wo())*M.k),r(v,_),l(t)}function p(){var t=oo.mouse(this),n=Math.log(M.k)/Math.LN2;a(this,t,e(t),oo.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var _,v,g,m,y,b,x,w,k,M={x:0,y:0,k:1},C=[960,500],E=qo,S=250,I=0,T=\"mousedown.zoom\",P=\"mousemove.zoom\",j=\"mouseup.zoom\",R=\"touchstart.zoom\",N=A(t,\"zoomstart\",\"zoom\",\"zoomend\");return Vo||(Vo=\"onwheel\"in lo?(Wo=function(){return-oo.event.deltaY*(oo.event.deltaMode?120:1)},\"wheel\"):\"onmousewheel\"in lo?(Wo=function(){return oo.event.wheelDelta},\"mousewheel\"):(Wo=function(){return-oo.event.detail},\"MozMousePixelScroll\")),t.event=function(t){t.each(function(){var t=N.of(this,arguments),e=M;Lu?oo.select(this).transition().each(\"start.zoom\",function(){M=this.__chart__||{x:0,y:0,k:1},u(t)}).tween(\"zoom:zoom\",function(){var n=C[0],i=C[1],r=v?v[0]:n/2,a=v?v[1]:i/2,o=oo.interpolateZoom([(r-M.x)/M.k,(a-M.y)/M.k,n/M.k],[(r-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var i=o(e),s=n/i[2];this.__chart__=M={x:r-i[0]*s,y:a-i[1]*s,k:s},l(t)}}).each(\"interrupt.zoom\",function(){c(t)}).each(\"end.zoom\",function(){c(t)}):(this.__chart__=M,u(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},s(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:+e},s(),t):M.k},t.scaleExtent=function(e){return arguments.length?(E=null==e?qo:[+e[0],+e[1]],t):E},t.center=function(e){return arguments.length?(g=e&&[+e[0],+e[1]],t):g},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.duration=function(e){return arguments.length?(S=+e,t):S},t.x=function(e){return arguments.length?(x=e,b=e.copy(),M={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(k=e,w=e.copy(),M={x:0,y:0,k:1},t):k},oo.rebind(t,N,\"on\")};var Wo,Vo,qo=[0,1/0];oo.color=ht,ht.prototype.toString=function(){return this.rgb()+\"\"},oo.hsl=ft;var Go=ft.prototype=new ht;Go.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,this.l/t)},Go.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,t*this.l)},Go.rgb=function(){return dt(this.h,this.s,this.l)},oo.hcl=pt;var Yo=pt.prototype=new ht;Yo.brighter=function(t){return new pt(this.h,this.c,Math.min(100,this.l+Xo*(arguments.length?t:1)))},Yo.darker=function(t){return new pt(this.h,this.c,Math.max(0,this.l-Xo*(arguments.length?t:1)))},Yo.rgb=function(){return _t(this.h,this.c,this.l).rgb()},oo.lab=vt;var Xo=18,Zo=.95047,Jo=1,Qo=1.08883,Ko=vt.prototype=new ht;Ko.brighter=function(t){return new vt(Math.min(100,this.l+Xo*(arguments.length?t:1)),this.a,this.b)},Ko.darker=function(t){return new vt(Math.max(0,this.l-Xo*(arguments.length?t:1)),this.a,this.b)},Ko.rgb=function(){return gt(this.l,this.a,this.b)},oo.rgb=wt;var ts=wt.prototype=new ht;ts.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new wt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new wt(r,r,r)},ts.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new wt(t*this.r,t*this.g,t*this.b)},ts.hsl=function(){return St(this.r,this.g,this.b)},ts.toString=function(){return\"#\"+Ct(this.r)+Ct(this.g)+Ct(this.b)};var es=oo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});es.forEach(function(t,e){es.set(t,kt(e))}),oo.functor=At,oo.xhr=Pt(k),oo.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=jt(t,e,null==n?i:r(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?i:r(t)):n},o}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'\"'+t.replace(/\\\"/g,'\"\"')+'\"':t}var s=new RegExp('[\"'+t+\"\\n]\"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function(\"d\",\"return {\"+t.map(function(t,e){return JSON.stringify(t)+\": d[\"+e+\"]\"}).join(\",\")+\"}\");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=l)return o;if(r)return r=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/\"\"/g,'\"')}for(;l>c;){var i=t.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==u)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,a={},o={},s=[],l=t.length,c=0,h=0;(i=n())!==o;){for(var f=[];i!==a&&i!==o;)f.push(i),i=n();e&&null==(f=e(f,h++))||s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new w,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join(\"\\n\")},n.formatRows=function(t){return t.map(a).join(\"\\n\")},n},oo.csv=oo.dsv(\",\",\"text/csv\"),oo.tsv=oo.dsv(\"\\t\",\"text/tab-separated-values\");var ns,is,rs,as,os,ss=this[C(this,\"requestAnimationFrame\")]||function(t){setTimeout(t,17)};oo.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,a={c:t,t:r,f:!1,n:null};is?is.n=a:ns=a,is=a,rs||(as=clearTimeout(as),rs=1,ss(Ft))},oo.timer.flush=function(){Lt(),zt()},oo.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var us=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"].map($t);oo.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=oo.round(t,Dt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),us[8+n/3]};var ls=/(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i,cs=oo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=oo.round(t,Dt(t,e))).toFixed(Math.max(0,Math.min(20,Dt(t*(1+1e-15),e))))}}),hs=oo.time={},fs=Date;Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ds.setUTCDate.apply(this._,arguments)},setDay:function(){ds.setUTCDay.apply(this._,arguments)},setFullYear:function(){ds.setUTCFullYear.apply(this._,arguments)},setHours:function(){ds.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ds.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ds.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ds.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ds.setUTCSeconds.apply(this._,arguments)},setTime:function(){ds.setTime.apply(this._,arguments)}};var ds=Date.prototype;hs.year=Wt(function(t){return t=hs.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),hs.years=hs.year.range,hs.years.utc=hs.year.utc.range,hs.day=Wt(function(t){var e=new fs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),hs.days=hs.day.range,hs.days.utc=hs.day.utc.range,hs.dayOfYear=function(t){var e=hs.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},[\"sunday\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\"].forEach(function(t,e){e=7-e;var n=hs[t]=Wt(function(t){return(t=hs.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=hs.year(t).getDay();return Math.floor((hs.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});hs[t+\"s\"]=n.range,hs[t+\"s\"].utc=n.utc.range,hs[t+\"OfYear\"]=function(t){var n=hs.year(t).getDay();return Math.floor((hs.dayOfYear(t)+(n+e)%7)/7)}}),hs.week=hs.sunday,hs.weeks=hs.sunday.range,hs.weeks.utc=hs.sunday.utc.range,hs.weekOfYear=hs.sundayOfYear;var ps={\"-\":\"\",_:\" \",0:\"0\"},_s=/^\\s*\\d+/,vs=/^%/;oo.locale=function(t){return{numberFormat:Ut(t),timeFormat:qt(t)}};var gs=oo.locale({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"],dateTime:\"%a %b %e %X %Y\",date:\"%m/%d/%Y\",time:\"%H:%M:%S\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});oo.format=gs.numberFormat,oo.geo={},de.prototype={s:0,t:0,add:function(t){pe(t,this.t,ms),pe(ms.s,this.s,this),this.s?this.t+=ms.t:this.s=ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ms=new de;oo.geo.stream=function(t,e){t&&ys.hasOwnProperty(t.type)?ys[t.type](t,e):_e(t,e)};var ys={Feature:function(t,e){_e(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)_e(n[i].geometry,e)}},bs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ve(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ve(n[i],e,0)},Polygon:function(t,e){ge(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ge(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)_e(n[i],e)}};oo.geo.area=function(t){return xs=0,oo.geo.stream(t,ks),xs};var xs,ws=new de,ks={sphere:function(){xs+=4*No},point:E,lineStart:E,lineEnd:E,polygonStart:function(){ws.reset(),ks.lineStart=me},polygonEnd:function(){var t=2*ws;xs+=0>t?4*No+t:t,ks.lineStart=ks.lineEnd=ks.point=E}};oo.geo.bounds=function(){function t(t,e){y.push(b=[c=t,f=t]),h>e&&(h=e),e>d&&(d=e)}function e(e,n){var i=ye([e*Do,n*Do]);if(g){var r=xe(g,i),a=[r[1],-r[0],0],o=xe(a,r);Me(o),o=Ce(o);var u=e-p,l=u>0?1:-1,_=o[0]*$o*l,v=go(u)>180;if(v^(_>l*p&&l*e>_)){var m=o[1]*$o;m>d&&(d=m)}else if(_=(_+360)%360-180,v^(_>l*p&&l*e>_)){var m=-o[1]*$o;h>m&&(h=m)}else h>n&&(h=n),n>d&&(d=n);v?p>e?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>p?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e)}else t(e,n);g=i,p=e}function n(){x.point=e}function i(){b[0]=c,b[1]=f,x.point=t,g=null}function r(t,n){if(g){var i=t-p;m+=go(i)>180?i+(i>0?360:-360):i}else _=t,v=n;ks.point(t,n),e(t,n)}function a(){ks.lineStart()}function o(){r(_,v),ks.lineEnd(),go(m)>jo&&(c=-(f=180)),b[0]=c,b[1]=f,g=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,d,p,_,v,g,m,y,b,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=a,x.lineEnd=o,m=0,ks.polygonStart()},polygonEnd:function(){ks.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,0>ws?(c=-(f=180),h=-(d=90)):m>jo?d=90:-jo>m&&(h=-90),b[0]=c,b[1]=f}};return function(t){d=f=-(c=h=1/0),y=[],oo.geo.stream(t,x);var e=y.length;if(e){y.sort(u);for(var n,i=1,r=y[0],a=[r];e>i;++i)n=y[i],l(n[0],r)||l(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):a.push(r=n);for(var o,n,p=-1/0,e=a.length-1,i=0,r=a[e];e>=i;r=n,++i)n=a[i],(o=s(r[1],n[0]))>p&&(p=o,c=n[0],f=r[1])}return y=b=null,1/0===c||1/0===h?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),oo.geo.centroid=function(t){Ms=Cs=Es=Ss=Is=Os=Ts=As=Ps=js=Rs=0,oo.geo.stream(t,Ns);var e=Ps,n=js,i=Rs,r=e*e+n*n+i*i;return Ro>r&&(e=Os,n=Ts,i=As,jo>Cs&&(e=Es,n=Ss,i=Is),r=e*e+n*n+i*i,Ro>r)?[NaN,NaN]:[Math.atan2(n,e)*$o,ot(i/Math.sqrt(r))*$o]};var Ms,Cs,Es,Ss,Is,Os,Ts,As,Ps,js,Rs,Ns={sphere:E,point:Se,lineStart:Oe,lineEnd:Te,polygonStart:function(){Ns.lineStart=Ae},polygonEnd:function(){Ns.lineStart=Oe}},Fs=Le(je,Ue,Be,[-No,-No/2]),Ls=1e9;oo.geo.clipExtent=function(){var t,e,n,i,r,a,o={stream:function(t){return r&&(r.valid=!1),r=a(t),r.valid=!0,r},extent:function(s){return arguments.length?(a=Ge(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),o):[[t,e],[n,i]]}};return o.extent([[0,0],[960,500]])},(oo.geo.conicEqualArea=function(){return Ye(Xe)}).raw=Xe,oo.geo.albers=function(){return oo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oo.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(i(a,o),e)||r(a,o),e}var e,n,i,r,a=oo.geo.albers(),o=oo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=oo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var l=a.scale(),c=+e[0],h=+e[1];return n=a.translate(e).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(u).point,i=o.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+jo,h+.12*l+jo],[c-.214*l-jo,h+.234*l-jo]]).stream(u).point,r=s.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+jo,h+.166*l+jo],[c-.115*l-jo,h+.234*l-jo]]).stream(u).point,t},t.scale(1070)};var zs,Ds,$s,Us,Hs,Bs,Ws={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ds=0,Ws.lineStart=Ze},polygonEnd:function(){Ws.lineStart=Ws.lineEnd=Ws.point=E,zs+=go(Ds/2)}},Vs={point:Je,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},qs={point:tn,lineStart:en,lineEnd:nn,polygonStart:function(){qs.lineStart=rn},polygonEnd:function(){qs.point=tn,qs.lineStart=en,qs.lineEnd=nn}};oo.geo.path=function(){function t(t){return t&&(\"function\"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=r(a)),oo.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,i,r,a,o,s=4.5;return t.area=function(t){return zs=0,oo.geo.stream(t,r(Ws)),zs},t.centroid=function(t){return Es=Ss=Is=Os=Ts=As=Ps=js=Rs=0,oo.geo.stream(t,r(qs)),Rs?[Ps/Rs,js/Rs]:As?[Os/As,Ts/As]:Is?[Es/Is,Ss/Is]:[NaN,NaN]},t.bounds=function(t){return Hs=Bs=-($s=Us=1/0),oo.geo.stream(t,r(Vs)),[[$s,Us],[Hs,Bs]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||sn(t):k,e()):n},t.context=function(t){return arguments.length?(a=null==(i=t)?new Qe:new an(t),\"function\"!=typeof s&&a.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s=\"function\"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(oo.geo.albersUsa()).context(null)},oo.geo.transform=function(t){return{stream:function(e){var n=new un(e);for(var i in t)n[i]=t[i];return n}}},un.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oo.geo.projection=cn,oo.geo.projectionMutator=hn,(oo.geo.equirectangular=function(){return cn(dn)}).raw=dn.invert=dn,oo.geo.rotation=function(t){function e(e){return e=t(e[0]*Do,e[1]*Do),e[0]*=$o,e[1]*=$o,e}return t=_n(t[0]%360*Do,t[1]*Do,t.length>2?t[2]*Do:0),e.invert=function(e){return e=t.invert(e[0]*Do,e[1]*Do),e[0]*=$o,e[1]*=$o,e},e},pn.invert=dn,oo.geo.circle=function(){function t(){var t=\"function\"==typeof i?i.apply(this,arguments):i,e=_n(-t[0]*Do,-t[1]*Do,0).invert,r=[];\nreturn n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=$o,t[1]*=$o}}),{type:\"Polygon\",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=yn((e=+i)*Do,r*Do),t):e},t.precision=function(i){return arguments.length?(n=yn(e*Do,(r=+i)*Do),t):r},t.angle(90)},oo.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Do,r=t[1]*Do,a=e[1]*Do,o=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r),c=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},oo.geo.graticule=function(){function t(){return{type:\"MultiLineString\",coordinates:e()}}function e(){return oo.range(Math.ceil(a/v)*v,r,v).map(f).concat(oo.range(Math.ceil(l/g)*g,u,g).map(d)).concat(oo.range(Math.ceil(i/p)*p,n,p).filter(function(t){return go(t%v)>jo}).map(c)).concat(oo.range(Math.ceil(s/_)*_,o,_).filter(function(t){return go(t%g)>jo}).map(h))}var n,i,r,a,o,s,u,l,c,h,f,d,p=10,_=p,v=90,g=360,m=2.5;return t.lines=function(){return e().map(function(t){return{type:\"LineString\",coordinates:t}})},t.outline=function(){return{type:\"Polygon\",coordinates:[f(a).concat(d(u).slice(1),f(r).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],r=+e[1][0],l=+e[0][1],u=+e[1][1],a>r&&(e=a,a=r,r=e),l>u&&(e=l,l=u,u=e),t.precision(m)):[[a,l],[r,u]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],i>n&&(e=i,i=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(m)):[[i,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],g=+e[1],t):[v,g]},t.minorStep=function(e){return arguments.length?(p=+e[0],_=+e[1],t):[p,_]},t.precision=function(e){return arguments.length?(m=+e,c=xn(s,o,90),h=wn(i,n,m),f=xn(l,u,90),d=wn(a,r,m),t):m},t.majorExtent([[-180,-90+jo],[180,90-jo]]).minorExtent([[-180,-80-jo],[180,80+jo]])},oo.geo.greatArc=function(){function t(){return{type:\"LineString\",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=kn,r=Mn;return t.distance=function(){return oo.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e=\"function\"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n=\"function\"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},oo.geo.interpolate=function(t,e){return Cn(t[0]*Do,t[1]*Do,e[0]*Do,e[1]*Do)},oo.geo.length=function(t){return Gs=0,oo.geo.stream(t,Ys),Gs};var Gs,Ys={sphere:E,point:E,lineStart:En,lineEnd:E,polygonStart:E,polygonEnd:E},Xs=Sn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(oo.geo.azimuthalEqualArea=function(){return cn(Xs)}).raw=Xs;var Zs=Sn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},k);(oo.geo.azimuthalEquidistant=function(){return cn(Zs)}).raw=Zs,(oo.geo.conicConformal=function(){return Ye(In)}).raw=In,(oo.geo.conicEquidistant=function(){return Ye(On)}).raw=On;var Js=Sn(function(t){return 1/t},Math.atan);(oo.geo.gnomonic=function(){return cn(Js)}).raw=Js,Tn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-zo]},(oo.geo.mercator=function(){return An(Tn)}).raw=Tn;var Qs=Sn(function(){return 1},Math.asin);(oo.geo.orthographic=function(){return cn(Qs)}).raw=Qs;var Ks=Sn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(oo.geo.stereographic=function(){return cn(Ks)}).raw=Ks,Pn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-zo]},(oo.geo.transverseMercator=function(){var t=An(Pn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Pn,oo.geom={},oo.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=At(n),a=At(i),o=t.length,s=[],u=[];for(e=0;o>e;e++)s.push([+r.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(Fn),e=0;o>e;e++)u.push([s[e][0],-s[e][1]]);var l=Nn(s),c=Nn(u),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],d=[];for(e=l.length-1;e>=0;--e)d.push(t[s[l[e]][2]]);for(e=+h;e<c.length-f;++e)d.push(t[s[c[e]][2]]);return d}var n=jn,i=Rn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},oo.geom.polygon=function(t){return wo(t,tu),t};var tu=oo.geom.polygon.prototype=[];tu.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},tu.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},tu.clip=function(t){for(var e,n,i,r,a,o,s=Dn(t),u=-1,l=this.length-Dn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,r=this[u],a=e[(i=e.length-s)-1],n=-1;++n<i;)o=e[n],Ln(o,c,r)?(Ln(a,c,r)||t.push(zn(a,o,c,r)),t.push(o)):Ln(a,c,r)&&t.push(zn(a,o,c,r)),a=o;s&&t.push(t[0]),c=r}return t};var eu,nu,iu,ru,au,ou=[],su=[];Gn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Xn),e.length},ai.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},oi.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ci(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ui(this,n),t=n,n=t.U),n.C=!1,i.C=!0,li(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(li(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ui(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,a=t.L,o=t.R;if(n=a?o?ci(o):a:o,r?r.L===t?r.L=n:r.R=n:this._=n,a&&o?(i=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=o,o.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ui(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,li(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ui(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,li(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ui(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,li(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},oo.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],a=s[1][0],o=s[1][1];return hi(n(t),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=i&&l.x<=a&&l.y>=r&&l.y<=o?[[i,o],[a,o],[a,r],[i,r]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/jo)*jo,y:Math.round(o(t,e)/jo)*jo,i:e}})}var i=jn,r=Rn,a=i,o=r,s=uu;return t?e(t):(e.links=function(t){return hi(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return hi(n(t)).cells.forEach(function(n,i){for(var r,a,o=n.site,s=n.edges.sort(Xn),u=-1,l=s.length,c=s[l-1].edge,h=c.l===o?c.r:c.l;++u<l;)r=c,a=h,c=s[u].edge,h=c.l===o?c.r:c.l,i<a.i&&i<h.i&&di(o,a,h)<0&&e.push([t[i],t[a.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(a=At(i=t),e):i},e.y=function(t){return arguments.length?(o=At(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?uu:t,e):s===uu?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===uu?null:s&&s[1]},e)};var uu=[[-1e6,-1e6],[1e6,1e6]];oo.geom.delaunay=function(t){return oo.geom.voronoi().triangles(t)},oo.geom.quadtree=function(t,e,n,i,r){function a(t){function a(t,e,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(go(u-n)+go(c-i)<.01)l(t,e,n,i,r,a,o,s);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,u,c,r,a,o,s),l(t,e,n,i,r,a,o,s)}else t.x=n,t.y=i,t.point=e}else l(t,e,n,i,r,a,o,s)}function l(t,e,n,i,r,o,s,u){var l=.5*(r+s),c=.5*(o+u),h=n>=l,f=i>=c,d=f<<1|h;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=vi()),h?r=l:s=l,f?o=c:u=c,a(t,e,n,i,r,o,s,u)}var c,h,f,d,p,_,v,g,m,y=At(s),b=At(u);if(null!=e)_=e,v=n,g=i,m=r;else if(g=m=-(_=v=1/0),h=[],f=[],p=t.length,o)for(d=0;p>d;++d)c=t[d],c.x<_&&(_=c.x),c.y<v&&(v=c.y),c.x>g&&(g=c.x),c.y>m&&(m=c.y),h.push(c.x),f.push(c.y);else for(d=0;p>d;++d){var x=+y(c=t[d],d),w=+b(c,d);_>x&&(_=x),v>w&&(v=w),x>g&&(g=x),w>m&&(m=w),h.push(x),f.push(w)}var k=g-_,M=m-v;k>M?m=v+k:g=_+M;var C=vi();if(C.add=function(t){a(C,t,+y(t,++d),+b(t,d),_,v,g,m)},C.visit=function(t){gi(t,C,_,v,g,m)},C.find=function(t){return mi(C,t[0],t[1],_,v,g,m)},d=-1,null==e){for(;++d<p;)a(C,t[d],h[d],f[d],_,v,g,m);--d}else t.forEach(C.add);return h=f=t=c=null,C}var o,s=jn,u=Rn;return(o=arguments.length)?(s=pi,u=_i,3===o&&(r=n,i=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(u=t,a):u},a.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a):null==e?null:[[e,n],[i,r]]},a.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),a):null==e?null:[i-e,r-n]},a)},oo.interpolateRgb=yi,oo.interpolateObject=bi,oo.interpolateNumber=xi,oo.interpolateString=wi;var lu=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,cu=new RegExp(lu.source,\"g\");oo.interpolate=ki,oo.interpolators=[function(t,e){var n=typeof e;return(\"string\"===n?es.has(e)||/^(#|rgb\\(|hsl\\()/.test(e)?yi:wi:e instanceof ht?yi:Array.isArray(e)?Mi:\"object\"===n&&isNaN(e)?bi:xi)(t,e)}],oo.interpolateArray=Mi;var hu=function(){return k},fu=oo.map({linear:hu,poly:Ai,quad:function(){return Ii},cubic:function(){return Oi},sin:function(){return Pi},exp:function(){return ji},circle:function(){return Ri},elastic:Ni,back:Fi,bounce:function(){return Li}}),du=oo.map({in:k,out:Ei,\"in-out\":Si,\"out-in\":function(t){return Si(Ei(t))}});oo.ease=function(t){var e=t.indexOf(\"-\"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):\"in\";return n=fu.get(n)||hu,i=du.get(i)||k,Ci(i(n.apply(null,so.call(arguments,1))))},oo.interpolateHcl=zi,oo.interpolateHsl=Di,oo.interpolateLab=$i,oo.interpolateRound=Ui,oo.transform=function(t){var e=lo.createElementNS(oo.ns.prefix.svg,\"g\");return(oo.transform=function(t){if(null!=t){e.setAttribute(\"transform\",t);var n=e.transform.baseVal.consolidate()}return new Hi(n?n.matrix:pu)})(t)},Hi.prototype.toString=function(){return\"translate(\"+this.translate+\")rotate(\"+this.rotate+\")skewX(\"+this.skew+\")scale(\"+this.scale+\")\"};var pu={a:1,b:0,c:0,d:1,e:0,f:0};oo.interpolateTransform=qi,oo.layout={},oo.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Xi(t[n]));return e}},oo.layout.chord=function(){function t(){var t,l,h,f,d,p={},_=[],v=oo.range(a),g=[];for(n=[],i=[],t=0,f=-1;++f<a;){for(l=0,d=-1;++d<a;)l+=r[f][d];_.push(l),g.push(oo.range(a)),t+=l}for(o&&v.sort(function(t,e){return o(_[t],_[e])}),s&&g.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(Fo-c*a)/t,l=0,f=-1;++f<a;){for(h=l,d=-1;++d<a;){var m=v[f],y=g[m][d],b=r[m][y],x=l,w=l+=b*t;p[m+\"-\"+y]={index:m,subindex:y,startAngle:x,endAngle:w,value:b}}i[m]={index:m,startAngle:h,endAngle:l,value:(l-h)/t},l+=c}for(f=-1;++f<a;)for(d=f-1;++d<a;){var k=p[f+\"-\"+d],M=p[d+\"-\"+f];(k.value||M.value)&&n.push(k.value<M.value?{source:M,target:k}:{source:k,target:M})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,a,o,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(a=(r=t)&&r.length,n=i=null,l):r},l.padding=function(t){return arguments.length?(c=t,n=i=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,n=i=null,l):o},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return i||t(),i},l},oo.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=r-n,u=a*a+o*o;if(u>s*s/v){if(p>u){var l=e.charge/u;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&u&&p>u){var l=e.pointCharge/u;t.px-=a*l,t.py-=o*l}}return!e.charge}}function e(t){t.px=oo.event.x,t.py=oo.event.y,s.resume()}var n,i,r,a,o,s={},u=oo.dispatch(\"start\",\"tick\",\"end\"),l=[1,1],c=.9,h=_u,f=vu,d=-30,p=gu,_=.1,v=.64,g=[],m=[];return s.tick=function(){if((i*=.99)<.005)return u.end({type:\"end\",alpha:i=0}),!0;var e,n,s,h,f,p,v,y,b,x=g.length,w=m.length;for(n=0;w>n;++n)s=m[n],h=s.source,f=s.target,y=f.x-h.x,b=f.y-h.y,(p=y*y+b*b)&&(p=i*a[n]*((p=Math.sqrt(p))-r[n])/p,y*=p,b*=p,f.x-=y*(v=h.weight/(f.weight+h.weight)),f.y-=b*v,h.x+=y*(v=1-v),h.y+=b*v);if((v=i*_)&&(y=l[0]/2,b=l[1]/2,n=-1,v))for(;++n<x;)s=g[n],s.x+=(y-s.x)*v,s.y+=(b-s.y)*v;if(d)for(nr(e=oo.geom.quadtree(g),i,o),n=-1;++n<x;)(s=g[n]).fixed||e.visit(t(s));for(n=-1;++n<x;)s=g[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);u.tick({type:\"tick\",alpha:i})},s.nodes=function(t){return arguments.length?(g=t,s):g},s.links=function(t){return arguments.length?(m=t,s):m},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(h=\"function\"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f=\"function\"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d=\"function\"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(_=+t,s):_},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(u.start({type:\"start\",alpha:i=t}),oo.timer(s.tick)),s):i},s.start=function(){function t(t,i){if(!n){for(n=new Array(u),s=0;u>s;++s)n[s]=[];for(s=0;c>s;++s){var r=m[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var a,o=n[e],s=-1,l=o.length;++s<l;)if(!isNaN(a=o[s][t]))return a;return Math.random()*i}var e,n,i,u=g.length,c=m.length,p=l[0],_=l[1];for(e=0;u>e;++e)(i=g[e]).index=e,i.weight=0;for(e=0;c>e;++e)i=m[e],\"number\"==typeof i.source&&(i.source=g[i.source]),\"number\"==typeof i.target&&(i.target=g[i.target]),++i.source.weight,++i.target.weight;for(e=0;u>e;++e)i=g[e],isNaN(i.x)&&(i.x=t(\"x\",p)),isNaN(i.y)&&(i.y=t(\"y\",_)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],\"function\"==typeof h)for(e=0;c>e;++e)r[e]=+h.call(this,m[e],e);else for(e=0;c>e;++e)r[e]=h;if(a=[],\"function\"==typeof f)for(e=0;c>e;++e)a[e]=+f.call(this,m[e],e);else for(e=0;c>e;++e)a[e]=f;if(o=[],\"function\"==typeof d)for(e=0;u>e;++e)o[e]=+d.call(this,g[e],e);else for(e=0;u>e;++e)o[e]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=oo.behavior.drag().origin(k).on(\"dragstart.force\",Qi).on(\"drag.force\",e).on(\"dragend.force\",Ki)),arguments.length?void this.on(\"mouseover.force\",tr).on(\"mouseout.force\",er).call(n):n},oo.rebind(s,u,\"on\")};var _u=20,vu=1,gu=1/0;oo.layout.hierarchy=function(){function t(r){var a,o=[r],s=[];for(r.depth=0;null!=(a=o.pop());)if(s.push(a),(l=n.call(t,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;i&&(a.value=0),a.children=l}else i&&(a.value=+i.call(t,a,a.depth)||0),delete a.children;return ar(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=ur,n=or,i=sr;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(rr(e,function(t){t.children&&(t.value=0)}),ar(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},oo.layout.partition=function(){function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,u,l=-1;for(i=e.value?i/e.value:0;++l<o;)t(s=a[l],n,u=s.value*i,r),n+=u}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,e(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return t(o[0],0,r[0],r[1]/e(o[0])),o}var i=oo.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},ir(n,i)},oo.layout.pie=function(){function t(o){var s,u=o.length,l=o.map(function(n,i){return+e.call(t,n,i)}),c=+(\"function\"==typeof i?i.apply(this,arguments):i),h=(\"function\"==typeof r?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(h)/u,+(\"function\"==typeof a?a.apply(this,arguments):a)),d=f*(0>h?-1:1),p=(h-u*d)/oo.sum(l),_=oo.range(u),v=[];return null!=n&&_.sort(n===mu?function(t,e){return l[e]-l[t]}:function(t,e){return n(o[t],o[e])}),_.forEach(function(t){v[t]={data:o[t],value:s=l[t],startAngle:c,endAngle:c+=s*p+d,padAngle:f}}),v}var e=Number,n=mu,i=0,r=Fo,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var mu={};oo.layout.stack=function(){function t(s,u){if(!(f=s.length))return s;var l=s.map(function(n,i){return e.call(t,n,i)}),c=l.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),h=n.call(t,c,u);l=oo.permute(l,h),c=oo.permute(c,h);var f,d,p,_,v=i.call(t,c,u),g=l[0].length;for(p=0;g>p;++p)for(r.call(t,l[0][p],_=v[p],c[0][p][1]),d=1;f>d;++d)r.call(t,l[d][p],_+=c[d-1][p][1],c[d][p][1]);return s}var e=k,n=dr,i=pr,r=fr,a=cr,o=hr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n=\"function\"==typeof e?e:yu.get(e)||dr,t):n},t.offset=function(e){return arguments.length?(i=\"function\"==typeof e?e:bu.get(e)||pr,t):i},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(r=e,t):r},t};var yu=oo.map({\"inside-out\":function(t){var e,n,i=t.length,r=t.map(_r),a=t.map(vr),o=oo.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,u=0,l=[],c=[];for(e=0;i>e;++e)n=o[e],u>s?(s+=a[n],l.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return oo.range(t.length).reverse()},default:dr}),bu=oo.map({silhouette:function(t){var e,n,i,r=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,i,r,a,o,s,u,l,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=u=l=0,n=1;f>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,a=0,s=h[n][0]-h[n-1][0];c>e;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}d[n]=u-=r?a/r*s:0,l>u&&(l=u)}for(n=0;f>n;++n)d[n]-=l;return d},expand:function(t){var e,n,i,r=t.length,a=t[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:pr});oo.layout.histogram=function(){function t(t,a){for(var o,s,u=[],l=t.map(n,this),c=i.call(this,l,a),h=r.call(this,c,l,a),a=-1,f=l.length,d=h.length-1,p=e?1:1/f;++a<d;)o=u[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(d>0)for(a=-1;++a<f;)s=l[a],s>=c[0]&&s<=c[1]&&(o=u[oo.bisect(h,s,1,d)-1],o.y+=p,o.push(t[a]));return u}var e=!0,n=Number,i=br,r=mr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=At(e),t):i},t.bins=function(e){return arguments.length?(r=\"number\"==typeof e?function(t){return yr(t,e)}:At(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},oo.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],u=r[0],l=r[1],c=null==e?Math.sqrt:\"function\"==typeof e?e:function(){return e};if(s.x=s.y=0,ar(s,function(t){t.r=+c(t.value)}),ar(s,Cr),i){var h=i*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;ar(s,function(t){t.r+=h}),ar(s,Cr),ar(s,function(t){t.r-=h})}return Ir(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}var e,n=oo.layout.hierarchy().sort(xr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||\"function\"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},ir(t,n)},oo.layout.tree=function(){function t(t,r){var c=o.call(this,t,r),h=c[0],f=e(h);if(ar(f,n),f.parent.m=-f.z,rr(f,i),l)rr(h,a);else{var d=h,p=h,_=h;rr(h,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>_.depth&&(_=t)});var v=s(d,p)/2-d.x,g=u[0]/(p.x+s(p,d)/2+v),m=u[1]/(_.depth||1);rr(h,function(t){t.x=(t.x+v)*g,t.y=t.depth*m})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,a=e.children,o=0,s=a.length;s>o;++o)i.push((a[o]=r={_:a[o],parent:e,children:(r=a[o].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){Rr(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,a=t,o=e,u=r.parent.children[0],l=r.m,c=a.m,h=o.m,f=u.m;o=Pr(o),r=Ar(r),o&&r;)u=Ar(u),a=Pr(a),a.a=t,i=o.z+h-r.z-l+s(o._,r._),i>0&&(jr(Nr(o,t,n),t,i),l+=i,c+=i),h+=o.m,l+=r.m,f+=u.m,c+=a.m;o&&!Pr(a)&&(a.t=o,a.m+=h-c),r&&!Ar(u)&&(u.t=r,u.m+=l-f,n=t)}return n}function a(t){t.x*=u[0],t.y=t.depth*u[1]}var o=oo.layout.hierarchy().sort(null).value(null),s=Tr,u=[1,1],l=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(l=null==(u=e)?a:null,t):l?null:u},t.nodeSize=function(e){return arguments.length?(l=null==(u=e)?null:a,t):l?u:null},ir(t,o)},oo.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),u=s[0],l=0;ar(u,function(t){var e=t.children;e&&e.length?(t.x=Lr(e),t.y=Fr(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var c=zr(u),h=Dr(u),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2;return ar(u,r?function(t){t.x=(t.x-u.x)*i[0],t.y=(u.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=(1-(u.y?t.y/u.y:1))*i[1]}),s}var e=oo.layout.hierarchy().sort(null).value(null),n=Tr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},ir(t,e)},oo.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var a=n.children;if(a&&a.length){var o,s,u,l=h(n),c=[],f=a.slice(),p=1/0,_=\"slice\"===d?l.dx:\"dice\"===d?l.dy:\"slice-dice\"===d?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(o=f[u-1]),c.area+=o.area,\"squarify\"!==d||(s=i(c,_))<=p?(f.pop(),p=s):(c.area-=c.pop().area,r(c,_,l,!1),_=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,_,l,!0),c.length=c.area=0),a.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=h(e),s=i.slice(),u=[];for(t(s,o.dx*o.dy/e.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(r(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*a*p)):1/0}function r(t,e,n,i){var r,a=-1,o=t.length,s=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)r=t[a],r.x=s,r.y=l,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?u(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)r=t[a],r.x=s,r.y=l,r.dx=c,l+=r.dy=Math.min(n.y+n.dy-l,c?u(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=l[0],a.dy=l[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?n:e)(a),f&&(o=r),r}var o,s=oo.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=$r,f=!1,d=\"squarify\",p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){var n=t.call(a,e,e.depth);return null==n?$r(e):Ur(e,\"number\"==typeof n?[n,n,n,n]:n)}function n(e){return Ur(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?$r:\"function\"==(i=typeof t)?e:\"number\"===i?(t=[t,t,t,t],n):n,a},a.round=function(t){return arguments.length?(u=t?Math.round:Number,a):u!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(p=t,a):p},a.mode=function(t){return arguments.length?(d=t+\"\",a):d},ir(a,s)},oo.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=oo.random.normal.apply(oo,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=oo.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},oo.scale={};var xu={floor:k,ceil:k};oo.scale.linear=function(){return Yr([0,1],[0,1],ki,!1)};var wu={s:1,g:1,p:1,r:1,e:1};oo.scale.log=function(){return na(oo.scale.linear().domain([0,1]),10,!0,[1,10])};var ku=oo.format(\".0e\"),Mu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};oo.scale.pow=function(){return ia(oo.scale.linear(),1,[0,1])},oo.scale.sqrt=function(){return oo.scale.pow().exponent(.5)},oo.scale.ordinal=function(){return aa([],{t:\"range\",a:[[]]})},oo.scale.category10=function(){return oo.scale.ordinal().range(Cu)},oo.scale.category20=function(){return oo.scale.ordinal().range(Eu)},oo.scale.category20b=function(){return oo.scale.ordinal().range(Su)},oo.scale.category20c=function(){return oo.scale.ordinal().range(Iu)};var Cu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),Eu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),Su=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Iu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);oo.scale.quantile=function(){return oa([],[])},oo.scale.quantize=function(){return sa(0,1,[0,1])},oo.scale.threshold=function(){return ua([.5],[0,1])},oo.scale.identity=function(){return la([0,1])},oo.svg={},oo.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+i.apply(this,arguments)),c=o.apply(this,arguments)-zo,h=s.apply(this,arguments)-zo,f=Math.abs(h-c),d=c>h?0:1;if(t>l&&(p=l,l=t,t=p),f>=Lo)return e(l,d)+(t?e(t,1-d):\"\")+\"Z\";var p,_,v,g,m,y,b,x,w,k,M,C,E=0,S=0,I=[];if((g=(+u.apply(this,arguments)||0)/2)&&(v=a===Ou?Math.sqrt(t*t+l*l):+a.apply(this,arguments),d||(S*=-1),l&&(S=ot(v/l*Math.sin(g))),t&&(E=ot(v/t*Math.sin(g)))),l){m=l*Math.cos(c+S),y=l*Math.sin(c+S),b=l*Math.cos(h-S),x=l*Math.sin(h-S);var O=Math.abs(h-c-2*S)<=No?0:1;if(S&&va(m,y,b,x)===d^O){var T=(c+h)/2;m=l*Math.cos(T),y=l*Math.sin(T),b=x=null}}else m=y=0;if(t){w=t*Math.cos(h-E),k=t*Math.sin(h-E),M=t*Math.cos(c+E),C=t*Math.sin(c+E);var A=Math.abs(c-h+2*E)<=No?0:1;if(E&&va(w,k,M,C)===1-d^A){var P=(c+h)/2;w=t*Math.cos(P),k=t*Math.sin(P),M=C=null}}else w=k=0;if((p=Math.min(Math.abs(l-t)/2,+r.apply(this,arguments)))>.001){_=l>t^d?0:1;var j=null==M?[w,k]:null==b?[m,y]:zn([m,y],[M,C],[b,x],[w,k]),R=m-j[0],N=y-j[1],F=b-j[0],L=x-j[1],z=1/Math.sin(Math.acos((R*F+N*L)/(Math.sqrt(R*R+N*N)*Math.sqrt(F*F+L*L)))/2),D=Math.sqrt(j[0]*j[0]+j[1]*j[1]);if(null!=b){var $=Math.min(p,(l-D)/(z+1)),U=ga(null==M?[w,k]:[M,C],[m,y],l,$,d),H=ga([b,x],[w,k],l,$,d);p===$?I.push(\"M\",U[0],\"A\",$,\",\",$,\" 0 0,\",_,\" \",U[1],\"A\",l,\",\",l,\" 0 \",1-d^va(U[1][0],U[1][1],H[1][0],H[1][1]),\",\",d,\" \",H[1],\"A\",$,\",\",$,\" 0 0,\",_,\" \",H[0]):I.push(\"M\",U[0],\"A\",$,\",\",$,\" 0 1,\",_,\" \",H[0])}else I.push(\"M\",m,\",\",y);if(null!=M){var B=Math.min(p,(t-D)/(z-1)),W=ga([m,y],[M,C],t,-B,d),V=ga([w,k],null==b?[m,y]:[b,x],t,-B,d);p===B?I.push(\"L\",V[0],\"A\",B,\",\",B,\" 0 0,\",_,\" \",V[1],\"A\",t,\",\",t,\" 0 \",d^va(V[1][0],V[1][1],W[1][0],W[1][1]),\",\",1-d,\" \",W[1],\"A\",B,\",\",B,\" 0 0,\",_,\" \",W[0]):I.push(\"L\",V[0],\"A\",B,\",\",B,\" 0 0,\",_,\" \",W[0])}else I.push(\"L\",w,\",\",k)}else I.push(\"M\",m,\",\",y),null!=b&&I.push(\"A\",l,\",\",l,\" 0 \",O,\",\",d,\" \",b,\",\",x),I.push(\"L\",w,\",\",k),null!=M&&I.push(\"A\",t,\",\",t,\" 0 \",A,\",\",1-d,\" \",M,\",\",C);return I.push(\"Z\"),I.join(\"\")}function e(t,e){return\"M0,\"+t+\"A\"+t+\",\"+t+\" 0 1,\"+e+\" 0,\"+-t+\"A\"+t+\",\"+t+\" 0 1,\"+e+\" 0,\"+t}var n=ha,i=fa,r=ca,a=Ou,o=da,s=pa,u=_a;return t.innerRadius=function(e){return arguments.length?(n=At(e),t):n},t.outerRadius=function(e){return arguments.length?(i=At(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=At(e),t):r},t.padRadius=function(e){return arguments.length?(a=e==Ou?Ou:At(e),t):a},t.startAngle=function(e){return arguments.length?(o=At(e),t):o},t.endAngle=function(e){return arguments.length?(s=At(e),t):s},t.padAngle=function(e){return arguments.length?(u=At(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-zo;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Ou=\"auto\";oo.svg.line=function(){return ma(k)};var Tu=oo.map({linear:ya,\"linear-closed\":ba,step:xa,\"step-before\":wa,\"step-after\":ka,basis:Oa,\"basis-open\":Ta,\"basis-closed\":Aa,bundle:Pa,cardinal:Ea,\"cardinal-open\":Ma,\"cardinal-closed\":Ca,monotone:za});Tu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Au=[0,2/3,1/3,0],Pu=[0,1/3,2/3,0],ju=[0,1/6,2/3,1/6];oo.svg.line.radial=function(){var t=ma(Da);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},wa.reverse=ka,ka.reverse=wa,oo.svg.area=function(){return $a(k)},oo.svg.area.radial=function(){var t=$a(Da);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},oo.svg.chord=function(){function t(t,s){var u=e(this,a,t,s),l=e(this,o,t,s);return\"M\"+u.p0+i(u.r,u.p1,u.a1-u.a0)+(n(u,l)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,l.r,l.p0)+i(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,u.r,u.p0))+\"Z\"}function e(t,e,n,i){var r=e.call(t,n,i),a=s.call(t,r,i),o=u.call(t,r,i)-zo,c=l.call(t,r,i)-zo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return\"A\"+t+\",\"+t+\" 0 \"+ +(n>No)+\",1 \"+e}function r(t,e,n,i){return\"Q 0,0 \"+i}var a=kn,o=Mn,s=Ua,u=da,l=pa;return t.radius=function(e){return arguments.length?(s=At(e),t):s},t.source=function(e){return arguments.length?(a=At(e),t):a},t.target=function(e){return arguments.length?(o=At(e),t):o},t.startAngle=function(e){return arguments.length?(u=At(e),t):u},t.endAngle=function(e){return arguments.length?(l=At(e),t):l},t},oo.svg.diagonal=function(){function t(t,r){var a=e.call(this,t,r),o=n.call(this,t,r),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return u=u.map(i),\"M\"+u[0]+\"C\"+u[1]+\" \"+u[2]+\" \"+u[3]}var e=kn,n=Mn,i=Ha;return t.source=function(n){\nreturn arguments.length?(e=At(n),t):e},t.target=function(e){return arguments.length?(n=At(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},oo.svg.diagonal.radial=function(){var t=oo.svg.diagonal(),e=Ha,n=t.projection;return t.projection=function(t){return arguments.length?n(Ba(e=t)):e},t},oo.svg.symbol=function(){function t(t,i){return(Ru.get(e.call(this,t,i))||qa)(n.call(this,t,i))}var e=Va,n=Wa;return t.type=function(n){return arguments.length?(e=At(n),t):e},t.size=function(e){return arguments.length?(n=At(e),t):n},t};var Ru=oo.map({circle:qa,cross:function(t){var e=Math.sqrt(t/5)/2;return\"M\"+-3*e+\",\"+-e+\"H\"+-e+\"V\"+-3*e+\"H\"+e+\"V\"+-e+\"H\"+3*e+\"V\"+e+\"H\"+e+\"V\"+3*e+\"H\"+-e+\"V\"+e+\"H\"+-3*e+\"Z\"},diamond:function(t){var e=Math.sqrt(t/(2*Fu)),n=e*Fu;return\"M0,\"+-e+\"L\"+n+\",0 0,\"+e+\" \"+-n+\",0Z\"},square:function(t){var e=Math.sqrt(t)/2;return\"M\"+-e+\",\"+-e+\"L\"+e+\",\"+-e+\" \"+e+\",\"+e+\" \"+-e+\",\"+e+\"Z\"},\"triangle-down\":function(t){var e=Math.sqrt(t/Nu),n=e*Nu/2;return\"M0,\"+n+\"L\"+e+\",\"+-n+\" \"+-e+\",\"+-n+\"Z\"},\"triangle-up\":function(t){var e=Math.sqrt(t/Nu),n=e*Nu/2;return\"M0,\"+-n+\"L\"+e+\",\"+n+\" \"+-e+\",\"+n+\"Z\"}});oo.svg.symbolTypes=Ru.keys();var Nu=Math.sqrt(3),Fu=Math.tan(30*Do);Eo.transition=function(t){for(var e,n,i=Lu||++Uu,r=Ja(t),a=[],o=zu||{time:Date.now(),ease:Ti,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&Qa(n,c,r,i,o),e.push(n)}return Ya(a,r,i)},Eo.interrupt=function(t){return this.each(null==t?Du:Ga(Ja(t)))};var Lu,zu,Du=Ga(Ja()),$u=[],Uu=0;$u.call=Eo.call,$u.empty=Eo.empty,$u.node=Eo.node,$u.size=Eo.size,oo.transition=function(t,e){return t&&t.transition?Lu?t.transition(e):t:oo.selection().transition(t)},oo.transition.prototype=$u,$u.select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=j(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(i=l[c])&&(n=t.call(i,i.__data__,c,s))?(\"__data__\"in i&&(n.__data__=i.__data__),Qa(n,c,a,r,i[a][r]),e.push(n)):e.push(null)}return Ya(o,a,r)},$u.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,u=[];t=R(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,d=h.length;++f<d;)if(i=h[f]){a=i[s][o],n=t.call(i,i.__data__,f,l),u.push(e=[]);for(var p=-1,_=n.length;++p<_;)(r=n[p])&&Qa(r,p,s,o,a),e.push(r)}return Ya(u,s,o)},$u.filter=function(t){var e,n,i,r=[];\"function\"!=typeof t&&(t=q(t));for(var a=0,o=this.length;o>a;a++){r.push(e=[]);for(var n=this[a],s=0,u=n.length;u>s;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return Ya(r,this.namespace,this.id)},$u.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):Y(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},$u.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+=\"\",function(){var e,n=this.getAttribute(s);return n!==t&&(e=o(n,t),function(t){this.setAttribute(s,e(t))})})}function a(t){return null==t?i:(t+=\"\",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=o(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var o=\"transform\"==t?qi:ki,s=oo.ns.qualify(t);return Xa(this,\"attr.\"+t,e,s.local?a:r)},$u.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=oo.ns.qualify(t);return this.tween(\"attr.\"+t,r.local?i:n)},$u.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+=\"\",function(){var i,r=o(this).getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=ki(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var a=arguments.length;if(3>a){if(\"string\"!=typeof t){2>a&&(e=\"\");for(n in t)this.style(n,t[n],e);return this}n=\"\"}return Xa(this,\"style.\"+t,e,r)},$u.styleTween=function(t,e,n){function i(i,r){var a=e.call(this,i,r,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=\"\"),this.tween(\"style.\"+t,i)},$u.text=function(t){return Xa(this,\"text\",t,Za)},$u.remove=function(){var t=this.namespace;return this.each(\"end.transition\",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},$u.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:(\"function\"!=typeof t&&(t=oo.ease.apply(oo,arguments)),Y(this,function(i){i[n][e].ease=t}))},$u.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:Y(this,\"function\"==typeof t?function(i,r,a){i[n][e].delay=+t.call(i,i.__data__,r,a)}:(t=+t,function(i){i[n][e].delay=t}))},$u.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:Y(this,\"function\"==typeof t?function(i,r,a){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,a))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},$u.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=zu,a=Lu;try{Lu=n,Y(this,function(e,r,a){zu=e[i][n],t.call(e,e.__data__,r,a)})}finally{zu=r,Lu=a}}else Y(this,function(r){var a=r[i][n];(a.event||(a.event=oo.dispatch(\"start\",\"end\",\"interrupt\"))).on(t,e)});return this},$u.transition=function(){for(var t,e,n,i,r=this.id,a=++Uu,o=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var e=this[u],c=0,h=e.length;h>c;c++)(n=e[c])&&(i=n[o][r],Qa(n,c,o,a,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Ya(s,o,a)},oo.svg.axis=function(){function t(t){t.each(function(){var t,l=oo.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,d=null==e?h.tickFormat?h.tickFormat.apply(h,s):k:e,p=l.selectAll(\".tick\").data(f,h),_=p.enter().insert(\"g\",\".domain\").attr(\"class\",\"tick\").style(\"opacity\",jo),v=oo.transition(p.exit()).style(\"opacity\",jo).remove(),g=oo.transition(p.order()).style(\"opacity\",1),m=Math.max(r,0)+o,y=Br(h),b=l.selectAll(\".domain\").data([0]),x=(b.enter().append(\"path\").attr(\"class\",\"domain\"),oo.transition(b));_.append(\"line\"),_.append(\"text\");var w,M,C,E,S=_.select(\"line\"),I=g.select(\"line\"),O=p.select(\"text\").text(d),T=_.select(\"text\"),A=g.select(\"text\"),P=\"top\"===i||\"left\"===i?-1:1;if(\"bottom\"===i||\"top\"===i?(t=Ka,w=\"x\",C=\"y\",M=\"x2\",E=\"y2\",O.attr(\"dy\",0>P?\"0em\":\".71em\").style(\"text-anchor\",\"middle\"),x.attr(\"d\",\"M\"+y[0]+\",\"+P*a+\"V0H\"+y[1]+\"V\"+P*a)):(t=to,w=\"y\",C=\"x\",M=\"y2\",E=\"x2\",O.attr(\"dy\",\".32em\").style(\"text-anchor\",0>P?\"end\":\"start\"),x.attr(\"d\",\"M\"+P*a+\",\"+y[0]+\"H0V\"+y[1]+\"H\"+P*a)),S.attr(E,P*r),T.attr(C,P*m),I.attr(M,0).attr(E,P*r),A.attr(w,0).attr(C,P*m),h.rangeBand){var j=h,R=j.rangeBand()/2;c=h=function(t){return j(t)+R}}else c.rangeBand?c=h:v.call(t,h,c);_.call(t,c,h),g.call(t,h,h)})}var e,n=oo.scale.linear(),i=Hu,r=6,a=6,o=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Bu?e+\"\":Hu,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,a=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Hu=\"bottom\",Bu={top:1,right:1,bottom:1,left:1};oo.svg.brush=function(){function t(a){a.each(function(){var a=oo.select(this).style(\"pointer-events\",\"all\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\").on(\"mousedown.brush\",r).on(\"touchstart.brush\",r),o=a.selectAll(\".background\").data([0]);o.enter().append(\"rect\").attr(\"class\",\"background\").style(\"visibility\",\"hidden\").style(\"cursor\",\"crosshair\"),a.selectAll(\".extent\").data([0]).enter().append(\"rect\").attr(\"class\",\"extent\").style(\"cursor\",\"move\");var s=a.selectAll(\".resize\").data(_,k);s.exit().remove(),s.enter().append(\"g\").attr(\"class\",function(t){return\"resize \"+t}).style(\"cursor\",function(t){return Wu[t]}).append(\"rect\").attr(\"x\",function(t){return/[ew]$/.test(t)?-3:null}).attr(\"y\",function(t){return/^[ns]/.test(t)?-3:null}).attr(\"width\",6).attr(\"height\",6).style(\"visibility\",\"hidden\"),s.style(\"display\",t.empty()?\"none\":null);var u,h=oo.transition(a),f=oo.transition(o);l&&(u=Br(l),f.attr(\"x\",u[0]).attr(\"width\",u[1]-u[0]),n(h)),c&&(u=Br(c),f.attr(\"y\",u[0]).attr(\"height\",u[1]-u[0]),i(h)),e(h)})}function e(t){t.selectAll(\".resize\").attr(\"transform\",function(t){return\"translate(\"+h[+/e$/.test(t)]+\",\"+f[+/^s/.test(t)]+\")\"})}function n(t){t.select(\".extent\").attr(\"x\",h[0]),t.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\",h[1]-h[0])}function i(t){t.select(\".extent\").attr(\"y\",f[0]),t.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\",f[1]-f[0])}function r(){function r(){32==oo.event.keyCode&&(I||(y=null,A[0]-=h[1],A[1]-=f[1],I=2),O())}function _(){32==oo.event.keyCode&&2==I&&(A[0]+=h[1],A[1]+=f[1],I=0,O())}function v(){var t=oo.mouse(x),r=!1;b&&(t[0]+=b[0],t[1]+=b[1]),I||(oo.event.altKey?(y||(y=[(h[0]+h[1])/2,(f[0]+f[1])/2]),A[0]=h[+(t[0]<y[0])],A[1]=f[+(t[1]<y[1])]):y=null),E&&g(t,l,0)&&(n(M),r=!0),S&&g(t,c,1)&&(i(M),r=!0),r&&(e(M),k({type:\"brush\",mode:I?\"move\":\"resize\"}))}function g(t,e,n){var i,r,o=Br(e),u=o[0],l=o[1],c=A[n],_=n?f:h,v=_[1]-_[0];return I&&(u-=c,l-=v+c),i=(n?p:d)?Math.max(u,Math.min(l,t[n])):t[n],I?r=(i+=c)+v:(y&&(c=Math.max(u,Math.min(l,2*y[n]-i))),i>c?(r=i,i=c):r=c),_[0]!=i||_[1]!=r?(n?s=null:a=null,_[0]=i,_[1]=r,!0):void 0}function m(){v(),M.style(\"pointer-events\",\"all\").selectAll(\".resize\").style(\"display\",t.empty()?\"none\":null),oo.select(\"body\").style(\"cursor\",null),P.on(\"mousemove.brush\",null).on(\"mouseup.brush\",null).on(\"touchmove.brush\",null).on(\"touchend.brush\",null).on(\"keydown.brush\",null).on(\"keyup.brush\",null),T(),k({type:\"brushend\"})}var y,b,x=this,w=oo.select(oo.event.target),k=u.of(x,arguments),M=oo.select(x),C=w.datum(),E=!/^(n|s)$/.test(C)&&l,S=!/^(e|w)$/.test(C)&&c,I=w.classed(\"extent\"),T=tt(x),A=oo.mouse(x),P=oo.select(o(x)).on(\"keydown.brush\",r).on(\"keyup.brush\",_);if(oo.event.changedTouches?P.on(\"touchmove.brush\",v).on(\"touchend.brush\",m):P.on(\"mousemove.brush\",v).on(\"mouseup.brush\",m),M.interrupt().selectAll(\"*\").interrupt(),I)A[0]=h[0]-A[0],A[1]=f[0]-A[1];else if(C){var j=+/w$/.test(C),R=+/^n/.test(C);b=[h[1-j]-A[0],f[1-R]-A[1]],A[0]=h[j],A[1]=f[R]}else oo.event.altKey&&(y=A.slice());M.style(\"pointer-events\",\"none\").selectAll(\".resize\").style(\"display\",null),oo.select(\"body\").style(\"cursor\",w.style(\"cursor\")),k({type:\"brushstart\"}),v()}var a,s,u=A(t,\"brushstart\",\"brush\",\"brushend\"),l=null,c=null,h=[0,0],f=[0,0],d=!0,p=!0,_=Vu[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:h,y:f,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Lu?oo.select(this).transition().each(\"start.brush\",function(){a=n.i,s=n.j,h=n.x,f=n.y,t({type:\"brushstart\"})}).tween(\"brush:brush\",function(){var n=Mi(h,e.x),i=Mi(f,e.y);return a=s=null,function(r){h=e.x=n(r),f=e.y=i(r),t({type:\"brush\",mode:\"resize\"})}}).each(\"end.brush\",function(){a=e.i,s=e.j,t({type:\"brush\",mode:\"resize\"}),t({type:\"brushend\"})}):(t({type:\"brushstart\"}),t({type:\"brush\",mode:\"resize\"}),t({type:\"brushend\"}))})},t.x=function(e){return arguments.length?(l=e,_=Vu[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,_=Vu[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],p=!!e[1]):l?d=!!e:c&&(p=!!e),t):l&&c?[d,p]:l?d:c?p:null},t.extent=function(e){var n,i,r,o,u;return arguments.length?(l&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(u=n,n=i,i=u),(n!=h[0]||i!=h[1])&&(h=[n,i])),c&&(r=e[0],o=e[1],l&&(r=r[1],o=o[1]),s=[r,o],c.invert&&(r=c(r),o=c(o)),r>o&&(u=r,r=o,o=u),(r!=f[0]||o!=f[1])&&(f=[r,o])),t):(l&&(a?(n=a[0],i=a[1]):(n=h[0],i=h[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(u=n,n=i,i=u))),c&&(s?(r=s[0],o=s[1]):(r=f[0],o=f[1],c.invert&&(r=c.invert(r),o=c.invert(o)),r>o&&(u=r,r=o,o=u))),l&&c?[[n,r],[i,o]]:l?[n,i]:c&&[r,o])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],a=s=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!c&&f[0]==f[1]},oo.rebind(t,u,\"on\")};var Wu={n:\"ns-resize\",e:\"ew-resize\",s:\"ns-resize\",w:\"ew-resize\",nw:\"nwse-resize\",ne:\"nesw-resize\",se:\"nwse-resize\",sw:\"nesw-resize\"},Vu=[[\"n\",\"e\",\"s\",\"w\",\"nw\",\"ne\",\"se\",\"sw\"],[\"e\",\"w\"],[\"n\",\"s\"],[]],qu=hs.format=gs.timeFormat,Gu=qu.utc,Yu=Gu(\"%Y-%m-%dT%H:%M:%S.%LZ\");qu.iso=Date.prototype.toISOString&&+new Date(\"2000-01-01T00:00:00.000Z\")?eo:Yu,eo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},eo.toString=Yu.toString,hs.second=Wt(function(t){return new fs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),hs.seconds=hs.second.range,hs.seconds.utc=hs.second.utc.range,hs.minute=Wt(function(t){return new fs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),hs.minutes=hs.minute.range,hs.minutes.utc=hs.minute.utc.range,hs.hour=Wt(function(t){var e=t.getTimezoneOffset()/60;return new fs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),hs.hours=hs.hour.range,hs.hours.utc=hs.hour.utc.range,hs.month=Wt(function(t){return t=hs.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),hs.months=hs.month.range,hs.months.utc=hs.month.utc.range;var Xu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zu=[[hs.second,1],[hs.second,5],[hs.second,15],[hs.second,30],[hs.minute,1],[hs.minute,5],[hs.minute,15],[hs.minute,30],[hs.hour,1],[hs.hour,3],[hs.hour,6],[hs.hour,12],[hs.day,1],[hs.day,2],[hs.week,1],[hs.month,1],[hs.month,3],[hs.year,1]],Ju=qu.multi([[\".%L\",function(t){return t.getMilliseconds()}],[\":%S\",function(t){return t.getSeconds()}],[\"%I:%M\",function(t){return t.getMinutes()}],[\"%I %p\",function(t){return t.getHours()}],[\"%a %d\",function(t){return t.getDay()&&1!=t.getDate()}],[\"%b %d\",function(t){return 1!=t.getDate()}],[\"%B\",function(t){return t.getMonth()}],[\"%Y\",je]]),Qu={range:function(t,e,n){return oo.range(Math.ceil(t/n)*n,+e,n).map(io)},floor:k,ceil:k};Zu.year=hs.year,hs.scale=function(){return no(oo.scale.linear(),Zu,Ju)};var Ku=Zu.map(function(t){return[t[0].utc,t[1]]}),tl=Gu.multi([[\".%L\",function(t){return t.getUTCMilliseconds()}],[\":%S\",function(t){return t.getUTCSeconds()}],[\"%I:%M\",function(t){return t.getUTCMinutes()}],[\"%I %p\",function(t){return t.getUTCHours()}],[\"%a %d\",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[\"%b %d\",function(t){return 1!=t.getUTCDate()}],[\"%B\",function(t){return t.getUTCMonth()}],[\"%Y\",je]]);Ku.year=hs.year.utc,hs.scale.utc=function(){return no(oo.scale.linear(),Ku,tl)},oo.text=Pt(function(t){return t.responseText}),oo.json=function(t,e){return jt(t,\"application/json\",ro,e)},oo.html=function(t,e){return jt(t,\"text/html\",ao,e)},oo.xml=Pt(function(t){return t.responseXML}),i=oo,r=\"function\"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)),this.d3=oo}()}).call(e,n(6))},function(t,e){t.exports=\" <div class=image-matrix-view id=image-matrix-div> </div> \"},function(t,e){t.exports=' <div class=main-top :style=mainTopStyle _v-c16713a6=\"\"> <div id=event-list :style=eventListStyle _v-c16713a6=\"\"> <event-view-list _v-c16713a6=\"\"></event-view-list> </div> <div id=icon-list :style=iconListStyle _v-c16713a6=\"\"> <icon-list-view _v-c16713a6=\"\"></icon-list-view> </div> <div id=image-matrix :style=mainTopStyle _v-c16713a6=\"\"> <image-matrix-view _v-c16713a6=\"\"></image-matrix-view> </div> </div> '},function(t,e,n){var i,r;n(118),i=n(120),r=n(190),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(119);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".main-bottom[_v-79114229]{position:relative;width:100%;visibility:hidden}.main-bottom #timeline[_v-79114229]{position:absolute;left:25%;width:75%;height:10%;border:1px solid #639}.main-bottom #image-tagged[_v-79114229]{position:absolute;left:0;width:25%;height:66.7%;border:1px solid #639}.main-bottom #image-comparison[_v-79114229]{position:absolute;left:25%;width:62.5%;height:66.7%;border:1px solid #639}.main-bottom #distribution-histogram[_v-79114229]{position:absolute;left:87.5%;width:12.5%;height:66.6%;border:1px solid #639}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(121),a=i(r),o=n(175),s=i(o),u=n(180),l=i(u),c=n(185),h=i(c),f=n(36);e.default={vuex:{getters:{pageSize:f.pageSize}},data:function(){return{tH2:33}},components:{ImageTaggedView:a.default,ImageComparisonView:s.default,DistributionHistogramView:l.default,TimelineView:h.default},computed:{mainBottomStyle:function(){var t={},e=this.pageSize.pageHeight+\"px\";return t.height=e,t},imageTaggedStyle:function(){var t={};return t.height=2*this.pageSize.pageHeight/3+\"px\",t.width=.25*this.pageSize.pageWidth+\"px\",t},imageComparisonStyle:function(){var t={};return t.top=this.tH2+\"px\",t.height=2*this.pageSize.pageHeight/3-this.tH2+\"px\",t.width=.625*this.pageSize.pageWidth+\"px\",t},DistributionHistogramViewStyle:function(){var t={};return t.top=this.tH2+\"px\",t.height=2/3*this.pageSize.pageHeight-this.tH2+\"px\",t.width=.125*this.pageSize.pageWidth+\"px\",t},TimelineViewStyle:function(){var t={};return t.height=this.tH2+\"px\",t.width=.75*this.pageSize.pageWidth+\"px\",t}},ready:function(){}}},function(t,e,n){var i,r;n(122),i=n(124),r=n(174),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(123);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".image-tagged-view-main[_v-da5218fa]{border:1px solid gray;box-sizing:border-box;padding:0 8px}.image-tagged-view-main .image-tagged-menu[_v-da5218fa]{height:30px;margin:0 auto;line-height:30px}.image-tagged-view-main .image-tagged-menu li[_v-da5218fa]{list-style:none;float:left;width:30px;text-align:center}.image-tagged-view-main .image-tagged-menu li i[_v-da5218fa]{color:#000}.image-tagged-view-main .image-tagged-menu .active[_v-da5218fa],.image-tagged-view-main .image-tagged-menu li[_v-da5218fa]:hover{background:#324057}.image-tagged-view-main .select-tagged-menu[_v-da5218fa]{position:relative}.image-tagged-view-main .selectedInform[_v-da5218fa]{font-size:xx-small}.image-tagged-view-main #image_canvas[_v-da5218fa]{position:absolute;left:0;z-index:1}.image-tagged-view-main #region_canvas[_v-da5218fa]{position:absolute;left:0;z-index:2}.image-tagged-view-main .del-padding[_v-da5218fa]{padding:0}#attributes-panel[_v-da5218fa]{position:absolute;z-index:10;width:100%;max-height:30%;overflow:auto;background-color:#fff;border:1px solid #324057;padding:0;padding-bottom:2em;font-size:small;left:100%}#attributes-panel .error-msg[_v-da5218fa]{text-align:center;width:100%}#attributes-panel .close[_v-da5218fa]{display:block;height:30px;width:100%;position:relative;padding:0;margin:0}.image-time[_v-da5218fa]{position:absolute;width:100%;top:96%;text-align:center;font-size:12px}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(125),a=i(r),o=n(53),s=i(o),u=n(6),l=i(u),c=n(127),h=i(c),f=n(165),d=i(f),p=n(36),_=n(103),v=n(46),g=i(v),m=n(17),y=n(173),b=i(y);e.default={vuex:{getters:{pageSize:p.pageSize,selectedImage:p.selectedImage},actions:{addFeatures:_.addFeatures,exportArea:_.exportArea,createSelection:_.createSelection,activeRegionSelectionImages:_.activeRegionSelectionImages}},data:function(){return{isShowSelect:!0,selectedTime:\"\",selectedChannels:\"\",$$renderIns:null,selectedId:0,imageIndex:0,imageName:null,willShow:!1,featureIndex:0,imageMenu:[{name:\"选择\",icon:\"uk-icon-mouse-pointer\",index:0,image:\"../../../assets/images/选择.png\"},{name:\"放大\",icon:\"uk-icon-search-plus\",index:1,image:\"../../../assets/images/放大.png\"},{name:\"缩小\",icon:\"uk-icon-search-minus\",index:2,image:\"../../../assets/images/缩小.png\"},{name:\"平移\",icon:\"uk-icon-arrows\",index:3,image:\"../../../assets/images/移动.png\"},{name:\"套索\",icon:\"uk-icon-object-ungroup\",index:4,image:\"../../../assets/images/套索.png\"},{name:\"标记\",icon:\"uk-icon-text-height\",index:5,image:\"../../../assets/images/文字.png\"}],tableHeader:[{name:\"#\"},{name:\"Type\"}],tableBody:[],$regions:{},tableIndex:[],featuresObj:(0,s.default)(g.default.defaultFeaturesObj),featureName:\"Add New\",imageTime:\"\",selectRegionTableBody:[],$selectRegionsObs:{},selectIndex:-1}},watch:{pageSize:{handler:function(t,e){this.$renderIns?(this.$renderIns.updateDivContainer({image_real_width:Math.round((0,l.default)(\"#image-tagged\").width()),image_real_height:Math.round((0,l.default)(\"#image-tagged\").height())}),this.$renderIns.goUpdate()):(this.init(),this.$renderIns.init({image_canvas_id:\"image_canvas\",region_canvas_id:\"region_canvas\",image_real_width:Math.round((0,l.default)(\"#image-tagged\").width()),image_real_height:Math.round((0,l.default)(\"#image-tagged\").height())}),this.$renderIns.addEventListenerMouseup(),this.$renderIns.addEventListenerMousedown(),this.$renderIns.addEventListenerMousemove(),this.$renderIns.addEventListenerMouseover())},deep:!0},selectedImage:{handler:function(t,e){var n=this.selectedImage.split(\"_\")[0];if(n.length>5&&(this.featuresObj=(0,s.default)(g.default.featureColors[n])),window.currentSelectionChannel=n,\"undefined\"!=typeof this.selectedImage&&null!=this.selectedImage){this.imageTime=this.selectedImage.split(\"_\").slice(1).join(\"_\");var i=\"../../../data/\"+this.selectedImage.split(\"_\")[0]+\"/\"+this.selectedImage+\".png\";if(this.$renderIns){var r=this.$renderIns.loadStoreLocalImg(i,this.selectedImage);console.log(\"imgIndex\",r),console.log(\"this._via_img_metadata\",this.$renderIns._via_img_metadata[this.selectedImage]),this.imageIndex=r,this.$renderIns.showImage(this.imageIndex),this.imageName=this.selectedImage}}},deep:!0}},computed:{isShowTable:function(){return 0===(0,s.default)(this.$regions).length||0===(0,s.default)(this.$regions.regions).length},isShowSelectTable:function(){return console.log(\"this.$renderIns._via_user_sel_region_id\",this.$renderIns._via_user_sel_region_id),this.$renderIns._via_user_sel_region_id===-1}},methods:{chooseRegionType:function(t){var e=JSON.parse((0,a.default)(t)),n=this.selectedImage.split(\"_\")[0],i={type:e,color:g.default.featureColors[n][e]};if(0!==this.selectRegionTableBody.length){this.$renderIns.updateCurrentSelectRegion(i);var r=this.selectIndex;this.$regions=JSON.parse(this.$renderIns.getMetaData(r)),this.exportArea([this.$regions.regions[r].shape_attributes.all_points_x,this.$regions.regions[r].shape_attributes.all_points_y])}},getMenuMsg:function(t){if(this.selectedId!==t&&(this.selectedId=t,0!==this.selectedId&&4!==this.selectedId))return 5===this.selectedId&&(this.selectIndex=this.$renderIns._via_user_sel_region_id,this.willShow=!0,this.selectIndex!==-1&&(this.selectRegionTableBody=[],this.selectRegionTableBody.push({value:this.selectIndex+1}),this.selectRegionTableBody.push({value:this.$renderIns.getSelectRegionValue()}))),1===this.selectedId?void(this.$renderIns&&this.$renderIns.zoom_in()):void(2===this.selectedId&&this.$renderIns&&this.$renderIns.zoom_out())},loadStart:function(){},init:function(){this.$renderIns=new d.default.renders.GraphTag({selector:this.$els.graph})},closeTag:function(){this.willShow=!1,this.selectedId=0},goSubmit:function(){this.selectedId=0,this.willShow=!1;var t=this.selectIndex;this.$regions=JSON.parse(this.$renderIns.getMetaData(t)),console.log(\"this.$regions\",this.$regions),this.exportArea([this.$regions.regions[t].shape_attributes.all_points_x,this.$regions.regions[t].shape_attributes.all_points_y]),this.createSelection(this.selectedImage,this.$regions),this.getSelectedRegionImagesURL()},addNewFeature:function(){this.tableHeader.push({name:this.featureName});for(var t=0;t<this.tableBody.length;t++)this.tableBody[t].push({value:\"\"});this.featureName=\"Add New\"},getSelectedRegionImagesURL:function(){var t=this.selectRegionTableBody[0].value-1;if(!(t<0)){var e=g.default.date,n=this.selectedImage.split(\"_\"),i=g.default.baseDataPath+n[0]+\"/\",r=e.map(function(t){return i+n[0]+\"_\"+t+\".png\"}),a=(0,m.getBoundaryToArray)(this.$regions.regions[t].shape_attributes.all_points_x,this.$regions.regions[t].shape_attributes.all_points_y),o=\"#D6E2D7\",s=[];r.forEach(function(t){var e=new b.default;e.init({bbox:(0,m.getBoundary)(a)}),e.getAllCanvas(),e.setColor(o),s.push(e.updateSourceImageAndCutImage(t,a))});var u={};u[t]={};var l={};h.default.all(s).then(function(i){i.forEach(function(t,i){var r=n[0]+\"_\"+e[i];l[r]=t}),u[t]=l,this.activeRegionSelectionImages(this.selectedImage,u),this.featureIndex=this.featureIndex+1,this.addFeatures({featureName:\"feature\"+this.featureIndex,imageName:this.selectedImage,imageUrl:l,selectedRegions:u})}.bind(this))}}},ready:function(){this.$selectRegionsObs={}}}},function(t,e,n){t.exports={default:n(126),__esModule:!0}},function(t,e,n){var i=n(75),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){\"use strict\";function i(){try{Promise===a&&(Promise=r)}catch(t){}return a}var r;\"undefined\"!=typeof Promise&&(r=Promise);var a=n(128)();a.noConflict=i,t.exports=a},function(t,e,n){(function(e){\"use strict\";t.exports=function(){function i(){}function r(t,e){if(null==t||t.constructor!==a)throw new y(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");if(\"function\"!=typeof e)throw new y(\"expecting a function but got \"+p.classString(e))}function a(t){t!==x&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent(\"promiseCreated\",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function u(t){var e=new a(x);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var l,c=function(){return new y(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\")},h=function(){return new a.PromiseInspection(this._target())},f=function(t){return a.reject(new y(t))},d={},p=n(129);l=p.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},p.notEnumerableProp(a,\"_getDomain\",l);var _=n(130),v=n(131),g=new v;_.defineProperty(a,\"_async\",{value:g});var m=n(136),y=a.TypeError=m.TypeError;a.RangeError=m.RangeError;var b=a.CancellationError=m.CancellationError;a.TimeoutError=m.TimeoutError,a.OperationalError=m.OperationalError,a.RejectionError=m.OperationalError,a.AggregateError=m.AggregateError;var x=function(){},w={},k={},M=n(137)(a,x),C=n(138)(a,x,M,f,i),E=n(139)(a),S=E.create,I=n(140)(a,E),O=(I.CapturedTrace,n(141)(a,M,k)),T=n(142)(k),A=n(143),P=p.errorObj,j=p.tryCatch;return a.prototype.toString=function(){return\"[object Promise]\"},a.prototype.caught=a.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,i=new Array(e-1),r=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!p.isObject(a))return f(\"Catch statement predicate: expecting an object but got \"+p.classString(a));i[r++]=a}return i.length=r,t=arguments[n],this.then(void 0,T(i,t,this))}return this.then(void 0,t)},a.prototype.reflect=function(){return this._then(h,h,void 0,this,void 0)},a.prototype.then=function(t,e){if(I.warnings()&&arguments.length>0&&\"function\"!=typeof t&&\"function\"!=typeof e){var n=\".then() only accepts functions but was passed: \"+p.classString(t);arguments.length>1&&(n+=\", \"+p.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},a.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},a.prototype.spread=function(t){return\"function\"!=typeof t?f(\"expecting a function but got \"+p.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},a.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},a.prototype.all=function(){return arguments.length>0&&this._warn(\".all() was passed arguments but it does not take any\"),new C(this).promise()},a.prototype.error=function(t){return this.caught(p.originatesFromRejection,t)},a.getNewLibraryCopy=t.exports,a.is=function(t){return t instanceof a},a.fromNode=a.fromCallback=function(t){var e=new a(x);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=j(t)(A(e,n));return i===P&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},a.all=function(t){return new C(t).promise()},a.cast=function(t){var e=M(t);return e instanceof a||(e=new a(x),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},a.resolve=a.fulfilled=a.cast,a.reject=a.rejected=function(t){var e=new a(x);return e._captureStackTrace(),e._rejectCallback(t,!0),e},a.setScheduler=function(t){if(\"function\"!=typeof t)throw new y(\"expecting a function but got \"+p.classString(t));return g.setScheduler(t)},a.prototype._then=function(t,e,n,i,r){var o=void 0!==r,s=o?r:new a(x),u=this._target(),c=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent(\"promiseChained\",this,s));var h=l();if(0!==(50397184&c)){var f,d,_=u._settlePromiseCtx;0!==(33554432&c)?(d=u._rejectionHandler0,f=t):0!==(16777216&c)?(d=u._fulfillmentHandler0,f=e,u._unsetRejectionIsUnhandled()):(_=u._settlePromiseLateCancellationObserver,d=new b(\"late cancellation observer\"),u._attachExtraTrace(d),f=e),g.invoke(_,u,{handler:null===h?f:\"function\"==typeof f&&p.domainBind(h,f),promise:s,receiver:i,value:d})}else u._addCallbacks(t,e,s,i,h);return s},a.prototype._length=function(){return 65535&this._bitField},a.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},a.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},a.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},a.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent(\"promiseFulfilled\",this)},a.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent(\"promiseRejected\",this)},a.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent(\"promiseResolved\",this)},a.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},a.prototype._isFinal=function(){return(4194304&this._bitField)>0},a.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},a.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent(\"promiseCancelled\",this)},a.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},a.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},a.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==d)return void 0===e&&this._isBound()?this._boundValue():e},a.prototype._promiseAt=function(t){\nreturn this[4*t-4+2]},a.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},a.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},a.prototype._boundValue=function(){},a.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,i=t._promise0,r=t._receiverAt(0);void 0===r&&(r=d),this._addCallbacks(e,n,i,r,null)},a.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),r=t._promiseAt(e),a=t._receiverAt(e);void 0===a&&(a=d),this._addCallbacks(n,i,r,a,null)},a.prototype._addCallbacks=function(t,e,n,i,r){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=n,this._receiver0=i,\"function\"==typeof t&&(this._fulfillmentHandler0=null===r?t:p.domainBind(r,t)),\"function\"==typeof e&&(this._rejectionHandler0=null===r?e:p.domainBind(r,e));else{var o=4*a-4;this[o+2]=n,this[o+3]=i,\"function\"==typeof t&&(this[o+0]=null===r?t:p.domainBind(r,t)),\"function\"==typeof e&&(this[o+1]=null===r?e:p.domainBind(r,e))}return this._setLength(a+1),a},a.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},a.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var n=M(t,this);if(!(n instanceof a))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i===this)return void this._reject(c());var r=i._bitField;if(0===(50397184&r)){var o=this._length();o>0&&i._migrateCallback0(this);for(var s=1;s<o;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&r))this._fulfill(i._value());else if(0!==(16777216&r))this._reject(i._reason());else{var u=new b(\"late cancellation observer\");i._attachExtraTrace(u),this._reject(u)}}},a.prototype._rejectCallback=function(t,e,n){var i=p.ensureErrorObject(t),r=i===t;if(!r&&!n&&I.warnings()){var a=\"a promise was rejected with a non-error: \"+p.classString(t);this._warn(a,!0)}this._attachExtraTrace(i,!!e&&r),this._reject(t)},a.prototype._resolveFromExecutor=function(t){if(t!==x){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==i&&e._rejectCallback(i,!0)}},a.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if(0===(65536&r)){i._pushContext();var a;e===w?n&&\"number\"==typeof n.length?a=j(t).apply(this._boundValue(),n):(a=P,a.e=new y(\"cannot .spread() a non-array: \"+p.classString(n))):a=j(t).call(e,n);var o=i._popContext();r=i._bitField,0===(65536&r)&&(a===k?i._reject(n):a===P?i._rejectCallback(a.e,!1):(I.checkForgottenReturns(a,o,\"\",i,this),i._resolveCallback(a)))}},a.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},a.prototype._followee=function(){return this._rejectionHandler0},a.prototype._setFollowee=function(t){this._rejectionHandler0=t},a.prototype._settlePromise=function(t,e,n,r){var o=t instanceof a,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(o&&t._invokeInternalOnCancel(),n instanceof O&&n.isFinallyHandler()?(n.cancelPromise=t,j(e).call(n,r)===P&&t._reject(P.e)):e===h?t._fulfill(h.call(n)):n instanceof i?n._promiseCancelled(t):o||t instanceof C?t._cancel():n.cancel()):\"function\"==typeof e?o?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof i?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(u&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(r):t._reject(r))},a.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,r=t.value;\"function\"==typeof e?n instanceof a?this._settlePromiseFromHandler(e,i,r,n):e.call(i,r,n):n instanceof a&&n._reject(r)},a.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},a.prototype._settlePromise0=function(t,e,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,r,e)},a.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},a.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():g.settlePromises(this))}},a.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?g.fatalError(t,p.isNode):void((65535&e)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},a.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,a,e)}},a.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,a,e)}},a.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t),this._fulfillPromises(e,i)}this._setLength(0)}this._clearCancellationData()},a.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},a.defer=a.pending=function(){I.deprecated(\"Promise.defer\",\"new Promise\");var t=new a(x);return{promise:t,resolve:o,reject:s}},p.notEnumerableProp(a,\"_makeSelfResolutionError\",c),n(144)(a,x,M,f,I),n(145)(a,x,M,I),n(146)(a,C,f,I),n(147)(a),n(148)(a),n(149)(a,C,M,x,g,l),a.Promise=a,a.version=\"3.5.0\",n(150)(a,C,f,M,x,I),n(151)(a),n(152)(a,f,M,S,x,I),n(153)(a,x,I),n(154)(a,f,x,M,i,I),n(155)(a),n(156)(a,x),n(157)(a,C,M,f),n(158)(a,x,M,f),n(159)(a,C,f,M,x,I),n(160)(a,C,I),n(161)(a,C,f),n(162)(a,x),n(163)(a,x),n(164)(a),p.toFastProperties(a),p.toFastProperties(a.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new a(x)),I.setBounds(v.firstLineError,p.lastLineError),a}}).call(e,n(10))},function(t,e,n){(function(e,i){\"use strict\";function r(){try{var t=T;return T=null,t.apply(this,arguments)}catch(t){return O.e=t,O}}function a(t){return T=t,r}function o(t){return null==t||t===!0||t===!1||\"string\"==typeof t||\"number\"==typeof t}function s(t){return\"function\"==typeof t||\"object\"==typeof t&&null!==t}function u(t){return o(t)?new Error(g(t)):t}function l(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=t[n];return r[n]=e,r}function c(t,e,n){if(!S.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function h(t,e,n){if(o(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return S.defineProperty(t,e,i),t}function f(t){throw t}function d(t){try{if(\"function\"==typeof t){var e=S.names(t.prototype),n=S.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&\"constructor\"===e[0]),r=R.test(t+\"\")&&S.names(t).length>0;if(n||i||r)return!0}return!1}catch(t){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return N.test(t)}function v(t,e,n){for(var i=new Array(t),r=0;r<t;++r)i[r]=e+r+n;return i}function g(t){try{return t+\"\"}catch(t){return\"[no string representation]\"}}function m(t){return null!==t&&\"object\"==typeof t&&\"string\"==typeof t.message&&\"string\"==typeof t.name}function y(t){try{h(t,\"isOperational\",!0)}catch(t){}}function b(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function x(t){return m(t)&&S.propertyIsWritable(t,\"stack\")}function w(t){return{}.toString.call(t)}function k(t,e,n){for(var i=S.names(t),r=0;r<i.length;++r){var a=i[r];if(n(a))try{S.defineProperty(e,a,S.getDescriptor(t,a))}catch(t){}}}function M(t){return $?i.env[t]:void 0}function C(){if(\"function\"==typeof Promise)try{var t=new Promise(function(){});if(\"[object Promise]\"==={}.toString.call(t))return Promise}catch(t){}}function E(t,e){return t.bind(e)}var S=n(130),I=\"undefined\"==typeof navigator,O={e:{}},T,A=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:\"undefined\"!=typeof e?e:void 0!==this?this:null,P=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)i.call(e.prototype,n)&&\"$\"!==n.charAt(n.length-1)&&(this[n+\"$\"]=e.prototype[n])}var i={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},j=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(S.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],r=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return i}for(var o=0;o<a.length;++o){var s=a[o];if(!r[s]){r[s]=!0;var u=Object.getOwnPropertyDescriptor(t,s);null!=u&&null==u.get&&null==u.set&&i.push(s)}}t=S.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var a in n)if(i.call(n,a))r.push(a);else{for(var o=0;o<t.length;++o)if(i.call(t[o],a))continue t;r.push(a)}return r}}(),R=/this\\s*\\.\\s*\\S+\\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return\"stack\"in new Error?function(t){return x(t)?t:new Error(g(t))}:function(t){if(x(t))return t;try{throw new Error(g(t))}catch(t){return t}}}(),L=function(t){return S.isArray(t)?t:null};if(\"undefined\"!=typeof Symbol&&Symbol.iterator){var z=\"function\"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],i=t[Symbol.iterator]();!(e=i.next()).done;)n.push(e.value);return n};L=function(t){return S.isArray(t)?t:null!=t&&\"function\"==typeof t[Symbol.iterator]?z(t):null}}var D=\"undefined\"!=typeof i&&\"[object process]\"===w(i).toLowerCase(),$=\"undefined\"!=typeof i&&\"undefined\"!=typeof i.env,U={isClass:d,isIdentifier:_,inheritedDataKeys:j,getDataPropertyOrDefault:c,thrower:f,isArray:S.isArray,asArray:L,notEnumerableProp:h,isPrimitive:o,isObject:s,isError:m,canEvaluate:I,errorObj:O,tryCatch:a,inherits:P,withAppended:l,maybeWrapAsError:u,toFastProperties:p,filledRange:v,toString:g,canAttachTrace:x,ensureErrorObject:F,originatesFromRejection:b,markAsOriginatingFromRejection:y,classString:w,copyDescriptors:k,hasDevTools:\"undefined\"!=typeof chrome&&chrome&&\"function\"==typeof chrome.loadTimes,isNode:D,hasEnvVariables:$,env:M,global:A,getNativePromise:C,domainBind:E};U.isRecentNode=U.isNode&&function(){var t=i.versions.node.split(\".\").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),U.isNode&&U.toFastProperties(i);try{throw new Error}catch(t){U.lastLineError=t}t.exports=U}).call(e,function(){return this}(),n(10))},function(t,e){var n=function(){\"use strict\";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,r={}.toString,a={}.constructor.prototype,o=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},s=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},c=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},h=function(t){try{return\"[object Array]\"===r.call(t)}catch(t){return!1}};t.exports={isArray:h,keys:o,names:o,defineProperty:u,getDescriptor:s,freeze:l,getPrototypeOf:c,isES5:n,propertyIsWritable:function(){return!0}}}},function(t,e,n){(function(e){\"use strict\";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=u}function r(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function o(t){this._normalQueue._pushOne(t),this._queueTick()}var s;try{throw new Error}catch(t){s=t}var u=n(132),l=n(135),c=n(129);i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){c.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write(\"Fatal \"+(t instanceof Error?t.stack:t)+\"\\n\"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),\"undefined\"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\")}},c.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?r.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?o.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=r,i.prototype.invoke=a,i.prototype.settlePromises=o),i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if(\"function\"==typeof e){var n=t.shift(),i=t.shift();e.call(n,i)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},t.exports=i,t.exports.firstLineError=s}).call(e,n(10))},function(t,e,n){(function(e,i,r){\"use strict\";var a,o=n(129),s=function(){throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\")},u=o.getNativePromise();if(o.isNode&&\"undefined\"==typeof MutationObserver){var l=e.setImmediate,c=i.nextTick;a=o.isRecentNode?function(t){l.call(e,t)}:function(t){c.call(i,t)}}else if(\"function\"==typeof u&&\"function\"==typeof u.resolve){var h=u.resolve();a=function(t){h.then(t)}}else a=\"undefined\"==typeof MutationObserver||\"undefined\"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?\"undefined\"!=typeof r?function(t){r(t)}:\"undefined\"!=typeof setTimeout?function(t){setTimeout(t,0)}:s:function(){var t=document.createElement(\"div\"),e={attributes:!0},n=!1,i=document.createElement(\"div\"),r=new MutationObserver(function(){t.classList.toggle(\"foo\"),n=!1});r.observe(i,e);var a=function(){n||(n=!0,i.classList.toggle(\"foo\"))};return function(n){var i=new MutationObserver(function(){i.disconnect(),n()});i.observe(t,e),a()}}();t.exports=a}).call(e,function(){return this}(),n(10),n(133).setImmediate)},function(t,e,n){function i(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(134),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){\"use strict\";function i(t){\"function\"!=typeof t&&(t=new Function(\"\"+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return _[p]=i,d(p),p++}function r(t){delete _[t]}function a(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}function o(t){if(v)setTimeout(o,0,t);else{var e=_[t];if(e){v=!0;try{a(e)}finally{r(t),v=!1}}}}function s(){d=function(t){e.nextTick(function(){o(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage(\"\",\"*\"),t.onmessage=n,e}}function l(){var e=\"setImmediate$\"+Math.random()+\"$\",n=function(n){n.source===t&&\"string\"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener(\"message\",n,!1):t.attachEvent(\"onmessage\",n),d=function(n){t.postMessage(e+n,\"*\")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},d=function(e){t.port2.postMessage(e)}}function h(){var t=g.documentElement;d=function(e){var n=g.createElement(\"script\");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function f(){d=function(t){setTimeout(o,0,t)}}if(!t.setImmediate){var d,p=1,_={},v=!1,g=t.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t,\"[object process]\"==={}.toString.call(t.process)?s():u()?l():t.MessageChannel?c():g&&\"onreadystatechange\"in g.createElement(\"script\")?h():f(),m.setImmediate=i,m.clearImmediate=r}}(\"undefined\"==typeof self?\"undefined\"==typeof t?this:t:self)}).call(e,function(){return this}(),n(10))},function(t,e){\"use strict\";function n(t,e,n,i,r){for(var a=0;a<r;++a)n[a+i]=t[a+e],t[a+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var a=this._capacity-1;this[r+0&a]=t,this[r+1&a]=e,this[r+2&a]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var i=this._front,r=this._length,a=i+r&e-1;n(this,0,this,e,a)},t.exports=i},function(t,e,n){\"use strict\";function i(t,e){function n(i){return this instanceof n?(h(this,\"message\",\"string\"==typeof i?i:e),h(this,\"name\",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(i)}return c(n,Error),n}function r(t){return this instanceof r?(h(this,\"name\",\"OperationalError\"),h(this,\"message\",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(h(this,\"message\",t.message),h(this,\"stack\",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(t)}var a,o,s=n(130),u=s.freeze,l=n(129),c=l.inherits,h=l.notEnumerableProp,f=i(\"Warning\",\"warning\"),d=i(\"CancellationError\",\"cancellation error\"),p=i(\"TimeoutError\",\"timeout error\"),_=i(\"AggregateError\",\"aggregate error\");try{a=TypeError,o=RangeError}catch(t){a=i(\"TypeError\",\"type error\"),o=i(\"RangeError\",\"range error\")}for(var v=\"join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse\".split(\" \"),g=0;g<v.length;++g)\"function\"==typeof Array.prototype[v[g]]&&(_.prototype[v[g]]=Array.prototype[v[g]]);s.defineProperty(_.prototype,\"length\",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var m=0;_.prototype.toString=function(){var t=Array(4*m+1).join(\" \"),e=\"\\n\"+t+\"AggregateError of:\\n\";m++,t=Array(4*m+1).join(\" \");for(var n=0;n<this.length;++n){for(var i=this[n]===this?\"[Circular AggregateError]\":this[n]+\"\",r=i.split(\"\\n\"),a=0;a<r.length;++a)r[a]=t+r[a];i=r.join(\"\\n\"),e+=i+\"\\n\"}return m--,e},c(r,Error);var y=Error.__BluebirdErrorTypes__;y||(y=u({CancellationError:d,TimeoutError:p,OperationalError:r,RejectionError:r,AggregateError:_}),s.defineProperty(Error,\"__BluebirdErrorTypes__\",{value:y,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:a,RangeError:o,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:f}},function(t,e,n){\"use strict\";t.exports=function(t,e){function i(n,i){if(c(n)){if(n instanceof t)return n;var r=a(n);if(r===l){i&&i._pushContext();var u=t.reject(r.e);return i&&i._popContext(),u}if(\"function\"==typeof r){if(o(n)){var u=new t(e);return n._then(u._fulfill,u._reject,void 0,u,null),u}return s(n,r,i)}}return n}function r(t){return t.then}function a(t){try{return r(t)}catch(t){return l.e=t,l}}function o(t){try{return h.call(t,\"_promise0\")}catch(t){return!1}}function s(n,i,r){function a(t){s&&(s._resolveCallback(t),s=null)}function o(t){s&&(s._rejectCallback(t,h,!0),s=null)}var s=new t(e),c=s;r&&r._pushContext(),s._captureStackTrace(),r&&r._popContext();var h=!0,f=u.tryCatch(i).call(n,a,o);return h=!1,s&&f===l&&(s._rejectCallback(f.e,!0,!0),s=null),c}var u=n(129),l=u.errorObj,c=u.isObject,h={}.hasOwnProperty;return i}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a){function o(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function s(n){var i=this._promise=new t(e);n instanceof t&&i._propagateFrom(n,3),i._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=n(129);u.isArray;return u.inherits(s,a),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,a){var s=i(this._values,this._promise);if(s instanceof t){s=s._target();var l=s._bitField;if(this._values=s,0===(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,a);if(0===(33554432&l))return 0!==(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(s=u.asArray(s),null===s){var c=r(\"expecting an array or an iterable object but got \"+u.classString(s)).reason();return void this._promise._rejectCallback(c,!1)}return 0===s.length?void(a===-5?this._resolveEmptyArray():this._resolve(o(a))):void this._iterate(s)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,a=!1,o=null,s=0;s<n;++s){var u=i(e[s],r);u instanceof t?(u=u._target(),o=u._bitField):o=null,a?null!==o&&u.suppressUnhandledRejections():null!==o?0===(50397184&o)?(u._proxy(this,s),this._values[s]=u):a=0!==(33554432&o)?this._promiseFulfilled(u._value(),s):0!==(16777216&o)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):a=this._promiseFulfilled(u,s)}a||r._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},function(t,e){\"use strict\";t.exports=function(t){function e(){this._trace=new e.CapturedTrace(i())}function n(){if(r)return new e}function i(){var t=a.length-1;if(t>=0)return a[t]}var r=!1,a=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,a.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=a.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,a=t.prototype._popContext,o=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=a,t._peekContext=o,t.prototype._peekContext=s,t.prototype._promiseCreated=u,r=!1},r=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},function(t,e,n){(function(e){\"use strict\";t.exports=function(t,i){function r(t,e){return{promise:e}}function a(){return!1}function o(t,e,n){var i=this;try{t(e,n,function(t){if(\"function\"!=typeof t)throw new TypeError(\"onCancel must be a function, got: \"+D.toString(t));i._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?D.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function u(){return this._onCancelField}function l(t){this._onCancelField=t}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function h(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function f(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function p(){this._trace=new P(this._peekContext())}function _(t,e){if($(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=M(t);D.notEnumerableProp(t,\"stack\",i.message+\"\\n\"+i.stack.join(\"\\n\")),D.notEnumerableProp(t,\"__stackCleaned__\",!0)}}}function v(t,e,n,i,r){if(void 0===t&&null!==e&&Z){if(void 0!==r&&r._returnedNonUndefined())return;if(0===(65535&i._bitField))return;n&&(n+=\" \");var a=\"\",o=\"\";if(e._trace){for(var s=e._trace.stack.split(\"\\n\"),u=w(s),l=u.length-1;l>=0;--l){var c=u[l];if(!H.test(c)){var h=c.match(B);h&&(a=\"at \"+h[1]+\":\"+h[2]+\":\"+h[3]+\" \");break}}if(u.length>0)for(var f=u[0],l=0;l<s.length;++l)if(s[l]===f){l>0&&(o=\"\\n\"+s[l-1]);break}}var d=\"a promise was created in a \"+n+\"handler \"+a+\"but was not returned from it, see http://goo.gl/rRqMUw\"+o;i._warn(d,!0,e)}}function g(t,e){var n=t+\" is deprecated and will be removed in a future version.\";return e&&(n+=\" Use \"+e+\" instead.\"),m(n)}function m(e,n,i){if(ot.warnings){var r,a=new z(e);if(n)i._attachExtraTrace(a);else if(ot.longStackTraces&&(r=t._peekContext()))r.attachExtraTrace(a);else{var o=M(a);a.stack=o.message+\"\\n\"+o.stack.join(\"\\n\")}et(\"warning\",a)||C(a,\"\",!0)}}function y(t,e){for(var n=0;n<e.length-1;++n)e[n].push(\"From previous event:\"),e[n]=e[n].join(\"\\n\");return n<e.length&&(e[n]=e[n].join(\"\\n\")),t+\"\\n\"+e.join(\"\\n\")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function x(t){for(var e=t[0],n=1;n<t.length;++n){for(var i=t[n],r=e.length-1,a=e[r],o=-1,s=i.length-1;s>=0;--s)if(i[s]===a){o=s;break}for(var s=o;s>=0;--s){var u=i[s];if(e[r]!==u)break;e.pop(),r--}e=i}}function w(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r=\"    (No stack trace)\"===i||W.test(i),a=r&&it(i);r&&!a&&(q&&\" \"!==i.charAt(0)&&(i=\"    \"+i),e.push(i))}return e}function k(t){for(var e=t.stack.replace(/\\s+$/g,\"\").split(\"\\n\"),n=0;n<e.length;++n){var i=e[n];if(\"    (No stack trace)\"===i||W.test(i))break}return n>0&&\"SyntaxError\"!=t.name&&(e=e.slice(n)),e}function M(t){var e=t.stack,n=t.toString();return e=\"string\"==typeof e&&e.length>0?k(t):[\"    (No stack trace)\"],{message:n,stack:\"SyntaxError\"==t.name?e:w(e)}}function C(t,e,n){if(\"undefined\"!=typeof console){var i;if(D.isObject(t)){var r=t.stack;i=e+V(r,t)}else i=e+String(t);\"function\"==typeof N?N(i,n):\"function\"!=typeof console.log&&\"object\"!=typeof console.log||console.log(i)}}function E(t,e,n,i){var r=!1;try{\"function\"==typeof e&&(r=!0,\"rejectionHandled\"===t?e(i):e(n,i))}catch(t){L.throwLater(t)}\"unhandledRejection\"===t?et(t,n,i)||r||C(n,\"Unhandled rejection \"):et(t,i)}function S(t){var e;if(\"function\"==typeof t)e=\"[function \"+(t.name||\"anonymous\")+\"]\";else{e=t&&\"function\"==typeof t.toString?t.toString():D.toString(t);var n=/\\[object [a-zA-Z0-9$_]+\\]/;if(n.test(e))try{var i=JSON.stringify(t);e=i}catch(t){}0===e.length&&(e=\"(empty array)\")}return\"(<\"+I(e)+\">, no stack trace)\"}function I(t){var e=41;return t.length<e?t:t.substr(0,e-3)+\"...\"}function O(){return\"function\"==typeof at}function T(t){var e=t.match(rt);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function A(t,e){if(O()){for(var n,i,r=t.stack.split(\"\\n\"),a=e.stack.split(\"\\n\"),o=-1,s=-1,u=0;u<r.length;++u){var l=T(r[u]);if(l){n=l.fileName,o=l.line;break}}for(var u=0;u<a.length;++u){var l=T(a[u]);if(l){i=l.fileName,s=l.line;break}}o<0||s<0||!n||!i||n!==i||o>=s||(it=function(t){if(U.test(t))return!0;var e=T(t);return!!(e&&e.fileName===n&&o<=e.line&&e.line<=s)})}}function P(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);at(this,P),e>32&&this.uncycle()}var j,R,N,F=t._getDomain,L=t._async,z=n(136).Warning,D=n(129),$=D.canAttachTrace,U=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/,H=/\\((?:timers\\.js):\\d+:\\d+\\)/,B=/[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/,W=null,V=null,q=!1,G=!(0==D.env(\"BLUEBIRD_DEBUG\")||!D.env(\"BLUEBIRD_DEBUG\")&&\"development\"!==D.env(\"NODE_ENV\")),Y=!(0==D.env(\"BLUEBIRD_WARNINGS\")||!G&&!D.env(\"BLUEBIRD_WARNINGS\")),X=!(0==D.env(\"BLUEBIRD_LONG_STACK_TRACES\")||!G&&!D.env(\"BLUEBIRD_LONG_STACK_TRACES\")),Z=0!=D.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\")&&(Y||!!D.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));t.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},t.prototype._notifyUnhandledRejectionIsHandled=function(){E(\"rejectionHandled\",j,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),E(\"unhandledRejection\",R,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145;\n},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(t,e,n){return m(t,e,n||this)},t.onPossiblyUnhandledRejection=function(t){var e=F();R=\"function\"==typeof t?null===e?t:D.domainBind(e,t):void 0},t.onUnhandledRejectionHandled=function(t){var e=F();j=\"function\"==typeof t?null===e?t:D.domainBind(e,t):void 0};var J=function(){};t.longStackTraces=function(){if(L.haveItemsQueued()&&!ot.longStackTraces)throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");if(!ot.longStackTraces&&O()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace;ot.longStackTraces=!0,J=function(){if(L.haveItemsQueued()&&!ot.longStackTraces)throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,i.deactivateLongStackTraces(),L.enableTrampoline(),ot.longStackTraces=!1},t.prototype._captureStackTrace=p,t.prototype._attachExtraTrace=_,i.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return ot.longStackTraces&&O()};var Q=function(){try{if(\"function\"==typeof CustomEvent){var t=new CustomEvent(\"CustomEvent\");return D.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!D.global.dispatchEvent(n)}}if(\"function\"==typeof Event){var t=new Event(\"CustomEvent\");return D.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!D.global.dispatchEvent(n)}}var t=document.createEvent(\"CustomEvent\");return t.initCustomEvent(\"testingtheevent\",!1,!0,{}),D.global.dispatchEvent(t),function(t,e){var n=document.createEvent(\"CustomEvent\");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!D.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),K=function(){return D.isNode?function(){return e.emit.apply(e,arguments)}:D.global?function(t){var e=\"on\"+t.toLowerCase(),n=D.global[e];return!!n&&(n.apply(D.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},et=function(t){var e=!1;try{e=K.apply(null,arguments)}catch(t){L.throwLater(t),e=!0}var n=!1;try{n=Q(t,tt[t].apply(null,arguments))}catch(t){L.throwLater(t),n=!0}return n||e};t.config=function(e){if(e=Object(e),\"longStackTraces\"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&J()),\"warnings\"in e){var n=e.warnings;ot.warnings=!!n,Z=ot.warnings,D.isObject(n)&&\"wForgottenReturn\"in n&&(Z=!!n.wForgottenReturn)}if(\"cancellation\"in e&&e.cancellation&&!ot.cancellation){if(L.haveItemsQueued())throw new Error(\"cannot enable cancellation after promises are in use\");t.prototype._clearCancellationData=c,t.prototype._propagateFrom=h,t.prototype._onCancel=u,t.prototype._setOnCancel=l,t.prototype._attachCancellationCallback=s,t.prototype._execute=o,nt=h,ot.cancellation=!0}return\"monitoring\"in e&&(e.monitoring&&!ot.monitoring?(ot.monitoring=!0,t.prototype._fireEvent=et):!e.monitoring&&ot.monitoring&&(ot.monitoring=!1,t.prototype._fireEvent=a)),t},t.prototype._fireEvent=a,t.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(t){},t.prototype._attachCancellationCallback=function(t){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(t,e){};var nt=f,it=function(){return!1},rt=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;D.inherits(P,Error),i.CapturedTrace=P,P.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},i=0,r=this;void 0!==r;++i)e.push(r),r=r._parent;t=this._length=i;for(var i=t-1;i>=0;--i){var a=e[i].stack;void 0===n[a]&&(n[a]=i)}for(var i=0;i<t;++i){var o=e[i].stack,s=n[o];if(void 0!==s&&s!==i){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var u=i>0?e[i-1]:this;s<t-1?(u._parent=e[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var l=u._length+1,c=i-2;c>=0;--c)e[c]._length=l,l++;return}}}},P.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=M(t),n=e.message,i=[e.stack],r=this;void 0!==r;)i.push(w(r.stack.split(\"\\n\"))),r=r._parent;x(i),b(i),D.notEnumerableProp(t,\"stack\",y(n,i)),D.notEnumerableProp(t,\"__stackCleaned__\",!0)}};var at=function(){var t=/^\\s*at\\s*/,e=function(t,e){return\"string\"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():S(e)};if(\"number\"==typeof Error.stackTraceLimit&&\"function\"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,W=t,V=e;var n=Error.captureStackTrace;return it=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var i=new Error;if(\"string\"==typeof i.stack&&i.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\")>=0)return W=/@/,V=e,q=!0,function(t){t.stack=(new Error).stack};var r;try{throw new Error}catch(t){r=\"stack\"in t}return\"stack\"in i||!r||\"number\"!=typeof Error.stackTraceLimit?(V=function(t,e){return\"string\"==typeof t?t:\"object\"!=typeof e&&\"function\"!=typeof e||void 0===e.name||void 0===e.message?S(e):e.toString()},null):(W=t,V=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);\"undefined\"!=typeof console&&\"undefined\"!=typeof console.warn&&(N=function(t){console.warn(t)},D.isNode&&e.stderr.isTTY?N=function(t,e){var n=e?\"\u001b[33m\":\"\u001b[31m\";console.warn(n+t+\"\u001b[0m\\n\")}:D.isNode||\"string\"!=typeof(new Error).stack||(N=function(t,e){console.warn(\"%c\"+t,e?\"color: darkorange\":\"color: red\")}));var ot={warnings:Y,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&t.longStackTraces(),{longStackTraces:function(){return ot.longStackTraces},warnings:function(){return ot.warnings},cancellation:function(){return ot.cancellation},monitoring:function(){return ot.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return d},checkForgottenReturns:v,setBounds:A,warn:m,deprecated:g,CapturedTrace:P,fireDomEvent:Q,fireGlobalEvent:K}}}).call(e,n(10))},function(t,e,n){\"use strict\";t.exports=function(t,e,i){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function a(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function s(){return l.call(this,this.promise._target()._settledValue())}function u(t){if(!o(this,t))return f.e=t,f}function l(n){var r=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?l.call(r._boundValue()):l.call(r._boundValue(),n);if(c===i)return c;if(void 0!==c){r._setReturnedNonUndefined();var d=e(c,r);if(d instanceof t){if(null!=this.cancelPromise){if(d._isCancelled()){var p=new h(\"late cancellation observer\");return r._attachExtraTrace(p),f.e=p,f}d.isPending()&&d._attachCancellationCallback(new a(this))}return d._then(s,u,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=n,f):(o(this),n)}var c=n(129),h=t.CancellationError,f=c.errorObj,d=n(142)(i);return r.prototype.isFinallyHandler=function(){return 0===this.type},a.prototype._resultCancelled=function(){o(this.finallyHandler)},t.prototype._passThrough=function(t,e,n,i){return\"function\"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThrough(t,0,l,l)},t.prototype.tap=function(t){return this._passThrough(t,1,l)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,l);var i,r=new Array(n-1),a=0;for(i=0;i<n-1;++i){var o=arguments[i];if(!c.isObject(o))return t.reject(new TypeError(\"tapCatch statement predicate: expecting an object but got \"+c.classString(o)));r[a++]=o}r.length=a;var s=arguments[i];return this._passThrough(d(r,s,this),1,void 0,l)},r}},function(t,e,n){\"use strict\";t.exports=function(t){function e(e,n,s){return function(u){var l=s._boundValue();t:for(var c=0;c<e.length;++c){var h=e[c];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return a(n).call(l,u)}else if(\"function\"==typeof h){var f=a(h).call(l,u);if(f===o)return f;if(f)return a(n).call(l,u)}else if(i.isObject(u)){for(var d=r(h),p=0;p<d.length;++p){var _=d[p];if(h[_]!=u[_])continue t}return a(n).call(l,u)}}return t}}var i=n(129),r=n(130).keys,a=i.tryCatch,o=i.errorObj;return e}},function(t,e,n){\"use strict\";function i(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}function r(t){var e;if(i(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),r=0;r<n.length;++r){var a=n[r];h.test(a)||(e[a]=t[a])}return e}return o.markAsOriginatingFromRejection(t),t}function a(t,e){return function(n,i){if(null!==t){if(n){var a=r(s(n));t._attachExtraTrace(a),t._reject(a)}else if(e){for(var o=arguments.length,u=new Array(Math.max(o-1,0)),l=1;l<o;++l)u[l-1]=arguments[l];t._fulfill(u)}else t._fulfill(i);t=null}}}var o=n(129),s=o.maybeWrapAsError,u=n(136),l=u.OperationalError,c=n(130),h=/^(?:name|message|stack|cause)$/;t.exports=a},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a){var o=n(129),s=o.tryCatch;t.method=function(n){if(\"function\"!=typeof n)throw new t.TypeError(\"expecting a function but got \"+o.classString(n));return function(){var i=new t(e);i._captureStackTrace(),i._pushContext();var r=s(n).apply(this,arguments),o=i._popContext();return a.checkForgottenReturns(r,o,\"Promise.method\",i),i._resolveFromSyncValue(r),i}},t.attempt=t.try=function(n){if(\"function\"!=typeof n)return r(\"expecting a function but got \"+o.classString(n));var i=new t(e);i._captureStackTrace(),i._pushContext();var u;if(arguments.length>1){a.deprecated(\"calling Promise.try with more than 1 argument\");var l=arguments[1],c=arguments[2];u=o.isArray(l)?s(n).apply(c,l):s(n).call(c,l)}else u=s(n)();var h=i._popContext();return a.checkForgottenReturns(u,h,\"Promise.try\",i),i._resolveFromSyncValue(u),i},t.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},function(t,e){\"use strict\";t.exports=function(t,e,n,i){var r=!1,a=function(t,e){this._reject(e)},o=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(a,a,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(a){r||(r=!0,t.prototype._propagateFrom=i.propagateFromFunction(),t.prototype._boundValue=i.boundValueFunction());var l=n(a),c=new t(e);c._propagateFrom(this,1);var h=this._target();if(c._setBoundTo(l),l instanceof t){var f={promiseRejectionQueued:!1,promise:c,target:h,bindingPromise:l};h._then(e,o,void 0,c,f),l._then(s,u,void 0,c,f),c._setOnCancel(l)}else c._resolveCallback(h);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r){var a=n(129),o=a.tryCatch,s=a.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!r.cancellation())return this._warn(\"cancellation is disabled\");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(a.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if(\"function\"==typeof t){if(!e){var i=o(t).call(this._boundValue());i===s&&(this._attachExtraTrace(i.e),u.throwLater(i.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},function(t,e){\"use strict\";t.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],i=function(){throw e};return this.caught(t,i)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof t&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},function(t,e){\"use strict\";t.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},a=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return o.call(this._target())},t.prototype.isRejected=function(){return a.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a,o){var s,u=n(129),l=u.canEvaluate,c=u.tryCatch,h=u.errorObj;if(l){for(var f=function(t){return new Function(\"value\",\"holder\",\"                             \\n\\t            'use strict';                                                    \\n\\t            holder.pIndex = value;                                           \\n\\t            holder.checkFulfillment(this);                                   \\n\\t            \".replace(/Index/g,t))},d=function(t){return new Function(\"promise\",\"holder\",\"                           \\n\\t            'use strict';                                                    \\n\\t            holder.pIndex = promise;                                         \\n\\t            \".replace(/Index/g,t))},p=function(e){for(var n=new Array(e),i=0;i<n.length;++i)n[i]=\"this.p\"+(i+1);var r=n.join(\" = \")+\" = null;\",o=\"var promise;\\n\"+n.map(function(t){return\"                                                         \\n\\t                promise = \"+t+\";                                      \\n\\t                if (promise instanceof Promise) {                            \\n\\t                    promise.cancel();                                        \\n\\t                }                                                            \\n\\t            \"}).join(\"\\n\"),s=n.join(\", \"),u=\"Holder$\"+e,l=\"return function(tryCatch, errorObj, Promise, async) {    \\n\\t            'use strict';                                                    \\n\\t            function [TheName](fn) {                                         \\n\\t                [TheProperties]                                              \\n\\t                this.fn = fn;                                                \\n\\t                this.asyncNeeded = true;                                     \\n\\t                this.now = 0;                                                \\n\\t            }                                                                \\n\\t                                                                             \\n\\t            [TheName].prototype._callFunction = function(promise) {          \\n\\t                promise._pushContext();                                      \\n\\t                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\t                promise._popContext();                                       \\n\\t                if (ret === errorObj) {                                      \\n\\t                    promise._rejectCallback(ret.e, false);                   \\n\\t                } else {                                                     \\n\\t                    promise._resolveCallback(ret);                           \\n\\t                }                                                            \\n\\t            };                                                               \\n\\t                                                                             \\n\\t            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\t                var now = ++this.now;                                        \\n\\t                if (now === [TheTotal]) {                                    \\n\\t                    if (this.asyncNeeded) {                                  \\n\\t                        async.invoke(this._callFunction, this, promise);     \\n\\t                    } else {                                                 \\n\\t                        this._callFunction(promise);                         \\n\\t                    }                                                        \\n\\t                                                                             \\n\\t                }                                                            \\n\\t            };                                                               \\n\\t                                                                             \\n\\t            [TheName].prototype._resultCancelled = function() {              \\n\\t                [CancellationCode]                                           \\n\\t            };                                                               \\n\\t                                                                             \\n\\t            return [TheName];                                                \\n\\t        }(tryCatch, errorObj, Promise, async);                               \\n\\t        \";return l=l.replace(/\\[TheName\\]/g,u).replace(/\\[TheTotal\\]/g,e).replace(/\\[ThePassedArguments\\]/g,s).replace(/\\[TheProperties\\]/g,r).replace(/\\[CancellationCode\\]/g,o),new Function(\"tryCatch\",\"errorObj\",\"Promise\",\"async\",l)(c,h,t,a)},_=[],v=[],g=[],m=0;m<8;++m)_.push(p(m+1)),v.push(f(m+1)),g.push(d(m+1));s=function(t){this._reject(t)}}t.join=function(){var n,a=arguments.length-1;if(a>0&&\"function\"==typeof arguments[a]&&(n=arguments[a],a<=8&&l)){var c=new t(r);c._captureStackTrace();for(var h=_[a-1],f=new h(n),d=v,p=0;p<a;++p){var m=i(arguments[p],c);if(m instanceof t){m=m._target();var y=m._bitField;0===(50397184&y)?(m._then(d[p],s,void 0,c,f),g[p](m,f),f.asyncNeeded=!1):0!==(33554432&y)?d[p].call(c,m._value(),f):0!==(16777216&y)?c._reject(m._reason()):c._cancel()}else d[p].call(c,m,f)}if(!c._isFateSealed()){if(f.asyncNeeded){var b=o();null!==b&&(f.fn=u.domainBind(b,f.fn))}c._setAsyncGuaranteed(),c._setOnCancel(f)}return c}for(var x=arguments.length,w=new Array(x),k=0;k<x;++k)w[k]=arguments[k];n&&w.pop();var c=new e(w).promise();return void 0!==n?c.spread(n):c}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a,o){function s(t,e,n,i){this.constructor$(t),this._promise._captureStackTrace();var r=l();this._callback=null===r?e:c.domainBind(r,e),this._preservedValues=i===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function u(e,n,r,a){if(\"function\"!=typeof n)return i(\"expecting a function but got \"+c.classString(n));var o=0;if(void 0!==r){if(\"object\"!=typeof r||null===r)return t.reject(new TypeError(\"options argument must be an object but it is \"+c.classString(r)));if(\"number\"!=typeof r.concurrency)return t.reject(new TypeError(\"'concurrency' must be a number but it is \"+c.classString(r.concurrency)));o=r.concurrency}return o=\"number\"==typeof o&&isFinite(o)&&o>=1?o:0,new s(e,n,o,a).promise()}var l=t._getDomain,c=n(129),h=c.tryCatch,f=c.errorObj,d=t._async;c.inherits(s,e),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var i=this._values,a=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(n=n*-1-1,i[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return i[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var l=this._promise,c=this._callback,d=l._boundValue();l._pushContext();var p=h(c).call(d,e,n,a),_=l._popContext();if(o.checkForgottenReturns(p,_,null!==s?\"Promise.filter\":\"Promise.map\",l),p===f)return this._reject(p.e),!0;var v=r(p,this._promise);if(v instanceof t){v=v._target();var g=v._bitField;if(0===(50397184&g))return u>=1&&this._inFlight++,i[n]=v,v._proxy(this,(n+1)*-1),!1;if(0===(33554432&g))return 0!==(16777216&g)?(this._reject(v._reason()),!0):(this._cancel(),!0);p=v._value()}i[n]=p}var m=++this._totalResolved;return m>=a&&(null!==s?this._filter(i,s):this._resolve(i),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i)}},s.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,a=0;a<n;++a)t[a]&&(i[r++]=e[a]);i.length=r,this._resolve(i)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return u(this,t,e,null)},t.map=function(t,e,n,i){return u(t,e,n,i)}}},function(t,e,n){\"use strict\";var i=Object.create;if(i){var r=i(null),a=i(null);r[\" size\"]=a[\" size\"]=0}t.exports=function(t){function e(e,n){var i;if(null!=e&&(i=e[n]),\"function\"!=typeof i){var r=\"Object \"+c.classString(e)+\" has no method '\"+c.toString(n)+\"'\";throw new t.TypeError(r)}return i}function i(t){var n=this.pop(),i=e(t,n);return i.apply(t,this)}function o(t){return t[this]}function s(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var u,l,c=n(129),h=c.canEvaluate,f=c.isIdentifier,d=function(t){return new Function(\"ensureMethod\",\"                                    \\n\\t        return function(obj) {                                               \\n\\t            'use strict'                                                     \\n\\t            var len = this.length;                                           \\n\\t            ensureMethod(obj, 'methodName');                                 \\n\\t            switch(len) {                                                    \\n\\t                case 1: return obj.methodName(this[0]);                      \\n\\t                case 2: return obj.methodName(this[0], this[1]);             \\n\\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\t                case 0: return obj.methodName();                             \\n\\t                default:                                                     \\n\\t                    return obj.methodName.apply(obj, this);                  \\n\\t            }                                                                \\n\\t        };                                                                   \\n\\t        \".replace(/methodName/g,t))(e)},p=function(t){return new Function(\"obj\",\"                                             \\n\\t        'use strict';                                                        \\n\\t        return obj.propertyName;                                             \\n\\t        \".replace(\"propertyName\",t))},_=function(t,e,n){var i=n[t];if(\"function\"!=typeof i){if(!f(t))return null;if(i=e(t),n[t]=i,n[\" size\"]++,n[\" size\"]>512){for(var r=Object.keys(n),a=0;a<256;++a)delete n[r[a]];n[\" size\"]=r.length-256}}return i};u=function(t){return _(t,d,r)},l=function(t){return _(t,p,a)},t.prototype.call=function(t){for(var e=arguments.length,n=new Array(Math.max(e-1,0)),r=1;r<e;++r)n[r-1]=arguments[r];if(h){var a=u(t);if(null!==a)return this._then(a,void 0,void 0,n,void 0)}return n.push(t),this._then(i,void 0,void 0,n,void 0)},t.prototype.get=function(t){var e,n=\"number\"==typeof t;if(n)e=s;else if(h){var i=l(t);e=null!==i?i:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a,o){function s(t){setTimeout(function(){throw t},0)}function u(t){var e=i(t);return e!==t&&\"function\"==typeof t._isDisposable&&\"function\"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(e,n){function r(){if(o>=l)return c._fulfill();var a=u(e[o++]);if(a instanceof t&&a._isDisposable()){try{a=i(a._getDisposer().tryDispose(n),e.promise)}catch(t){return s(t)}if(a instanceof t)return a._then(r,s,null,null,null)}r()}var o=0,l=e.length,c=new t(a);return r(),c}function c(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function f(t){return c.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function d(t){this.length=t,this.promise=null,this[t-1]=null}var p=n(129),_=n(136).TypeError,v=n(129).inherits,g=p.errorObj,m=p.tryCatch,y={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},c.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=e!==y?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},c.isDisposer=function(t){return null!=t&&\"function\"==typeof t.resource&&\"function\"==typeof t.tryDispose},v(h,c),h.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},d.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var i=this[n];i instanceof t&&i.cancel()}},t.using=function(){var n=arguments.length;if(n<2)return e(\"you must pass at least 2 arguments to Promise.using\");var r=arguments[n-1];if(\"function\"!=typeof r)return e(\"expecting a function but got \"+p.classString(r));var a,s=!0;2===n&&Array.isArray(arguments[0])?(a=arguments[0],n=a.length,s=!1):(a=arguments,n--);for(var u=new d(n),h=0;h<n;++h){var _=a[h];if(c.isDisposer(_)){var v=_;_=_.promise(),_._setDisposable(v)}else{var y=i(_);y instanceof t&&(_=y._then(f,null,null,{resources:u,index:h},void 0))}u[h]=_}for(var b=new Array(u.length),h=0;h<b.length;++h)b[h]=t.resolve(u[h]).reflect();var x=t.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void x.cancel();t[e]=n.value()}w._pushContext(),r=m(r);var i=s?r.apply(void 0,t):r(t),a=w._popContext();return o.checkForgottenReturns(i,a,\"Promise.using\",w),i}),w=x.lastly(function(){var e=new t.PromiseInspection(x);return l(u,e)});return u.promise=w,w._setOnCancel(u),w},t.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(t){if(\"function\"==typeof t)return new h(t,this,r());throw new _}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i){function r(t){this.handle=t}function a(t){return clearTimeout(this.handle),t}function o(t){throw clearTimeout(this.handle),t}var s=n(129),u=t.TimeoutError;r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return c(+this).thenReturn(t)},c=t.delay=function(n,a){var o,s;return void 0!==a?(o=t.resolve(a)._then(l,null,null,n,void 0),i.cancellation()&&a instanceof t&&o._setOnCancel(a)):(o=new t(e),s=setTimeout(function(){o._fulfill()},+n),i.cancellation()&&o._setOnCancel(new r(s)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(t){return c(t,this)};var h=function(t,e,n){var i;i=\"string\"!=typeof e?e instanceof Error?e:new u(\"operation timed out\"):new u(e),s.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=n&&n.cancel()};t.prototype.timeout=function(t,e){t=+t;var n,s,u=new r(setTimeout(function(){n.isPending()&&h(n,e,s)},t));return i.cancellation()?(s=this.then(),n=s._then(a,o,void 0,u,void 0),n._setOnCancel(u)):n=this._then(a,o,void 0,u,void 0),n}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a,o){function s(e,n,i){for(var a=0;a<n.length;++a){i._pushContext();var o=d(n[a])(e);if(i._popContext(),o===f){i._pushContext();var s=t.reject(f.e);return i._popContext(),s}var u=r(o,i);if(u instanceof t)return u}return null}function u(e,n,r,a){if(o.cancellation()){var s=new t(i),u=this._finallyPromise=new t(i);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{var l=this._promise=new t(i);l._captureStackTrace();\n}this._stack=a,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers=\"function\"==typeof r?[r].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}var l=n(136),c=l.TypeError,h=n(129),f=h.errorObj,d=h.tryCatch,p=[];h.inherits(u,a),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=\"undefined\"!=typeof this._generator.return;if(n)this._promise._pushContext(),e=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var i=new t.CancellationError(\"generator .return() sentinel\");t.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),e=d(this._generator.throw).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var n=this._promise;if(e===f)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var i=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var a=r(i,this._promise);if(!(a instanceof t)&&(a=s(a,this._yieldHandlers,this._promise),null===a))return void this._promiseRejected(new c(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\",String(i))+\"From coroutine:\\n\"+this._stack.split(\"\\n\").slice(1,-7).join(\"\\n\")));a=a._target();var o=a._bitField;0===(50397184&o)?(this._yieldedPromise=a,a._proxy(this,null)):0!==(33554432&o)?t._async.invoke(this._promiseFulfilled,this,a._value()):0!==(16777216&o)?t._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()},t.coroutine=function(t,e){if(\"function\"!=typeof t)throw new c(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");var n=Object(e).yieldHandler,i=u,r=(new Error).stack;return function(){var e=t.apply(this,arguments),a=new i(void 0,void 0,n,r),o=a.promise();return a._generator=e,a._promiseFulfilled(void 0),o}},t.coroutine.addYieldHandler=function(t){if(\"function\"!=typeof t)throw new c(\"expecting a function but got \"+h.classString(t));p.push(t)},t.spawn=function(n){if(o.deprecated(\"Promise.spawn()\",\"Promise.coroutine()\"),\"function\"!=typeof n)return e(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");var i=new u(n,this),r=i.promise();return i._run(t.spawn),r}}},function(t,e,n){\"use strict\";t.exports=function(t){function e(t,e){var n=this;if(!a.isArray(t))return i.call(n,t,e);var r=s(e).apply(n._boundValue(),[null].concat(t));r===u&&o.throwLater(r.e)}function i(t,e){var n=this,i=n._boundValue(),r=void 0===t?s(e).call(i,null):s(e).call(i,null,t);r===u&&o.throwLater(r.e)}function r(t,e){var n=this;if(!t){var i=new Error(t+\"\");i.cause=t,t=i}var r=s(e).call(n._boundValue(),t);r===u&&o.throwLater(r.e)}var a=n(129),o=t._async,s=a.tryCatch,u=a.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(t,n){if(\"function\"==typeof t){var a=i;void 0!==n&&Object(n).spread&&(a=e),this._then(a,r,void 0,this,t)}return this}}},function(t,e,n){\"use strict\";t.exports=function(t,e){function i(t){return!w.test(t)}function r(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function a(t,e,n){var i=d.getDataPropertyOrDefault(t,e+n,b);return!!i&&r(i)}function o(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var a=r.replace(n,\"\"),o=0;o<t.length;o+=2)if(t[o]===a)throw new m(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\",e))}}function s(t,e,n,i){for(var s=d.inheritedDataKeys(t),u=[],l=0;l<s.length;++l){var c=s[l],h=t[c],f=i===k||k(c,h,t);\"function\"!=typeof h||r(h)||a(t,c,e)||!i(c,h,t,f)||u.push(c,h)}return o(u,e,n),u}function u(n,i,r,a,o,s){function u(){var r=i;i===f&&(r=this);var a=new t(e);a._captureStackTrace();var o=\"string\"==typeof c&&this!==l?this[c]:n,u=p(a,s);try{o.apply(r,_(arguments,u))}catch(t){a._rejectCallback(v(t),!0,!0)}return a._isFateSealed()||a._setAsyncGuaranteed(),a}var l=function(){return this}(),c=n;return\"string\"==typeof c&&(n=a),d.notEnumerableProp(u,\"__isPromisified__\",!0),u}function l(t,e,n,i,r){for(var a=new RegExp(M(e)+\"$\"),o=s(t,e,a,n),u=0,l=o.length;u<l;u+=2){var c=o[u],h=o[u+1],p=c+e;if(i===O)t[p]=O(c,f,c,h,e,r);else{var _=i(h,function(){return O(c,f,c,h,e,r)});d.notEnumerableProp(_,\"__isPromisified__\",!0),t[p]=_}}return d.toFastProperties(t),t}function c(t,e,n){return O(t,e,void 0,t,null,n)}var h,f={},d=n(129),p=n(143),_=d.withAppended,v=d.maybeWrapAsError,g=d.canEvaluate,m=n(136).TypeError,y=\"Async\",b={__isPromisified__:!0},x=[\"arity\",\"length\",\"name\",\"arguments\",\"caller\",\"callee\",\"prototype\",\"__isPromisified__\"],w=new RegExp(\"^(?:\"+x.join(\"|\")+\")$\"),k=function(t){return d.isIdentifier(t)&&\"_\"!==t.charAt(0)&&\"constructor\"!==t},M=function(t){return t.replace(/([$])/,\"\\\\$\")},C=function(t){for(var e=[t],n=Math.max(0,t-1-3),i=t-1;i>=n;--i)e.push(i);for(var i=t+1;i<=3;++i)e.push(i);return e},E=function(t){return d.filledRange(t,\"_arg\",\"\")},S=function(t){return d.filledRange(Math.max(t,3),\"_arg\",\"\")},I=function(t){return\"number\"==typeof t.length?Math.max(Math.min(t.length,1024),0):0};h=function(n,i,r,a,o,s){function u(t){var e,n=E(t).join(\", \"),r=t>0?\", \":\"\";return e=g?\"ret = callback.call(this, {{args}}, nodeback); break;\\n\":void 0===i?\"ret = callback({{args}}, nodeback); break;\\n\":\"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\",e.replace(\"{{args}}\",n).replace(\", \",r)}function l(){for(var t=\"\",e=0;e<h.length;++e)t+=\"case \"+h[e]+\":\"+u(h[e]);return t+=\"                                                             \\n\\t        default:                                                             \\n\\t            var args = new Array(len + 1);                                   \\n\\t            var i = 0;                                                       \\n\\t            for (var i = 0; i < len; ++i) {                                  \\n\\t               args[i] = arguments[i];                                       \\n\\t            }                                                                \\n\\t            args[i] = nodeback;                                              \\n\\t            [CodeForCall]                                                    \\n\\t            break;                                                           \\n\\t        \".replace(\"[CodeForCall]\",g?\"ret = callback.apply(this, args);\\n\":\"ret = callback.apply(receiver, args);\\n\"),t}var c=Math.max(0,I(a)-1),h=C(c),g=\"string\"==typeof n||i===f,m=\"string\"==typeof n?\"this != null ? this['\"+n+\"'] : fn\":\"fn\",y=\"'use strict';                                                \\n\\t        var ret = function (Parameters) {                                    \\n\\t            'use strict';                                                    \\n\\t            var len = arguments.length;                                      \\n\\t            var promise = new Promise(INTERNAL);                             \\n\\t            promise._captureStackTrace();                                    \\n\\t            var nodeback = nodebackForPromise(promise, \"+s+\");   \\n\\t            var ret;                                                         \\n\\t            var callback = tryCatch([GetFunctionCode]);                      \\n\\t            switch(len) {                                                    \\n\\t                [CodeForSwitchCase]                                          \\n\\t            }                                                                \\n\\t            if (ret === errorObj) {                                          \\n\\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\t            }                                                                \\n\\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\t            return promise;                                                  \\n\\t        };                                                                   \\n\\t        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\t        return ret;                                                          \\n\\t    \".replace(\"[CodeForSwitchCase]\",l()).replace(\"[GetFunctionCode]\",m);return y=y.replace(\"Parameters\",S(c)),new Function(\"Promise\",\"fn\",\"receiver\",\"withAppended\",\"maybeWrapAsError\",\"nodebackForPromise\",\"tryCatch\",\"errorObj\",\"notEnumerableProp\",\"INTERNAL\",y)(t,a,i,_,v,p,d.tryCatch,d.errorObj,d.notEnumerableProp,e)};var O=g?h:u;t.promisify=function(t,e){if(\"function\"!=typeof t)throw new m(\"expecting a function but got \"+d.classString(t));if(r(t))return t;e=Object(e);var n=void 0===e.context?f:e.context,a=!!e.multiArgs,o=c(t,n,a);return d.copyDescriptors(t,o,i),o},t.promisifyAll=function(t,e){if(\"function\"!=typeof t&&\"object\"!=typeof t)throw new m(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");e=Object(e);var n=!!e.multiArgs,i=e.suffix;\"string\"!=typeof i&&(i=y);var r=e.filter;\"function\"!=typeof r&&(r=k);var a=e.promisifier;if(\"function\"!=typeof a&&(a=O),!d.isIdentifier(i))throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");for(var o=d.inheritedDataKeys(t),s=0;s<o.length;++s){var u=t[o[s]];\"constructor\"!==o[s]&&d.isClass(u)&&(l(u.prototype,i,r,a,n),l(u,i,r,a,n))}return l(t,i,r,a,n)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r){function a(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=h(t),n=!0;else{var i=c.keys(t),r=i.length;e=new Array(2*r);for(var a=0;a<r;++a){var o=i[a];e[a]=t[o],e[a+r]=o}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function o(e){var n,o=i(e);return l(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new a(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):r(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\")}var s,u=n(129),l=u.isObject,c=n(130);\"function\"==typeof Map&&(s=Map);var h=function(){function t(t,i){this[e]=t,this[e+n]=i,e++}var e=0,n=0;return function(i){n=i.size,e=0;var r=new Array(2*i.size);return i.forEach(t,r),r}}(),f=function(t){for(var e=new s,n=t.length/2|0,i=0;i<n;++i){var r=t[n+i],a=t[i];e.set(r,a)}return e};u.inherits(a,e),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var i;if(this._isMap)i=f(this._values);else{i={};for(var r=this.length(),a=0,o=this.length();a<o;++a)i[this._values[a+r]]=this._values[a]}return this._resolve(i),!0}return!1},a.prototype.shouldCopyValues=function(){return!1},a.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return o(this)},t.props=function(t){return o(t)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r){function a(n,a){var u=i(n);if(u instanceof t)return s(u);if(n=o.asArray(n),null===n)return r(\"expecting an array or an iterable object but got \"+o.classString(n));var l=new t(e);void 0!==a&&l._propagateFrom(a,3);for(var c=l._fulfill,h=l._reject,f=0,d=n.length;f<d;++f){var p=n[f];(void 0!==p||f in n)&&t.cast(p)._then(c,h,void 0,l,null)}return l}var o=n(129),s=function(t){return t.then(function(e){return a(e,t)})};t.race=function(t){return a(t,void 0)},t.prototype.race=function(){return a(this,void 0)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i,r,a,o){function s(e,n,i,r){this.constructor$(e);var o=f();this._fn=null===o?n:d.domainBind(o,n),void 0!==i&&(i=t.resolve(i),i._attachCancellationCallback(this)),this._initialValue=i,this._currentCancellable=null,r===a?this._eachValues=Array(this._length):0===r?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,r){if(\"function\"!=typeof e)return i(\"expecting a function but got \"+d.classString(e));var a=new s(t,e,n,r);return a.promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=r(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n=this.array,i=n._promise,r=p(n._fn);i._pushContext();var a;a=void 0!==n._eachValues?r.call(i._boundValue(),e,this.index,this.length):r.call(i._boundValue(),this.accum,e,this.index,this.length),a instanceof t&&(n._currentCancellable=a);var s=i._popContext();return o.checkForgottenReturns(a,s,void 0!==n._eachValues?\"Promise.each\":\"Promise.reduce\",i),a}var f=t._getDomain,d=n(129),p=d.tryCatch;d.inherits(s,e),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==a&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,i,r=e.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=t.resolve(e[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;i<r;++i){var a={accum:null,value:e[i],index:i,length:r,array:this};n=n._then(c,void 0,void 0,a,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(t,e){return l(this,t,e,null)},t.reduce=function(t,e,n,i){return l(t,e,n,i)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i){function r(t){this.constructor$(t)}var a=t.PromiseInspection,o=n(129);o.inherits(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseFulfilled=function(t,e){var n=new a;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new a;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},t.settle=function(t){return i.deprecated(\".settle()\",\".reflect()\"),new r(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},function(t,e,n){\"use strict\";t.exports=function(t,e,i){function r(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function a(t,e){if((0|e)!==e||e<0)return i(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");var n=new r(t),a=n.promise();return n.setHowMany(e),n.init(),a}var o=n(129),s=n(136).RangeError,u=n(136).AggregateError,l=o.isArray,c={};o.inherits(r,e),r.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},r.prototype.init=function(){this._initialized=!0,this._init()},r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(t){this._howMany=t},r.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},r.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},r.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},r.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=function(){return this._values.length-this.length()},r.prototype._addRejected=function(t){this._values.push(t)},r.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},r.prototype._getRangeError=function(t){var e=\"Input array must contain at least \"+this._howMany+\" items but contains only \"+t+\" items\";return new s(e)},r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return a(t,e)},t.prototype.some=function(t){return a(this,t)},t._SomePromiseArray=r}},function(t,e){\"use strict\";t.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e)},t.filter=function(t,i,r){return n(t,i,r,e)}}},function(t,e){\"use strict\";t.exports=function(t,e){function n(){return a(this)}function i(t,n){return r(t,n,e,e)}var r=t.reduce,a=t.all;t.prototype.each=function(t){return r(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return r(this,t,e,e)},t.each=function(t,i){return r(t,i,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=i}},function(t,e){\"use strict\";t.exports=function(t){function e(t){var e=new n(t),i=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),i}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(9),a=(i(r),n(166)),o=i(a),s={renders:null};s.renders=o.default,e.default=s,t.exports=e.default},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(167),a=i(r),o=n(171),s=i(o),u=n(172),l=i(u);e.default={GraphTag:a.default,PolylineCanvas:s.default,Polyline:l.default},t.exports=e.default},function(t,e,n){(function(i){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,n){this.filename=e,this.size=n,this.fileref=t,this.regions=[],this.file_attributes=new Map,this.base64_img_data=\"\"}function l(){this.is_user_selected=!1,this.is_user_tagged=!1,this.shape_attributes=new Map,this.region_attributes=new Map}Object.defineProperty(e,\"__esModule\",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if(\"value\"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},f=n(168),d=(r(f),n(170)),p=r(d),_={RECT:\"rect\",CIRCLE:\"circle\",ELLIPSE:\"ellipse\",POLYGON:\"polygon\",POINT:\"point\"},v=5,g=3,m=10,y=3,b=2,x=(Math.PI/18,100),w=3,k=[.25,.5,.75,1,1.5,2,2.5,3,4,5],M=4,C=\"#1a1a1a\",E=\"#aaeeff\",S=\"#808080\",I=\"#000000\",O=.5,T=\"10pt Sans\",A=\"#ff0000\",P=function(t){function e(t){var n;a(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.el=i.select(r.selector),r._via_img_metadata={},r._via_img_count=0,r._via_canvas_regions=[],r._via_canvas_scale=1,r._via_canvas_width_scale=1,r._via_canvas_height_scale=1,r._via_image_id_list=[],r._via_image_id=\"\",r._via_image_index=-1,r._via_current_image_filename=\"\",r._via_current_image=void 0,r._via_current_image_width=0,r._via_current_image_height=0,r._via_img_canvas=void 0,r._via_img_ctx=void 0,r._via_reg_canvas=void 0,r._via_reg_ctx=void 0,r._via_canvas_width=0,r._via_canvas_height=0,r._via_div_real_width=0,r._via_div_real_height=0,r._via_real_scale=1,r._via_canvas_zoom_level_index=w,r._via_canvas_scale_without_zoom=1,r._via_is_user_drawing_region=!1,r._via_current_image_loaded=!1,r._via_is_window_resized=!1,r._via_is_user_resizing_region=!1,r._via_is_user_moving_region=!1,r._via_is_user_drawing_polygon=!1,r._via_is_region_selected=!1,r._via_is_all_region_selected=!1,r._via_is_user_updating_attribute_name=!1,r._via_is_user_updating_attribute_value=!1,r._via_is_user_adding_attribute_name=!1,r._via_is_loaded_img_list_visible=!1,r._via_is_attributes_panel_visible=!1,r._via_is_reg_attr_panel_visible=!1,r._via_is_file_attr_panel_visible=!1,r._via_is_canvas_zoomed=!1,r._via_is_loading_current_image=!1,r._via_is_region_id_visible=!0,r._via_is_region_boundary_visible=!0,r._via_current_shape=_.POLYGON,r._via_current_polygon_region_id=-1,r._via_user_sel_region_id=-1,r._via_click_x0=0,r._via_click_y0=0,r._via_click_x1=0,r._via_click_y1=0,r._via_region_click_x=0,r._via_region_click_y=0,r._via_copied_image_regions=[],r._via_region_edge=[-1,-1],r._via_message_clear_timer=void 0,r._via_region_attributes=new Set,r._via_current_update_attribute_name=\"\",r._via_current_update_region_id=-1,r._via_file_attributes=new Set,r._via_visible_attr_name=\"\",r._via_is_local_storage_available=!1,r._via_is_save_ongoing=!1,r.interaction={select:!0,zoomOn:!1,zoomIn:!1,move:!1,polygon:!1},n=r,o(r,n)}return s(e,t),c(e,[{key:\"init\",value:function(t){return h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"init\",this).call(this,t),this._via_div_real_width=this.options.image_real_width,this._via_div_real_height=this.options.image_real_height,this._via_img_canvas=document.getElementById(this.options.image_canvas_id),this._via_img_ctx=this._via_img_canvas.getContext(\"2d\"),this._via_reg_canvas=document.getElementById(this.options.region_canvas_id),this._via_reg_ctx=this._via_reg_canvas.getContext(\"2d\"),this}},{key:\"getImageId\",value:function(t,e){return\"undefined\"==typeof e?t:t+e}},{key:\"loadStoreLocalImg\",value:function(t,e,n){var i=this.getImageId(e,n),r=this.getImageIdToIndex(i);return r!==-1?r:(this._via_img_metadata[i]=new u(t,e,n),this._via_image_id_list.push(i),this._via_img_count=this._via_img_count+1,this._via_image_id_list.length-1)}},{key:\"setAllCanvasSize\",value:function(t,e){this._via_img_canvas.height=e,this._via_img_canvas.width=t,this._via_reg_canvas.height=e,this._via_reg_canvas.width=t}},{key:\"loadCanvasRegions\",value:function(){var t=this._via_img_metadata[this._via_image_id].regions;this._via_canvas_regions=[];for(var e=1,n=0;n<t.length;n++){var i=new l;i.is_user_tagged=t[n].is_user_tagged;var r=!0,a=!1,o=void 0;try{for(var s,u=t[n].region_attributes.keys()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value,h=t[n].region_attributes.get(c);i.region_attributes.set(c,h)}}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}var f=!0,d=!1,p=void 0;try{for(var v,g=t[n].shape_attributes.keys()[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value,y=t[n].shape_attributes.get(m);i.shape_attributes.set(m,y)}}catch(t){d=!0,p=t}finally{try{!f&&g.return&&g.return()}finally{if(d)throw p}}switch(this._via_canvas_regions.push(i),this._via_canvas_regions[n].shape_attributes.get(\"name\")){case _.POLYGON:for(var b=t[n].shape_attributes.get(\"all_points_x\").slice(0),x=t[n].shape_attributes.get(\"all_points_y\").slice(0),w=0;w<b.length;++w)b[w]=Math.round(b[w]/e),x[w]=Math.round(x[w]/e);this._via_canvas_regions[n].shape_attributes.set(\"all_points_x\",b),this._via_canvas_regions[n].shape_attributes.set(\"all_points_y\",x);break;case _.POINT:var k=t[n].shape_attributes.get(\"cx\")/e,M=t[n].shape_attributes.get(\"cy\")/e;this._via_canvas_regions[n].shape_attributes.set(\"cx\",Math.round(k)),this._via_canvas_regions[n].shape_attributes.set(\"cy\",Math.round(M))}}}},{key:\"_viaClearRegCanvas\",value:function(){this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height)}},{key:\"_viaDrawControlPoint\",value:function(t,e){this._via_reg_ctx.beginPath(),this._via_reg_ctx.arc(t,e,g,0,2*Math.PI,!1),this._via_reg_ctx.closePath(),this._via_reg_ctx.fillStyle=A,this._via_reg_ctx.globalAlpha=1,this._via_reg_ctx.fill()}},{key:\"_viaDrawPolygonRegion\",value:function(t,e,n,i,r){if(i){this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(t[0],e[0]);for(var a=1;a<t.length;++a)this._via_reg_ctx.lineTo(t[a],e[a]);this._via_reg_ctx.strokeStyle=I,this._via_reg_ctx.lineWidth=M/2,this._via_reg_ctx.stroke(),this._via_reg_ctx.fillStyle=S,this._via_reg_ctx.globalAlpha=O,this._via_reg_ctx.fillStyle=\"red\",this._via_reg_ctx.fillStyle=r.get(\"color\")||\"blue\",this._via_reg_ctx.fill(),this._via_reg_ctx.globalAlpha=1}if(n){this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(t[0],e[0]);for(var o=1;o<t.length;++o)this._via_reg_ctx.lineTo(t[o],e[o]);this._via_reg_ctx.strokeStyle=I,this._via_reg_ctx.lineWidth=M/2,this._via_reg_ctx.stroke(),this._via_reg_ctx.fillStyle=S,this._via_reg_ctx.globalAlpha=O,this._via_reg_ctx.fill(),this._via_reg_ctx.globalAlpha=1;for(var s=1;s<t.length;++s)this._viaDrawControlPoint(t[s],e[s])}else for(var u=1;u<t.length;++u){this._via_reg_ctx.fillStyle=\"red\",this._via_reg_ctx.strokeStyle=E,this._via_reg_ctx.lineWidth=M/2,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(t[u-1],e[u-1]),this._via_reg_ctx.lineTo(t[u],e[u]),this._via_reg_ctx.stroke();var l=(e[u]-e[u-1])/(t[u]-t[u-1]);l>0?(this._via_reg_ctx.strokeStyle=C,this._via_reg_ctx.lineWidth=M/4,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[u-1])-parseInt(M/4),parseInt(e[u-1])+parseInt(M/4)),this._via_reg_ctx.lineTo(parseInt(t[u])-parseInt(M/4),parseInt(e[u])+parseInt(M/4)),this._via_reg_ctx.stroke(),this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[u-1])+parseInt(M/4),parseInt(e[u-1])-parseInt(M/4)),this._via_reg_ctx.lineTo(parseInt(t[u])+parseInt(M/4),parseInt(e[u])-parseInt(M/4)),this._via_reg_ctx.stroke()):(this._via_reg_ctx.strokeStyle=C,this._via_reg_ctx.lineWidth=M/4,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[u-1])+parseInt(M/4),parseInt(e[u-1])+parseInt(M/4)),this._via_reg_ctx.lineTo(parseInt(t[u])+parseInt(M/4),parseInt(e[u])+parseInt(M/4)),this._via_reg_ctx.stroke(),this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[u-1])-parseInt(M/4),parseInt(e[u-1])-parseInt(M/4)),this._via_reg_ctx.lineTo(parseInt(t[u])-parseInt(M/4),parseInt(e[u])-parseInt(M/4)),this._via_reg_ctx.stroke())}}},{key:\"_viaDrawPoint\",value:function(t,e,n){this._via_reg_ctx.beginPath(),this._via_reg_ctx.arc(t,e,n,0,2*Math.PI,!1),this._via_reg_ctx.closePath()}},{key:\"isInsidePolygon\",value:function(t,e,n,i){for(var r=0,a=0;a<t.length-1;++a){var o=this.isLeft(t[a],e[a],t[a+1],e[a+1],n,i);e[a]<=i?e[a+1]>i&&o>0&&++r:e[a+1]<=i&&o<0&&--r}return 0===r?0:1}},{key:\"isInsidePoint\",value:function(t,e,n,i){var r=n-t,a=i-e,o=m*m;return r*r+a*a<o}},{key:\"is_inside_this_region\",value:function(t,e,n){var i=this._via_canvas_regions[n].shape_attributes,r=!1;switch(i.get(\"name\")){case _.POLYGON:r=this.isInsidePolygon(i.get(\"all_points_x\"),i.get(\"all_points_y\"),t,e);break;case _.POINT:r=this.isInsidePoint(i.get(\"cx\"),i.get(\"cy\"),t,e)}return r}},{key:\"_viaDrawPointRegion\",value:function(t,e,n){n?(this._viaDrawPoint(t,e,g),this._via_reg_ctx.strokeStyle=I,this._via_reg_ctx.lineWidth=M/2,this._via_reg_ctx.stroke(),this._via_reg_ctx.fillStyle=S,this._via_reg_ctx.globalAlpha=O,this._via_reg_ctx.fill(),this._via_reg_ctx.globalAlpha=1):(this._via_reg_ctx.strokeStyle=E,this._via_reg_ctx.lineWidth=M/2,this._viaDrawPoint(t,e,g),this._via_reg_ctx.stroke(),this._via_reg_ctx.strokeStyle=C,this._via_reg_ctx.lineWidth=M/4,this._viaDrawPoint(t,e,g-M/2),this._via_reg_ctx.stroke(),this._viaDrawPoint(t,e,g+M/2),this._via_reg_ctx.stroke())}},{key:\"drawAllRegions\",value:function(){for(var t=0;t<this._via_canvas_regions.length;++t){var e=this._via_canvas_regions[t].shape_attributes,n=this._via_canvas_regions[t].is_user_selected,i=this._via_canvas_regions[t].is_user_tagged,r=this._via_canvas_regions[t].region_attributes;switch(e.get(\"name\")){case _.POLYGON:this._viaDrawPolygonRegion(e.get(\"all_points_x\"),e.get(\"all_points_y\"),n,i,r);break;case _.POINT:this._viaDrawPointRegion(e.get(\"cx\"),e.get(\"cy\"),n)}}}},{key:\"getRegionBoundingBox\",value:function(t){var e=t.shape_attributes,n=new Array(4);switch(e.get(\"name\")){case\"polygon\":for(var i=e.get(\"all_points_x\"),r=e.get(\"all_points_y\"),a=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,s=0,u=0,l=0;l<i.length;++l)i[l]<a&&(a=i[l]),i[l]>s&&(s=i[l]),r[l]<o&&(o=r[l]),r[l]>u&&(u=r[l]);n[0]=a,n[1]=o,n[2]=s,n[3]=u;break;case\"point\":n[0]=e.get(\"cx\")-g,n[1]=e.get(\"cy\")-g,n[2]=e.get(\"cx\")+g,n[3]=e.get(\"cy\")+g}return n}},{key:\"isLeft\",value:function(t,e,n,i,r,a){return(n-t)*(a-e)-(r-t)*(i-e)}},{key:\"drawAllRegionId\",value:function(){this._via_reg_ctx.shadowColor=\"transparent\";for(var t=0;t<this._via_img_metadata[this._via_image_id].regions.length;++t){var e=this._via_canvas_regions[t],n=this.getRegionBoundingBox(e),i=n[0],r=n[1],a=Math.abs(n[2]-n[0]);Math.abs(n[3]-n[1]);this._via_reg_ctx.font=T;var o=t+1,s=2*this._via_reg_ctx.measureText(o).width,u=this._via_reg_ctx.measureText(\"M\").width,l=1.8*u,c=this._via_img_metadata[this._via_image_id].regions[t].region_attributes;if(1===c.size&&a>2*u){var h=!0,f=!1,d=void 0;try{for(var p,v=c.keys()[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value;o=c.get(g)}}catch(t){f=!0,d=t}finally{try{!h&&v.return&&v.return()}finally{if(f)throw d}}var m=_via_reg_ctx.measureText(o).width;if(m>a){var y=Math.floor(a*o.length/m);o=o.substr(0,y-1)+\".\",s=a}else s=m+u}e.shape_attributes.get(\"name\")===_.POLYGON?(i=e.shape_attributes.get(\"all_points_x\")[0],r=e.shape_attributes.get(\"all_points_y\")[0]):i-=s/2-a/2,this._via_reg_ctx.fillStyle=\"black\",this._via_reg_ctx.globalAlpha=.8,this._via_reg_ctx.fillRect(Math.floor(i),Math.floor(r-1.1*l),Math.floor(s),Math.floor(l)),this._via_reg_ctx.globalAlpha=1,this._via_reg_ctx.fillStyle=\"yellow\",this._via_reg_ctx.fillText(o,Math.floor(i+.4*u),Math.floor(r-.35*l))}}},{key:\"_viaRedrawRegCanvas\",value:function(){this._via_current_image_loaded&&this._via_canvas_regions.length>0&&(this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height),this._via_is_region_boundary_visible&&this.drawAllRegions(),this._via_is_region_id_visible&&this.drawAllRegionId())}},{key:\"updateDivContainer\",value:function(t){this._via_div_real_width=t.image_real_width,this._via_div_real_height=t.image_real_height;\n}},{key:\"showImage\",value:function(t){if(!this._via_is_loading_current_image){var e=this._via_image_id_list[t||0];if(this._via_img_metadata.hasOwnProperty(e)){var n=this._via_img_metadata[e].file_name;this._via_is_loading_current_image=!0,this._via_current_image=new Image,this._via_current_image.addEventListener(\"error\",function(){this._via_is_loading_current_image=!1}.bind(this),!1),this._via_current_image.addEventListener(\"abort\",function(){this._via_is_loading_current_image=!1}.bind(this),!1),this._via_current_image.onload=function(){if(this._via_image_id=e,this._via_image_index=t,this._via_current_image_filename=n,this._via_current_image_loaded=!0,this._via_is_loading_current_image=!1,this._via_click_x0=0,this._via_click_y0=0,this._via_click_x1=0,this._via_click_y1=0,this._via_is_user_drawing_region=!1,this._via_is_window_resized=!1,this._via_is_user_resizing_region=!1,this._via_is_user_moving_region=!1,this._via_is_user_drawing_polygon=!1,this._via_user_sel_region_id=-1,this._via_is_region_selected=!1,this._via_current_image_width=this._via_current_image.naturalWidth,this._via_current_image_height=this._via_current_image.naturalHeight,this._via_canvas_width=this._via_current_image_width,this._via_canvas_height=this._via_current_image_height,this._via_canvas_width>this._via_div_real_width){var i=this._via_div_real_width/this._via_current_image.naturalWidth;this._via_canvas_width=this._via_div_real_width,this._via_canvas_height=this._via_current_image.naturalHeight*i}if(this._via_canvas_height>this._via_div_real_height){var r=this._via_div_real_height/this._via_canvas_height;this._via_canvas_height=this._via_div_real_height,this._via_canvas_width=this._via_canvas_width*r}this._via_canvas_width=Math.round(this._via_canvas_width),this._via_canvas_height=Math.round(this._via_canvas_height),this._via_canvas_scale=this._via_current_image.naturalWidth/this._via_canvas_width,this._via_canvas_width_scale=this._via_current_image.naturalWidth/this._via_canvas_width,this._via_canvas_height_scale=this._via_current_image.naturalHeight/this._via_canvas_width,this._via_canvas_scale_without_zoom=this._via_canvas_scale,this.setAllCanvasSize(this._via_canvas_width,this._via_canvas_height),this._via_img_ctx.clearRect(0,0,this._via_canvas_width,this._via_canvas_height),this._via_img_ctx.drawImage(this._via_current_image,0,0,this._via_canvas_width,this._via_canvas_height),this.loadCanvasRegions(),this._viaRedrawRegCanvas(),this._via_reg_canvas.focus(),this._via_reload_img_table=!0}.bind(this),this._via_current_image.src=this._via_img_metadata[e].fileref}}}},{key:\"isInsideRegion\",value:function(t,e,n){var i=this._via_canvas_regions.length;if(0===i)return-1;var r=void 0,a=void 0,o=void 0;n?(r=i-1,a=-1,o=-1):(r=0,a=i,o=1);for(var s=r;s!==a;){var u=this.is_inside_this_region(t,e,s);if(u)return s;s+=o}return-1}},{key:\"isOnPolygonVertex\",value:function(t,e,n,i){for(var r=t.length,a=0;a<r;++a)if(Math.abs(t[a]-n)<m&&Math.abs(e[a]-i)<m)return x+a;return 0}},{key:\"isOnRegionCorner\",value:function(t,e){for(var n=[-1,-1],i=0;i<this._via_canvas_regions.length;++i){var r=this._via_canvas_regions[i].shape_attributes,a=!1;switch(n[0]=i,r.get(\"name\")){case _.POLYGON:a=this.isOnPolygonVertex(r.get(\"all_points_x\"),r.get(\"all_points_y\"),t,e);break;case _.POINT:a=0}if(a>0)return n[1]=a,n}return n[0]=-1,n}},{key:\"isOnRectEdge\",value:function(t,e,n,i,r,a){var o=Math.abs(t-r),s=Math.abs(e-a),u=Math.abs(t+n-r),l=Math.abs(e+i-a);return o<v&&s<v?1:u<v&&s<v?2:u<v&&l<v?3:o<v&&l<v?4:0}},{key:\"toggleAllRegionsSelection\",value:function(t){for(var e=0;e<this._via_canvas_regions.length;++e)this._via_canvas_regions[e].is_user_selected=t,this._via_img_metadata[this._via_image_id].regions[e].is_user_selected=t;this._via_is_all_region_selected=t}},{key:\"selectOnlyRegion\",value:function(t){this.toggleAllRegionsSelection(!1),this.setRegionSelectState(t,!0),this._via_is_region_selected=!0,this._via_user_sel_region_id=t}},{key:\"setRegionSelectState\",value:function(t,e){this._via_canvas_regions[t].is_user_selected=e,this._via_img_metadata[this._via_image_id].regions[t].is_user_selected=e}},{key:\"update_attributes_panel\",value:function(){}},{key:\"eventClick\",value:function(t){this._via_click_x0=t.offsetX,this._via_click_y0=t.offsetY;this.isInsideRegion(this._via_click_x0,this._via_click_y0)}},{key:\"eventDBClick\",value:function(t){this._via_click_x0=t.offsetX,this._via_click_y0=t.offsetY;this.isInsideRegion(this._via_click_x0,this._via_click_y0)}},{key:\"eventMousedown\",value:function(t){this._via_click_x0=t.offsetX,this._via_click_y0=t.offsetY,this._via_region_edge=this.isOnRegionCorner(this._via_click_x0,this._via_click_y0);var e=this.isInsideRegion(this._via_click_x0,this._via_click_y0);if(this._via_is_region_selected)if(this._via_region_edge[1]>0)this._via_is_user_resizing_region||(this._via_region_edge[0]!==this._via_user_sel_region_id&&(this._via_user_sel_region_id=this._via_region_edge[0]),this._via_is_user_resizing_region=!0);else{var n=this.is_inside_this_region(this._via_click_x0,this._via_click_y0,this._via_user_sel_region_id);n&&(this._via_is_user_moving_region||(this._via_is_user_moving_region=!0,this._via_region_click_x=this._via_click_x0,this._via_region_click_y=this._via_click_y0)),e===-1&&(this._via_is_user_drawing_region=!0,this._via_is_region_selected=!1,this._via_user_sel_region_id=-1,this.toggleAllRegionsSelection(!1))}else e===-1?this._via_current_shape!==_.POLYGON&&this._via_current_shape!==_.POINT&&(this._via_is_user_drawing_region=!0):this._via_is_user_drawing_region=!0;t.preventDefault()}},{key:\"eventMouseup\",value:function(t){this._via_click_x1=t.offsetX,this._via_click_y1=t.offsetY;var e=Math.abs(this._via_click_x1-this._via_click_x0),n=Math.abs(this._via_click_y1-this._via_click_y0);if(this._via_is_user_moving_region){this._via_is_user_moving_region=!1,this._via_reg_canvas.style.cursor=\"default\";var i=Math.round(this._via_click_x1-this._via_region_click_x),r=Math.round(this._via_click_y1-this._via_region_click_y);if(Math.abs(i)>b||Math.abs(r)>b){var a=this._via_img_metadata[this._via_image_id].regions[this._via_user_sel_region_id].shape_attributes,o=this._via_canvas_regions[this._via_user_sel_region_id].shape_attributes;switch(o.get(\"name\")){case _.POINT:var s=a.get(\"cx\")+Math.round(i*this._via_canvas_scale),u=a.get(\"cy\")+Math.round(r*this._via_canvas_scale);a.set(\"cx\",s),a.set(\"cy\",u);var c=o.get(\"cx\")+i,h=o.get(\"cy\")+r;o.set(\"cx\",c),o.set(\"cy\",h);break;case _.POLYGON:for(var f=a.get(\"all_points_x\"),d=a.get(\"all_points_y\"),p=0;p<f.length;++p)f[p]=f[p]+Math.round(i*this._via_canvas_scale),d[p]=d[p]+Math.round(r*this._via_canvas_scale);for(var v=o.get(\"all_points_x\"),g=o.get(\"all_points_y\"),w=0;w<v.length;++w)v[w]=v[w]+i,g[w]=g[w]+r}}else{var k=this.isInsideRegion(this._via_click_x0,this._via_click_y0,!0);k>=0&&k!==this._via_user_sel_region_id&&(this._via_user_sel_region_id=k,this._via_is_region_selected=!0,this._via_is_user_moving_region=!1,t.shiftKey||this.toggleAllRegionsSelection(!1),this.setRegionSelectState(k,!0),this.update_attributes_panel())}return this._viaRedrawRegCanvas(),void this._via_reg_canvas.focus()}if(this._via_is_user_resizing_region){this._via_is_user_resizing_region=!1,this._via_reg_canvas.style.cursor=\"default\";var M=this._via_region_edge[0],C=this._via_img_metadata[this._via_image_id].regions[M].shape_attributes,E=this._via_canvas_regions[M].shape_attributes;switch(E.get(\"name\")){case _.POLYGON:var I=this._via_region_edge[1]-x;if(E.get(\"all_points_x\")[I]=Math.round(this._via_current_x),E.get(\"all_points_y\")[I]=Math.round(this._via_current_y),C.get(\"all_points_x\")[I]=Math.round(this._via_current_x*this._via_canvas_scale),C.get(\"all_points_y\")[I]=Math.round(this._via_current_y*this._via_canvas_scale),0===I){var O=E.get(\"all_points_x\").length;E.get(\"all_points_x\")[O-1]=Math.round(this._via_current_x),E.get(\"all_points_y\")[O-1]=Math.round(this._via_current_y),C.get(\"all_points_x\")[O-1]=Math.round(this._via_current_x*this._via_canvas_scale),C.get(\"all_points_y\")[O-1]=Math.round(this._via_current_y*this._via_canvas_scale)}}return this._viaRedrawRegCanvas(),void this._via_reg_canvas.focus()}if(e<b||n<b){if(this._via_is_user_drawing_polygon){var T=Math.round(this._via_click_x0),A=Math.round(this._via_click_y0),P=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\")[0],j=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\")[0],R=P-T,N=j-A;if(Math.sqrt(R*R+N*N)<=m){this._via_is_user_drawing_polygon=!1;var F=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\").slice(0),L=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\").slice(0),z=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\"),D=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\");F.push(F[0]),L.push(L[0]),z.push(z[0]),D.push(D[0]);var $=new l;$.shape_attributes.set(\"name\",\"polygon\"),$.shape_attributes.set(\"all_points_x\",F),$.shape_attributes.set(\"all_points_y\",L),this._via_current_polygon_region_id=this._via_img_metadata[this._via_image_id].regions.length,this._via_img_metadata[this._via_image_id].regions.push($),this.selectOnlyRegion(this._via_current_polygon_region_id),this._via_current_polygon_region_id=-1,this.update_attributes_panel()}else this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\").push(T),this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\").push(A)}else{var U=this.isInsideRegion(this._via_click_x0,this._via_click_y0);if(U>=0)this._via_user_sel_region_id=U,this._via_is_region_selected=!0,this._via_is_user_moving_region=!1,this._via_is_user_drawing_region=!1,t.shiftKey||this.toggleAllRegionsSelection(!1),this.setRegionSelectState(U,!0),this.update_attributes_panel();else if(this._via_is_user_drawing_region)this._via_is_user_drawing_region=!1,this._via_is_region_selected=!1,this._via_use_sel_region_id=-1,this.toggleAllRegionsSelection(!1),this.update_attributes_panel();else switch(this._via_current_shape){case _.POLYGON:this._via_is_user_drawing_polygon=!0;var H=new l;H.region_attributes.set(\"type\",\"\"),H.region_attributes.set(\"color\",S),H.shape_attributes.set(\"name\",_.POLYGON),H.shape_attributes.set(\"all_points_x\",[Math.round(this._via_click_x0)]),H.shape_attributes.set(\"all_points_y\",[Math.round(this._via_click_y0)]),this._via_canvas_regions.push(H),this._via_current_polygon_region_id=this._via_canvas_regions.length-1;break;case _.POINT:var B=new l;B.shape_attributes.set(\"name\",_.POINT),B.shape_attributes.set(\"cx\",Math.round(this._via_click_x0*this._via_canvas_scale)),B.shape_attributes.set(\"cy\",Math.round(this._via_click_y0*this._via_canvas_scale)),this._via_img_metadata[this._via_image_id].regions.push(B);var W=new l;W.shape_attributes.set(\"name\",_.POINT),W.shape_attributes.set(\"cx\",Math.round(this._via_click_x0)),W.shape_attributes.set(\"cy\",Math.round(this._via_click_y0)),this._via_canvas_regions.push(W),this.update_attributes_panel()}}return this._viaRedrawRegCanvas(),void this._via_reg_canvas.focus()}if(this._via_is_user_drawing_region){this._via_is_user_drawing_region=!1;var V=void 0,q=void 0,G=void 0,Y=void 0;this._via_click_x0<this._via_click_x1?(V=this._via_click_x0,G=this._via_click_x1):(V=this._via_click_x1,G=this._via_click_x0),this._via_click_y0<this._via_click_y1?(q=this._via_click_y0,Y=this._via_click_y1):(q=this._via_click_y1,Y=this._via_click_y0);var X=new l,Z=new l,J=Math.abs(G-V),Q=Math.abs(Y-q);if(this.toggleAllRegionsSelection(!1),X.is_user_selected=!0,Z.is_user_selected=!0,this._via_is_region_selected=!0,this._via_user_sel_region_id=this._via_canvas_regions.length,J>y||Q>y)switch(this._via_current_shape){case _.POLYGON:}return this.update_attributes_panel(),this._viaRedrawRegCanvas(),void this._via_reg_canvas.focus()}}},{key:\"eventMouseOver\",value:function(t){this._viaRedrawRegCanvas(),this._via_reg_canvas.focus()}},{key:\"eventMouseMove\",value:function(t){if(this._via_current_image_loaded){if(this._via_current_x=t.offsetX,this._via_current_y=t.offsetY,this._via_is_region_selected&&!this._via_is_user_resizing_region)if(this._via_region_edge=this.isOnRegionCorner(this._via_current_x,this._via_current_y),this._via_region_edge[0]===this._via_user_sel_region_id){switch(this._via_region_edge[1]){case 1:case 3:this._via_reg_canvas.style.cursor=\"nwse-resize\";break;case 2:case 4:this._via_reg_canvas.style.cursor=\"nesw-resize\";break;case 5:this._via_reg_canvas.style.cursor=\"n-resize\";break;case 6:this._via_reg_canvas.style.cursor=\"e-resize\";break;default:this._via_reg_canvas.style.cursor=\"default\"}this._via_region_edge[1]>=x&&(this._via_reg_canvas.style.cursor=\"crosshair\")}else{var e=this.is_inside_this_region(this._via_current_x,this._via_current_y,this._via_user_sel_region_id);e?this._via_reg_canvas.style.cursor=\"move\":this._via_reg_canvas.style.cursor=\"default\"}if(this._via_is_user_drawing_region){this._via_canvas_regions.length?this._viaRedrawRegCanvas():this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height);var n=void 0,i=void 0;this._via_click_x0<this._via_current_x?this._via_click_y0<this._via_current_y?(n=this._via_click_x0,i=this._via_click_y0):(n=this._via_click_x0,i=this._via_current_y):this._via_click_y0<this._via_current_y?(n=this._via_current_x,i=this._via_click_y0):(n=this._via_current_x,i=this._via_current_y);Math.round(Math.abs(this._via_current_x-this._via_click_x0)),Math.round(Math.abs(this._via_current_y-this._via_click_y0));switch(this._via_current_shape){case _.POLYGON:}this._via_reg_canvas.focus()}if(this._via_is_user_resizing_region){this._via_canvas_regions.length?this._viaRedrawRegCanvas():this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height);var r=this._via_region_edge[0],a=this._via_canvas_regions[r].shape_attributes;switch(a.get(\"name\")){case _.POLYGON:var o=a.get(\"all_points_x\").slice(0),s=a.get(\"all_points_y\").slice(0),u=this._via_region_edge[1]-x;o[u]=this._via_current_x,s[u]=this._via_current_y,0===u&&(o[o.length-1]=this._via_current_x,s[s.length-1]=this._via_current_y),this._viaDrawPolygonRegion(o,s,!0)}this._via_reg_canvas.focus()}if(this._via_is_user_moving_region){this._via_canvas_regions.length?this._viaRedrawRegCanvas():this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height);var l=this._via_current_x-this._via_region_click_x,c=this._via_current_y-this._via_region_click_y,h=this._via_canvas_regions[this._via_user_sel_region_id].shape_attributes;switch(h.get(\"name\")){case _.POLYGON:for(var f=h.get(\"all_points_x\").slice(0),d=h.get(\"all_points_y\").slice(0),p=0;p<f.length;++p)f[p]+=l,d[p]+=c;this._viaDrawPolygonRegion(f,d,!0);break;case _.POINT:this._viaDrawPointRegion(h.get(\"cx\")+l,h.get(\"cy\")+c,!0)}return void this._via_reg_canvas.focus()}if(this._via_is_user_drawing_polygon){this._viaRedrawRegCanvas();var v=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes,g=v.get(\"all_points_x\"),m=v.get(\"all_points_y\"),y=g.length,b=[g.slice(y-1),this._via_current_x],w=[m.slice(y-1),this._via_current_y];this._viaDrawPolygonRegion(b,w,!1)}}}},{key:\"addEventListenerClick\",value:function(){this._via_reg_canvas.addEventListener(\"click\",this.eventClick.bind(this),!1)}},{key:\"addEventListenerDBClick\",value:function(){return this._via_reg_canvas.addEventListener(\"dblclick\",this.eventClick.bind(this),!1),this}},{key:\"addEventListenerMousedown\",value:function(){return this._via_reg_canvas.addEventListener(\"mousedown\",this.eventMousedown.bind(this),!1),this}},{key:\"addEventListenerMouseup\",value:function(){return this._via_reg_canvas.addEventListener(\"mouseup\",this.eventMouseup.bind(this),!1),this}},{key:\"addEventListenerMouseover\",value:function(){return this._via_reg_canvas.addEventListener(\"mouseover\",this.eventMouseOver.bind(this),!1),this}},{key:\"addEventListenerMousemove\",value:function(){return this._via_reg_canvas.addEventListener(\"mousemove\",this.eventMouseMove.bind(this),!1),this}},{key:\"removeEventListener\",value:function(t){this._via_reg_canvas.addEventListener(t,null,!1)}},{key:\"zoom_out\",value:function(){if(this._via_current_image_loaded)if(0===this._via_canvas_zoom_level_index);else{this._via_canvas_zoom_level_index-=1,this._via_is_canvas_zoomed=!0;var t=k[this._via_canvas_zoom_level_index];this.set_all_canvas_scale(t),this.setAllCanvasSize(this._via_canvas_width*t,this._via_canvas_height*t),this._via_canvas_scale=this._via_canvas_scale_without_zoom/t,this.loadCanvasRegions(),this._viaRedrawImgCanvas(),this._viaRedrawRegCanvas(),this._via_reg_canvas.focus()}}},{key:\"zoom_in\",value:function(){if(this._via_current_image_loaded)if(this._via_canvas_zoom_level_index===k.length-1);else{this._via_canvas_zoom_level_index+=1,this._via_is_canvas_zoomed=!0;var t=k[this._via_canvas_zoom_level_index];this.set_all_canvas_scale(t),this.setAllCanvasSize(this._via_canvas_width*t,this._via_canvas_height*t),this._via_canvas_scale=this._via_canvas_scale_without_zoom/t,this.loadCanvasRegions(),this._viaRedrawImgCanvas(),this._viaRedrawRegCanvas(),this._via_reg_canvas.focus()}}},{key:\"_viaRedrawImgCanvas\",value:function(){this._via_current_image_loaded&&(this._via_img_ctx.clearRect(0,0,this._via_img_canvas.width,this._via_img_canvas.height),this._via_img_ctx.drawImage(this._via_current_image,0,0,this._via_img_canvas.width,this._via_img_canvas.height))}},{key:\"set_all_canvas_scale\",value:function(t){this._via_img_ctx.scale(t,t),this._via_reg_ctx.scale(t,t)}},{key:\"resetZoomLevel\",value:function(){if(this._via_current_image_loaded)if(this._via_is_canvas_zoomed){this._via_is_canvas_zoomed=!1,this._via_canvas_zoom_level_index=w;var t=k[this._via_canvas_zoom_level_index];this.set_all_canvas_scale(t),this.setAllCanvasSize(this._via_canvas_width,this._via_canvas_height),this._via_canvas_scale=this._via_canvas_scale_without_zoom,this.loadCanvasRegions(),this._viaRedrawImgCanvas(),this._viaRedrawRegCanvas(),this._via_reg_canvas.focus()}else console.log(\"Cannot reset zoom because image zoom has not been applied!\")}},{key:\"goUpdate\",value:function(){this._via_is_window_resized||(this._via_is_window_resized=!0,this.showImage(this._via_image_index),this._via_is_canvas_zoomed&&this.resetZoomLevel())}},{key:\"setMetaData\",value:function(t){var e=this._via_img_metadata[this._via_image_id];for(var n in t)e[n].regions.region_attributes=t[n]}},{key:\"resetMetaData\",value:function(){this._via_img_metadata[this._via_image_id].regions=[],this.showImage(this._via_image_index)}},{key:\"getMetaData\",value:function(t){var e=this._via_canvas_scale,n={},i=this._via_image_id;n.fileref=\"\",n.size=this._via_img_metadata[i].size,n.filename=this._via_img_metadata[i].filename,n.base64_img_data=\"\",n.file_attributes={};var r=!0,a=!1,o=void 0;try{for(var s,u=this._via_img_metadata[i].file_attributes.keys()[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,c=this._via_img_metadata[i].file_attributes.get(l);n.file_attributes[l]=c}}catch(t){a=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}if(n.regions={},t!==-1&&t<this._via_img_metadata[i].regions.length){var h=t;n.regions[h]={},n.regions[h].shape_attributes={},n.regions[h].region_attributes={};var f=!0,d=!1,p=void 0;try{for(var _,v=this._via_img_metadata[i].regions[h].shape_attributes.keys()[Symbol.iterator]();!(f=(_=v.next()).done);f=!0){var g=_.value,m=this._via_img_metadata[i].regions[h].shape_attributes.get(g);n.regions[h].shape_attributes[g]=m}}catch(t){d=!0,p=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw p}}var y=!0,b=!1,x=void 0;try{for(var w,k=this._via_img_metadata[this._via_image_id].regions[h].region_attributes.keys()[Symbol.iterator]();!(y=(w=k.next()).done);y=!0){var M=w.value,C=this._via_img_metadata[this._via_image_id].regions[h].region_attributes.get(M);n.regions[h].region_attributes[M]=C}}catch(t){b=!0,x=t}finally{try{!y&&k.return&&k.return()}finally{if(b)throw x}}}else for(var E=0;E<this._via_img_metadata[i].regions.length;++E){n.regions[E]={},n.regions[E].shape_attributes={},n.regions[E].region_attributes={},n.regions[E].is_user_selected=this._via_img_metadata[i].regions[E].get(\"is_user_selected\"),n.regions[E].is_user_tagged=this._via_img_metadata[i].regions[E].get(\"is_user_tagged\");var S=!0,I=!1,O=void 0;try{for(var T,A=this._via_img_metadata[i].regions[E].shape_attributes.keys()[Symbol.iterator]();!(S=(T=A.next()).done);S=!0){var P=T.value,j=this._via_img_metadata[i].regions[E].shape_attributes.get(P);Array.isArray(j)&&(j=j.map(function(t){return Math.round(t*e)})),n.regions[E].shape_attributes[P]=j}}catch(t){I=!0,O=t}finally{try{!S&&A.return&&A.return()}finally{if(I)throw O}}var R=!0,N=!1,F=void 0;try{for(var L,z=this._via_img_metadata[i].regions[E].region_attributes.keys()[Symbol.iterator]();!(R=(L=z.next()).done);R=!0){var D=L.value,$=this._via_img_metadata[i].regions[E].region_attributes.get(D);n.regions[E].region_attributes[D]=$}}catch(t){N=!0,F=t}finally{try{!R&&z.return&&z.return()}finally{if(N)throw F}}}return[JSON.stringify(n)]}},{key:\"updateCurrentSelectRegion\",value:function(t){var e=this._via_user_sel_region_id,n=this._via_img_metadata[this._via_image_id],i=n.regions[e].region_attributes;for(var r in t)i.set(r,t[r]);n.regions[e].is_user_tagged=!0;var a=this._via_canvas_regions[e].region_attributes;a.set(\"type\",t.type),a.set(\"color\",t.color),this._via_canvas_regions[e].is_user_tagged=!0,this._viaRedrawRegCanvas()}},{key:\"importAnnotationsFromJson\",value:function(t){if(\"\"!==t&&\"undefined\"!=typeof t){var e=t;this._via_canvas_scale;for(var n in e)if(this._via_img_metadata.hasOwnProperty(n)){var i=e[n].regions;for(var r in i){if(this._via_img_metadata[n].regions.hasOwnProperty(r))return;var a=new l;for(var o in i[r].shape_attributes){var s=i[r].shape_attributes[o];a.shape_attributes.set(o,s)}for(var u in i[r].region_attributes)a.region_attributes.set(u,i[r].region_attributes[u]),this._via_region_attributes.has(u)||this._via_region_attributes.add(u);a.is_user_tagged=!0,a.is_user_selected=!1,console.log(\"regioni\",a),(a.shape_attributes.size>0||a.region_attributes.size>0)&&this._via_img_metadata[n].regions.push(a)}}}}},{key:\"getImageIdToIndex\",value:function(t){return this._via_image_id_list.findIndex(function(e){return e===t})}},{key:\"getSelectRegionValue\",value:function(){return this._via_user_sel_region_id===-1?\"\":this._via_canvas_regions[this._via_user_sel_region_id].region_attributes.get(\"type\")}}]),e}(p.default);e.default=P,t.exports=e.default}).call(e,n(35))},,,function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(168),s=i(o),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.selector,i=void 0===n?null:n;if(r(this,t),!i)throw new Error(this.constructor.NAME+\"未设置selector\");return this.selector=i,this.events={},this.options={},this}return a(t,[{key:\"init\",value:function(t){return s.default.assign(this.options,t),this}},{key:\"draw\",value:function(t){this.data=t}},{key:\"destroy\",value:function(){return null}},{key:\"on\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(2===e.length){var i=e[0],r=e[1];this.$addEvent(i,r)}else if(1===e.length&&e[0]instanceof Object)for(var a in e[0]){var o=e[0][a];this.$addEvent(a,o)}return this}},{key:\"off\",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(2===e.length){var i=e[0],r=e[1];this.$removeEvent(i,r)}else if(1===e.length){var a=e[0];this.$removeEvent(a)}return this}},{key:\"$trigger\",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return this.events.hasOwnProperty(t)&&this.events[t].forEach(function(t){setTimeout.apply(void 0,[t,1].concat(n))}),this}},{key:\"$addEvent\",value:function(t,e){return this.events.hasOwnProperty(t)||(this.events[t]=[]),e instanceof Function?this.events[t].push(e):console.log(\"Event \"+t+\" callback is not a function\"),this}},{key:\"$removeEvent\",value:function(t,e){if(this.events.hasOwnProperty(t))if(e){var n=this.events[t].indexOf(e);this.events[t].splice(n,1)}else this.events[t]=[];return this}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function a(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function o(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,\"__esModule\",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if(\"value\"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},l=n(170),c=i(l),h=function(t){function e(t){var n;r(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.canvasWidth=0,i.canvasHeight=0,i.selectImage=null,i.imgWidth=0,i.imgHeight=0,i.imgCanvas=null,i.imgCtx=null,i.regCanvas=null,i.regCtx=null,i.sourceImgCanvas=null,i.sourceImgCtx=null,i.scaleStep=.1,i.minScale=8e-4,i.maxScale=32,i.clickEvent=null,i.mousedownEvent=null,i.mousemouseUpEvent=null,i.mouseoverEvent=null,i.mousemoveEvent=null,i.xPosition=0,i.yPosition=0,i.preXPosition=0,i.preYPosition=0,i.scale=1,i.appearSize=100,i.interaction={select:!0,zoomOn:!1,zoomIn:!1,rect:!1,move:!1},n=i,a(i,n)}return o(e,t),s(e,[{key:\"init\",value:function(t){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"init\",this).call(this,t),console.log(\"this.options.image_canvas_id\",this.options.image_canvas_id),this.imgCanvas=document.getElementById(this.options.image_canvas_id),this.imgCtx=this.imgCanvas.getContext(\"2d\"),this.canvasWidth=this.imgCanvas.clientWidth,this.canvasHeight=this.imgCanvas.clientHeight,this.regCanvas=document.getElementById(this.options.region_canvas_id),this.regCtx=this.regCanvas.getContext(\"2d\"),this}},{key:\"updateCanvas\",value:function(){this.imgCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.imgCtx.drawImage(this.sourceImgCsourceImgCanvasanvas,-this.xPosition/this.scale,-this.yPosition/this.scale,this.canvasWidth/this.scale,this.canvasHeight/this.scale,0,0,this.canvasWidth,this.canvasHeight),console.log((100*this.scale).toFixed(2)+\"%\",\"scale\")}},{key:\"setShowImage\",value:function(t){return this.selectImage=new Image,this.selectImage.src=t,this.selectImage.onload=function(){this.imgWidth=this.selectImage.width,this.imgHeight=this.selectImage.height,this.sourceImgCanvas=document.createElement(\"canvas\"),this.sourceImgCanvas.width=this.imgWidth,this.sourceImgCanvas.height=this.imgHeight,this.sourceImgCanvas.style.display=\"none\",this.sourceImgCtx=this.sourceImgCanvas.getContext(\"2d\"),this.sourceImgCtx.drawImage(this.selectImage,0,0,this.imgWidth,this.imgHeight),document.body.appendChild(this.sourceImgCanvas),this.scale=1,this.setXandY(0,0)}.bind(this),this}},{key:\"setXandY\",value:function(t,e){t<this.appearSize-this.imgWidth*this.scale?this.xPosition=this.appearSize-this.imgWidth*this.scale:t>this.canvasWidth-this.appearSize?this.xPosition=this.canvasWidth-this.appearSize:this.xPosition=t,e<this.appearSize-this.imgHeight*this.scale?this.yPosition=this.appearSize-this.imgHeight*this.scale:e>this.canvasHeight-this.appearSize?this.yPosition=this.canvasHeight-this.appearSize:this.yPosition=e,this.updateCanvas()}},{key:\"calculateChange\",value:function(t,e,n){var i=e.clientWidth,r=e.clientHeight,a=\"number\"==typeof t.pageX?t.pageX:t.touches[0].pageX,o=\"number\"==typeof t.pageY?t.pageY:t.touches[0].pageY,s=a-(e.getBoundingClientRect().left+window.pageXOffset),u=o-(e.getBoundingClientRect().top+window.pageYOffset);return s<0?s=0:s>i&&(s=i),u<0?u=0:u>r&&(u=r),{x:s,y:u}}}]),e}(c.default);e.default=h,t.exports=e.default},function(t,e,n){(function(i){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,n){this.filename=e,this.size=n,this.fileref=t,this.regions=[],this.file_attributes=new Map,this.base64_img_data=\"\"}function l(){this.is_user_selected=!1,this.shape_attributes=new Map,this.region_attributes=new Map}Object.defineProperty(e,\"__esModule\",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if(\"value\"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},f=n(170),d=r(f),p={POLYGON:\"polygon\",POINT:\"point\"},_=5,v=2,g=(Math.PI/18,3),m=4,y=\"#1a1a1a\",b=\"#aaeeff\",x=\"#808080\",w=\"#000000\",k=.5,M=function(t){function e(t){var n;a(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.el=i.select(r.selector),r._via_img_metadata={},r._via_img_count=0,r._via_canvas_regions=[],r._via_canvas_scale=1,r._via_canvas_width_scale=1,r._via_canvas_height_scale=1,r._via_image_id_list=[],r._via_image_id=\"\",r._via_image_index=-1,r._via_current_image=void 0,r._via_current_image_width=0,r._via_current_image_height=0,r._via_img_canvas=void 0,r._via_img_ctx=void 0,r._via_reg_canvas=void 0,r._via_reg_ctx=void 0,r._via_canvas_width=0,r._via_canvas_height=0,r._via_div_real_width=0,r._via_div_real_height=0,r._via_canvas_zoom_level_index=g,r._via_canvas_scale_without_zoom=1,r._via_is_user_drawing_region=!1,r._via_current_image_loaded=!1,r._via_is_window_resized=!1,r._via_is_user_resizing_region=!1,r._via_is_user_moving_region=!1,r._via_is_user_drawing_polygon=!1,r._via_is_region_selected=!1,r._via_is_canvas_zoomed=!1,r._via_is_loading_current_image=!1,r._via_is_region_id_visible=!0,r._via_is_region_boundary_visible=!0,r._via_current_shape=p.POLYGON,r._via_current_polygon_region_id=-1,r._via_user_sel_region_id=-1,r._via_click_x0=0,r._via_click_y0=0,r._via_click_x1=0,r._via_click_y1=0,r._via_region_click_x=0,r._via_region_click_y=0,r._via_region_edge=[-1,-1],n=r,o(r,n)}return s(e,t),c(e,[{key:\"init\",value:function(t){return h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),\"init\",this).call(this,t),this._via_div_real_width=this.options.image_real_width,this._via_div_real_height=this.options.image_real_height,\nthis._via_img_canvas=document.getElementById(this.options.image_canvas_id),this._via_img_ctx=this._via_img_canvas.getContext(\"2d\"),this._via_reg_canvas=document.getElementById(this.options.region_canvas_id),this._via_reg_ctx=this._via_reg_canvas.getContext(\"2d\"),this}},{key:\"setAllCanvasSize\",value:function(t,e){this._via_img_canvas.height=e,this._via_img_canvas.width=t,this._via_reg_canvas.height=e,this._via_reg_canvas.width=t}},{key:\"setShowImage\",value:function(t){this._via_is_loading_current_image=!0,this._via_current_image=new Image,this._via_current_image.onload=function(){if(this._via_current_image_loaded=!0,this._via_is_loading_current_image=!1,this._via_click_x0=0,this._via_click_y0=0,this._via_click_x1=0,this._via_click_y1=0,this._via_is_user_drawing_region=!1,this._via_is_window_resized=!1,this._via_is_user_resizing_region=!1,this._via_is_user_moving_region=!1,this._via_is_user_drawing_polygon=!1,this._via_current_image_width=this._via_current_image.naturalWidth,this._via_current_image_height=this._via_current_image.naturalHeight,console.log(\"this._via_div_real_width\",this._via_div_real_width),console.log(\"this._via_div_real_height\",this._via_div_real_height),this._via_canvas_width=this._via_current_image_width,this._via_canvas_height=this._via_current_image_height,this._via_canvas_width>this._via_div_real_width){var t=this._via_div_real_width/this._via_current_image.naturalWidth;this._via_canvas_width=this._via_div_real_width,this._via_canvas_height=this._via_current_image.naturalHeight*t}if(this._via_canvas_height>this._via_div_real_height){var e=this._via_div_real_height/this._via_canvas_height;this._via_canvas_height=this._via_div_real_height,this._via_canvas_width=this._via_canvas_width*e}this._via_canvas_width=Math.round(this._via_canvas_width),this._via_canvas_height=Math.round(this._via_canvas_height),this._via_canvas_scale=this._via_current_image.naturalWidth/this._via_canvas_width,console.log(\"this._via_canvas_scale\",this._via_canvas_scale),this._via_canvas_width_scale=this._via_current_image.naturalWidth/this._via_canvas_width,this._via_canvas_height_scale=this._via_current_image.naturalHeight/this._via_canvas_height,this._via_canvas_scale_without_zoom=this._via_canvas_scale,this.setAllCanvasSize(this._via_canvas_width,this._via_canvas_height),this._via_img_ctx.clearRect(0,0,this._via_canvas_width,this._via_canvas_height),this._via_img_ctx.drawImage(this._via_current_image,0,0,this._via_canvas_width,this._via_canvas_height),this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height),this._via_reg_canvas.focus()}.bind(this),this._via_current_image.src=t,this._via_img_metadata[0]=new u(t,t,\"\")}},{key:\"selectOnlyRegion\",value:function(t){this.setRegionSelectState(t,!0),this._via_is_region_selected=!0,this._via_user_sel_region_id=t}},{key:\"_viaRedrawRegCanvas\",value:function(){this._via_current_image_loaded&&this._via_canvas_regions.length>0&&(this._via_reg_ctx.clearRect(0,0,this._via_reg_canvas.width,this._via_reg_canvas.height),this._via_is_region_boundary_visible&&this.drawAllRegions())}},{key:\"drawAllRegions\",value:function(){for(var t=0;t<this._via_canvas_regions.length;++t){var e=this._via_canvas_regions[t].shape_attributes,n=this._via_canvas_regions[t].is_user_selected;switch(e.get(\"name\")){case p.POLYGON:this._viaDrawPolygonRegion(e.get(\"all_points_x\"),e.get(\"all_points_y\"),n);break;case p.POINT:this._viaDrawPointRegion(e.get(\"cx\"),e.get(\"cy\"),n)}}}},{key:\"_viaDrawPolygonRegion\",value:function(t,e,n){if(n){this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(t[0],e[0]);for(var i=1;i<t.length;++i)this._via_reg_ctx.lineTo(t[i],e[i]);this._via_reg_ctx.strokeStyle=w,this._via_reg_ctx.lineWidth=m/2,this._via_reg_ctx.stroke(),this._via_reg_ctx.fillStyle=x,this._via_reg_ctx.globalAlpha=k,this._via_reg_ctx.fill(),this._via_reg_ctx.globalAlpha=1;for(var r=1;r<t.length;++r)this._viaDrawControlPoint(t[r],e[r])}else for(var a=1;a<t.length;++a){this._via_reg_ctx.strokeStyle=b,this._via_reg_ctx.lineWidth=m/2,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(t[a-1],e[a-1]),this._via_reg_ctx.lineTo(t[a],e[a]),this._via_reg_ctx.stroke();var o=(e[a]-e[a-1])/(t[a]-t[a-1]);o>0?(this._via_reg_ctx.strokeStyle=y,this._via_reg_ctx.lineWidth=m/4,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[a-1])-parseInt(m/4),parseInt(e[a-1])+parseInt(m/4)),this._via_reg_ctx.lineTo(parseInt(t[a])-parseInt(m/4),parseInt(e[a])+parseInt(m/4)),this._via_reg_ctx.stroke(),this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[a-1])+parseInt(m/4),parseInt(e[a-1])-parseInt(m/4)),this._via_reg_ctx.lineTo(parseInt(t[a])+parseInt(m/4),parseInt(e[a])-parseInt(m/4)),this._via_reg_ctx.stroke()):(this._via_reg_ctx.strokeStyle=y,this._via_reg_ctx.lineWidth=m/4,this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[a-1])+parseInt(m/4),parseInt(e[a-1])+parseInt(m/4)),this._via_reg_ctx.lineTo(parseInt(t[a])+parseInt(m/4),parseInt(e[a])+parseInt(m/4)),this._via_reg_ctx.stroke(),this._via_reg_ctx.beginPath(),this._via_reg_ctx.moveTo(parseInt(t[a-1])-parseInt(m/4),parseInt(e[a-1])-parseInt(m/4)),this._via_reg_ctx.lineTo(parseInt(t[a])-parseInt(m/4),parseInt(e[a])-parseInt(m/4)),this._via_reg_ctx.stroke())}}},{key:\"is_inside_this_region\",value:function(t,e,n){var i=this._via_canvas_regions[n].shape_attributes,r=!1;switch(i.get(\"name\")){case p.POLYGON:r=this.isInsidePolygon(i.get(\"all_points_x\"),i.get(\"all_points_y\"),t,e);break;case p.POINT:r=this.isInsidePoint(i.get(\"cx\"),i.get(\"cy\"),t,e)}return r}},{key:\"clickEvent\",value:function(t){console.log(\"e\",t)}},{key:\"handleMouseDown\",value:function(t){this._via_click_x0=t.offsetX,this._via_click_y0=t.offsetY,this._via_is_user_drawing_polygon=!0,console.log(\"handleMouseDown\",this._via_click_x0,this._via_click_y0),t.preventDefault()}},{key:\"isInsideRegion\",value:function(t,e,n){var i=this._via_canvas_regions.length;if(0===i)return-1;var r=void 0,a=void 0,o=void 0;n?(r=i-1,a=-1,o=-1):(r=0,a=i,o=1);for(var s=r;s!==a;){var u=this.is_inside_this_region(t,e,s);if(u)return s;s+=o}return-1}},{key:\"handleMouseUp\",value:function(t){console.log(\"handleMouseUp\"),this._via_click_x1=t.offsetX,this._via_click_y1=t.offsetY;var e=Math.abs(this._via_click_x1-this._via_click_x0),n=Math.abs(this._via_click_y1-this._via_click_y0);if(e<v||n<v){if(this._via_is_user_drawing_polygon){var i=Math.round(this._via_click_x0),r=Math.round(this._via_click_y0),a=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\")[0],o=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\")[0],s=a-i,u=o-r;if(Math.sqrt(s*s+u*u)<=_){this._via_is_user_drawing_polygon=!1;var c=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\").slice(0),h=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\").slice(0),f=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\"),d=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\");c.push(c[0]),h.push(h[0]),f.push(f[0]),d.push(d[0]);var g=new l;g.shape_attributes.set(\"name\",\"polygon\"),g.shape_attributes.set(\"all_points_x\",c),g.shape_attributes.set(\"all_points_y\",h),console.log(\"this._via_img_metadata\",this._via_img_metadata),this._via_current_polygon_region_id=this._via_img_metadata[0].regions.length,this._via_img_metadata[this._via_image_id].regions.push(g),this.selectOnlyRegion(this._via_current_polygon_region_id)}else this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_x\").push(i),this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes.get(\"all_points_y\").push(r)}else{var m=this.isInsideRegion(this._via_click_x0,this._via_click_y0);if(m>=0)this._via_user_sel_region_id=m,this._via_is_region_selected=!0,this._via_is_user_moving_region=!1,this._via_is_user_drawing_region=!1;else if(this._via_is_user_drawing_region)this._via_is_user_drawing_region=!1,this._via_is_region_selected=!1,this._via_use_sel_region_id=-1;else switch(this._via_current_shape){case p.POLYGON:this._via_is_user_drawing_polygon=!0;var y=new l;y.shape_attributes.set(\"name\",p.POLYGON),y.shape_attributes.set(\"all_points_x\",[Math.round(this._via_click_x0)]),y.shape_attributes.set(\"all_points_y\",[Math.round(this._via_click_y0)]),this._via_canvas_regions.push(y),this._via_current_polygon_region_id=this._via_canvas_regions.length-1;break;case p.POINT:var b=new l;b.shape_attributes.set(\"name\",p.POINT),b.shape_attributes.set(\"cx\",Math.round(this._via_click_x0*this._via_canvas_scale)),b.shape_attributes.set(\"cy\",Math.round(this._via_click_y0*this._via_canvas_scale)),this._via_img_metadata[this._via_image_id].regions.push(b);var x=new l;x.shape_attributes.set(\"name\",p.POINT),x.shape_attributes.set(\"cx\",Math.round(this._via_click_x0)),x.shape_attributes.set(\"cy\",Math.round(this._via_click_y0)),this._via_canvas_regions.push(x)}}return this._viaRedrawRegCanvas(),void this._via_reg_canvas.focus()}}},{key:\"handleMouseMove\",value:function(t){if(this._via_current_x=t.offsetX,this._via_current_y=t.offsetY,console.log(this._via_is_user_drawing_polygon),this._via_is_user_drawing_polygon){this._viaRedrawRegCanvas(),console.log(this._via_canvas_regions);var e=this._via_canvas_regions[this._via_current_polygon_region_id].shape_attributes,n=e.get(\"all_points_x\"),i=e.get(\"all_points_y\"),r=n.length,a=[n.slice(r-1),this._via_current_x],o=[i.slice(r-1),this._via_current_y];this._viaDrawPolygonRegion(a,o,!1)}}},{key:\"regionBindAllEvent\",value:function(){this._via_reg_canvas.addEventListener(\"mousedown\",this.handleMouseDown.bind(this)),this._via_reg_canvas.addEventListener(\"mouseup\",this.handleMouseUp.bind(this)),this._via_reg_canvas.addEventListener(\"mousemove\",this.handleMouseMove.bind(this))}}]),e}(d.default);e.default=M,t.exports=e.default}).call(e,n(35))},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(127),s=i(o),u=n(17),l=function(){function t(){r(this,t),this.selectImage=null,this.imgWidth=651,this.imgHeight=651,this.sourceImgCanvas=null,this.sourceImgCtx=null,this.cutImgCanvas=null,this.cutImgCtx=null,this.cutImgWidth=0,this.cutImgHeight=0,this.options={}}return a(t,[{key:\"init\",value:function(t){this.options=Object.assign({},t)}},{key:\"setCanvas\",value:function(){this.setCutImage(),this.setSourceImage()}},{key:\"setColor\",value:function(t){this.color=(0,u.getColorRgb)(t)}},{key:\"getAllCanvas\",value:function(){this.sourceImgCanvas=document.getElementById(\"source-canvas\"),this.sourceImgCtx=this.sourceImgCanvas.getContext(\"2d\"),this.cutImgCanvas=document.getElementById(\"cut-canvas\"),this.cutImgCtx=this.cutImgCanvas.getContext(\"2d\")}},{key:\"setCutImage\",value:function(){var t=this.options.bbox;return this.cutImgWidth=t[2]-t[0],this.cutImgHeight=t[3]-t[1],this.cutImgCanvas=document.createElement(\"canvas\"),this.cutImgCanvas.width=this.cutImgWidth,this.cutImgCanvas.height=this.cutImgHeight,this.cutImgCanvas.style.display=\"none\",this.cutImgCanvas.id=\"new_cut_canvas\",this.cutImgCtx=this.cutImgCanvas.getContext(\"2d\"),document.body.appendChild(this.cutImgCanvas),this}},{key:\"setSourceImage\",value:function(){return this.sourceImgCanvas=document.createElement(\"canvas\"),this.sourceImgCanvas.width=this.imgWidth,this.sourceImgCanvas.height=this.imgHeight,this.sourceImgCanvas.style.display=\"none\",this.sourceImgCanvas.id=\"new_img_canvas\",this.sourceImgCtx=this.sourceImgCanvas.getContext(\"2d\"),document.body.appendChild(this.sourceImgCanvas),this}},{key:\"updateSourceImageAndCutImage\",value:function(t,e){return new s.default(function(n){this.selectImage=new Image,this.selectImage.src=t,this.selectImage.onload=function(){this.imgWidth=this.selectImage.width,this.imgHeight=this.selectImage.height,this.sourceImgCanvas.width=this.imgWidth,this.sourceImgCanvas.height=this.imgHeight,this.sourceImgCtx.clearRect(0,0,this.imgWidth,this.imgHeight),this.sourceImgCtx.drawImage(this.selectImage,0,0,this.imgWidth,this.imgHeight);var t=this.options.bbox;this.cutImgWidth=t[2]-t[0],this.cutImgHeight=t[3]-t[1],this.cutImgCanvas.width=this.cutImgWidth,this.cutImgCanvas.height=this.cutImgHeight;var i=this.sourceImgCtx.getImageData(t[0],t[1],this.cutImgWidth,this.cutImgHeight);(0,u.transSelectRegionToBase64)(i,e,this.color),this.cutImgCtx.clearRect(0,0,this.cutImgWidth,this.cutImgHeight),this.cutImgCtx.putImageData(i,0,0),n(this.cutImgCanvas.toDataURL())}.bind(this)}.bind(this))}}]),t}();e.default=l,t.exports=e.default},function(t,e){t.exports=' <div class=\"uk-grid image-tagged-view-main\" _v-da5218fa=\"\"> <div class=\"uk-width-1-1 image-tagged-menu\" id=image_menu _v-da5218fa=\"\"> <ul class=uk-list _v-da5218fa=\"\"> <li :class=\"{\\'active\\': index == selectedId}\" v-for=\"(index, menu) in imageMenu\" v-on:click.stop.prevent=getMenuMsg(menu.index) _v-da5218fa=\"\"> <a href=# _v-da5218fa=\"\"><i class=\"uk-icon-justify {{menu.icon}}\" _v-da5218fa=\"\"></i></a> </li> </ul> </div> <div class=\"uk-thumbnail uk-thumbnail-expand del-padding\" v-el:graph=\"\" _v-da5218fa=\"\"> <canvas id=image_canvas _v-da5218fa=\"\"></canvas> <canvas id=region_canvas _v-da5218fa=\"\"></canvas> </div> </div> <div id=attributes-panel v-if=willShow _v-da5218fa=\"\"> <div class=\"uk-animation-slide-bottom close\" @click=closeTag() _v-da5218fa=\"\"><i class=\"uk-icon-justify uk-icon-close\" _v-da5218fa=\"\"></i></div> <template v-if=\"selectIndex==-1\"> <div class=error-msg _v-da5218fa=\"\">No selected feature</div> </template> <template v-else=\"\"> <table class=\"uk-table uk-table-hover uk-table-condensed\" _v-da5218fa=\"\"> <thead _v-da5218fa=\"\"> <tr _v-da5218fa=\"\"> <th v-for=\"head in tableHeader\" _v-da5218fa=\"\"> <input type=text placeholder=head.name class=uk-form-width-small v-model=head.name disabled=\"\" _v-da5218fa=\"\"> </th> </tr> </thead> <tbody _v-da5218fa=\"\"> <tr _v-da5218fa=\"\"> <td v-for=\"(i, attr) in selectRegionTableBody\" _v-da5218fa=\"\"> <input v-if=!i type=text placeholder=\"{{ attr.value | json}}\" class=uk-form-width-small disabled=\"\" _v-da5218fa=\"\"> <select v-else=\"\" v-model=attr.value @change=chooseRegionType(attr.value) _v-da5218fa=\"\"> <option v-for=\"opt in featuresObj\" _v-da5218fa=\"\">{{ opt }}</option> </select> </td> </tr> </tbody> </table> <button class=\"uk-button uk-width-1-1 uk-margin-small-bottom\" @click.stop.prevent=goSubmit _v-da5218fa=\"\">Submit</button> </template> </div> <div class=image-time _v-da5218fa=\"\">{{imageTime}}</div> '},function(t,e,n){var i,r;n(176),i=n(178),r=n(179),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(177);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\"#imageCompare[_v-19a45420]{position:absolute;width:80%;height:100%}#statistics[_v-19a45420]{position:absolute;left:81%;width:19%;height:100%;border:1px solid grey}.image_canvas[_v-19a45420]{position:absolute;left:0;padding:5px;z-index:1}.region_canvas[_v-19a45420]{position:absolute;left:0;padding:5px;z-index:2}#graph1[_v-19a45420],#graph2[_v-19a45420]{position:absolute;width:50%;height:100%}#graph2[_v-19a45420]{left:50%}#tagChannel[_v-19a45420]{width:100%;height:50%}#submmit[_v-19a45420]{position:absolute;width:100%;height:50%;top:50%;font-size:1em}#submitButton[_v-19a45420]{position:absolute;bottom:2%;width:100%}textarea[_v-19a45420]{width:95%;height:100%}.option-text[_v-19a45420]{font-size:1em}textarea input[type=text][_v-19a45420]{-webkit-transition:all .3s ease-in-out;-moz-transition:all .3s ease-in-out;-ms-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;outline:none;padding:3px 0 3px 3px;margin:5px 1px 3px 0;border:1px solid #ddd;width:95%}input[type=text]:focus textarea[_v-19a45420]:focus{box-shadow:0 0 5px #51cbee;padding:3px 0 3px 3px;margin:5px 1px 3px 0;border:1px solid #51cbee}\",\"\"])},function(t,e,n){(function(t){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(53),a=i(r),o=n(6),s=i(o),u=n(36),l=n(103),c=n(46),h=i(c),f=n(165),d=i(f),p=n(114);e.default={vuex:{actions:{eventSubmit:l.eventSubmit,activeRegionSelectionIds:l.activeRegionSelectionIds},getters:{pageSize:u.pageSize,comparedMessage:u.comparedMessage,addedFeatures:u.addedFeatures,activeRegionByIds:u.activeRegionByIds,allRegions:u.allRegions}},data:function(){return{divName:\"image-comparison\",load:!1,currentChannel:\"B1\",channelTagNum:{B3B2B1:0,B5B4B2:0,B4B3B2:0,B1B5B6:0,NDVI:0,B1:0,B2:0,B3:0,B4:0,B5:0,B6:0},$graph1:null,$graph2:null}},watch:{pageSize:{handler:function(t,e){this.load||this.init(),this.pageSizeForGrape(),this.load=!0},deep:!0},comparedMessage:{handler:function(t,e){console.log(\"comparedMessage--------------\"),this.loadComparisonImages()},deep:!0},addedFeatures:{handler:function(t,e){var n=this.addedFeatures.imageName;this.updatePanel(n.split(\"_\")[0])},deep:!0}},methods:{initGraphAll:function(){this.$graph1=new d.default.renders.GraphTag({selector:this.$els.graph1}),this.$graph2=new d.default.renders.GraphTag({selector:this.$els.graph2})},pageSizeForGrape:function(){this.$graph1.init({image_canvas_id:\"image_canvas1\",region_canvas_id:\"region_canvas1\",image_real_width:Math.round((0,s.default)(\"#graph1\").width()),image_real_height:Math.round((0,s.default)(\"#graph1\").height())})},init:function(){var t=this;(0,s.default)(\"#sbutton\").click(function(){t.localEventSubmit()}),this.drawTagPannel()},drawTagPannel:function(){var e=t,n=this.channelTagNum,i=(0,a.default)(n),r=(0,s.default)(\"#tagChannel\").width(),o=(0,s.default)(\"#tagChannel\").height(),u={left:2,right:20,top:2,bottom:15},l=e.select(\"#tagChannel\").append(\"svg\").attr(\"width\",r).attr(\"height\",o);this.channelSvg=l;var c=(o-u.top-u.bottom)/i.length,f=.1*c,d=6*h.default.emSize,p=(r-d)/20,_=l.selectAll(\"g\").data(i).enter().append(\"g\").attr(\"transform\",function(t,e){return\"translate(\"+u.left+\",\"+(u.top+e*c)+\")\"}).attr(\"id\",function(t,e){return\"g\"+t});_.append(\"rect\").attr(\"x\",d).attr(\"y\",0).attr(\"height\",c-f).attr(\"width\",function(t,e){return n[t]*p}).style(\"fill\",\"grey\").attr(\"id\",function(t){return\"rect\"+t}),_.append(\"text\").attr(\"x\",d-2).attr(\"y\",(c-f)/2+5).text(function(t){return t}).attr(\"font-size\",h.default.emSize).attr(\"text-anchor\",\"end\"),_.append(\"text\").attr(\"x\",function(t,e){return n[t]*p+d+2}).attr(\"y\",(c-f)/2+5).text(function(t){return n[t]}).attr(\"id\",function(t){return\"text\"+t}).attr(\"font-size\",h.default.emSize),this.cellWidth=p,this.textWidth=d,this.channelTagNum=n},updatePanel:function(t){var e=this.textWidth,n=this.cellWidth,i=this.channelTagNum;i[t]+=1,(0,s.default)(\"#rect\"+t).attr(\"width\",i[t]*n),(0,s.default)(\"#text\"+t).attr(\"x\",i[t]*n+e+2).text(i[t])},loadComparisonImages:function(){var t=(0,s.default)(\"#graph1\").width(),e=(0,s.default)(\"#graph1\").height(),n=h.default.emSize,i={left:10,right:10,top:2,bottom:n},r=t-i.left-i.right,a=i.top+r+10,o=a-5,u=p.select(\"#graph1\").append(\"svg\").attr(\"width\",t).attr(\"height\",e),l=p.select(\"#graph2\").append(\"svg\").attr(\"width\",t).attr(\"height\",e),c=\"2014_03_17, 2014_08_24, 2014_11_28, 2014_12_30, 2015_02_15, 2015_06_24, 2015_09_12, 2015_11_15, 2016_03_06, 2016_06_26, 2016_09_06, 2016_12_19\";c=c.split(\",\"),c=c.map(function(t,e){return t.trim()}),this.currentChannel=this.comparedMessage.img1.feature.name,this.time=c;var f=e/200;if(\"originalImgs\"===this.comparedMessage.type){if(null===this.comparedMessage.img2){var d=s.default.extend(!0,{},this.comparedMessage);this.localComparedMessage=d;var _=d.img1.imgName;if(null!==_){var v=_.split(\"_\")[0],g=\"../../../data/\"+v+\"/\"+_+\".png\",m=this.$graph1.loadStoreLocalImg(g,_);console.log(\"imgIndex\",m),this.activeRegionSelectionIds(_,[this.currentChannel.substr(7)-1]),this.$graph1.importAnnotationsFromJson(this.activeRegionByIds),this.$graph1.showImage(m)}return}var y=this.comparedMessage.img1.imgName.split(\"_\"),b=y[1]+\"_\"+y[2]+\"_\"+y[3],x=this.comparedMessage.img2.imgName.split(\"_\"),w=x[1]+\"_\"+x[2]+\"_\"+x[3],k=this.time.indexOf(b),M=this.time.indexOf(w),C=s.default.extend(!0,{},this.comparedMessage);if(k>M){var E=s.default.extend(!0,{},C.img1);C.img1=s.default.extend(!0,{},C.img2),C.img2=E,b=this.time[M],w=this.time[k]}this.localComparedMessage=C;var S=C.img1.imgName,I=C.img2.imgName;if(null!==S){console.log(\"img1Name-----\",S);var O=S.split(\"_\")[0];this.currentChannel=O;var T=\"../../../data/\"+O+\"/\"+S+\".png\",A=u.append(\"g\");A.append(\"image\").attr(\"xlink:href\",T).attr(\"width\",r).attr(\"height\",r).attr(\"transform\",\"translate(\"+i.left+\",\"+i.top+\")\"),u.append(\"text\").attr(\"y\",a).attr(\"x\",t/2).text(b).attr(\"alignment-baseline\",\"hanging\").attr(\"text-anchor\",\"middle\").attr(\"font-size\",n),u.append(\"line\").attr(\"y1\",o).attr(\"x1\",i.left).attr(\"x2\",t-i.right).attr(\"y2\",o).style(\"stroke\",C.img1.color).style(\"stroke-width\",f+\"px\")}if(null!==I){var P=I.split(\"_\")[0],j=\"../../../data/\"+P+\"/\"+I+\".png\",R=l.append(\"g\");R.append(\"image\").attr(\"xlink:href\",j).attr(\"width\",r).attr(\"height\",r).attr(\"transform\",\"translate(\"+i.left+\",\"+i.top+\")\"),l.append(\"text\").attr(\"y\",a).attr(\"x\",t/2).attr(\"alignment-baseline\",\"hanging\").attr(\"text-anchor\",\"middle\").text(w).attr(\"font-size\",n),l.append(\"line\").attr(\"y1\",o).attr(\"x1\",i.left).attr(\"x2\",t-i.right).attr(\"y2\",o).style(\"stroke\",C.img2.color).style(\"stroke-width\",f+\"px\")}}},localEventSubmit:function(){var t=this.localComparedMessage,e=t.img1.imgName.split(\"_\"),n=e[0],i=t.img1.feature.name,r=e[1]+\"_\"+e[2]+\"_\"+e[3],a=t.img2.imgName.split(\"_\"),o=a[1]+\"_\"+a[2]+\"_\"+a[3],u=a[0],l=t.img2.feature.name,c={};c.comments=(0,s.default)(\"#commentsText\").val(),c.type=(0,s.default)(\"#eventSelect\").val(),c.start={time:r,channel:n,feature:i},c.end={time:o,channel:u,feature:l},console.log(c),this.eventSubmit(c),this.updatePanel(this.currentChannel)}},ready:function(){this.initGraphAll()}}}).call(e,n(35))},function(t,e){t.exports=' <div id=imageCompare style=\"padding-left: 0; padding-right: 0; padding-top: 0\" _v-19a45420=\"\"> <div v-el:graph1=\"\" id=graph1 _v-19a45420=\"\"> <canvas id=image_canvas1 class=image_canvas _v-19a45420=\"\"></canvas> <canvas id=region_canvas1 class=region_canvas _v-19a45420=\"\"></canvas> </div> <div v-el:graph2=\"\" id=graph2 _v-19a45420=\"\"> <canvas id=image_canvas2 class=image_canvas _v-19a45420=\"\"></canvas> <canvas id=region_canvas2 class=region_canvas _v-19a45420=\"\"></canvas> </div> </div> <div id=statistics _v-19a45420=\"\"> <div id=tagChannel _v-19a45420=\"\"></div> <div id=submmit _v-19a45420=\"\"> <div _v-19a45420=\"\"> Type <select id=eventSelect _v-19a45420=\"\"> <option value=Flood class=option-text _v-19a45420=\"\">Flood</option> <option value=Burnt class=option-text _v-19a45420=\"\">Burnt</option> <option value=Shrink class=option-text _v-19a45420=\"\">Shrink</option> <option value=Expand class=option-text _v-19a45420=\"\">Expand</option> </select> </div> <div style=\"margin-top: 10px\" _v-19a45420=\"\"> Description </div> <div style=\"height: 50%\" _v-19a45420=\"\"> <textarea id=commentsText name=textarea _v-19a45420=\"\"></textarea> </div> <div style=\"text-align: center\" id=submitButton _v-19a45420=\"\"> <button type=button id=sbutton _v-19a45420=\"\"> Submit</button> </div> </div> </div> '},function(t,e,n){var i,r;n(181),i=n(183),r=n(184),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(182);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\".curveAxis line[_v-0f722f48],.curveAxis path[_v-0f722f48]{fill:red;stroke:#000;shape-rendering:crispEdges}.line[_v-0f722f48]{fill:none;stroke:#4682b4;stroke-width:1.5px}#distribution[_v-0f722f48]{position:absolute;left:0;top:0;width:100%;height:92%}#pannel[_v-0f722f48]{position:absolute;bottom:1%;height:20px;left:0;width:70%}#timelineLeft[_v-0f722f48]{position:absolute;left:0;top:0;width:70%;height:100%;border:1px solid grey}#timelineLeft #timeline1[_v-0f722f48],#timelineLeft #timeline2[_v-0f722f48],#timelineLeft #timeline3[_v-0f722f48],#timelineLeft #timeline4[_v-0f722f48],#timelineLeft #timeline5[_v-0f722f48],#timelineLeft #timeline6[_v-0f722f48],#timelineLeft #timeline7[_v-0f722f48]{height:8.1%;border-bottom:1px solid grey}#timelineLeft #timeline8[_v-0f722f48]{height:8%;border-bottom:1px solid grey}#timelineLeft #timeline9[_v-0f722f48],#timelineLeft #timeline10[_v-0f722f48],#timelineLeft #timeline11[_v-0f722f48]{height:8.1%;border-bottom:1px solid grey}#timelineLeft #timeline12[_v-0f722f48]{height:8.1%}#timelineRight[_v-0f722f48]{position:absolute;left:70%;top:0;width:30%;height:100%}\",\"\"])},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(6),a=i(r),o=n(36),s=n(103),u=n(17),l=n(46),c=i(l);e.default={vuex:{getters:{pageSize:o.pageSize,lassoArea:o.lassoArea,addedFeatures:o.addedFeatures},actions:{transFeatures:s.transFeatures}},data:function(){return{isNDVI:!1,selectedCmp:\"Near\"}},watch:{pageSize:{handler:function(t,e){if(!this.load)for(var n=1;n<13;n++)for(var i=[],r=0;r<20;r++)i.push({time:r,num:parseInt(20*Math.random())});this.load=!0},deep:!0},lassoArea:{handler:function(t,e){for(var n=[],i=this.lassoArea[0].length,r=0;r<i;r++)n.push([this.lassoArea[0][r],this.lassoArea[1][r]]);this.updateDistribution((0,u.getPointsOfArea)(n))},deep:!0},addedFeatures:{handler:function(t,e){this.features={},this.features.featureName=this.addedFeatures.featureName;var n=this.addedFeatures.imageName;this.features.featureChannel=n.split(\"_\")[0]},deep:!0}},methods:{init:function(t,e,i){var r=this,o=n(114);r.width=(0,a.default)(t).width(),r.height=(0,a.default)(t).height();var s=.8*c.default.emSize,u=4*s;r.margin={left:2,right:2,top:1,bottom:3},r.w=(r.width-u)/e.length;var l=r.w;r.w=r.w-r.margin.left-r.margin.right,r.height=r.height-r.margin.top-r.margin.bottom,r.xScale.range([0,r.w]),r.yScale.range([r.height,0]),(0,a.default)(t).empty();var h=c.default.date[i].split(\"_\");h=h[0]+\"_\"+h[1];var f=o.select(t).append(\"svg\").attr(\"width\",r.width).attr(\"height\",r.height+r.margin.top+r.margin.bottom);if(f.append(\"text\").attr(\"x\",u).attr(\"y\",(r.height+r.margin.top+r.margin.bottom)/2).attr(\"alignment-baseline\",\"middle\").attr(\"text-anchor\",\"end\").attr(\"font-size\",s).text(h),r.svg=f.selectAll(\"g\").data(e).enter().append(\"g\").attr(\"transform\",function(t,e){return\"translate(\"+(r.margin.left+e*l+u)+\",\"+r.margin.top+\")\"}).attr(\"id\",function(t,e){return\"g\"+e}),o.selectAll(\".curveAxis\").style(\"fill\",\"none\").style(\"stroke\",\"black\").style(\"stroke-width\",\"0.5px\"),r.barWidth=r.w/e[0].length,r.svg.selectAll(\".arrbar\").data(function(t){return t}).enter().append(\"rect\").attr(\"class\",\"arrbarbot\").attr(\"x\",function(t){return r.xScale(t.time)}).attr(\"y\",function(t){return r.yScale(r.barHeight(t.num))}).attr(\"width\",r.barWidth).attr(\"height\",function(t){return r.height-r.yScale(r.barHeight(t.num))}).style(\"fill\",\"grey\"),0===i)for(var d=0;d<r.currentChannels.length;d++)o.select(\"#g\"+d).append(\"text\").attr(\"x\",r.w/2).attr(\"alignment-baseline\",\"hanging\").attr(\"text-anchor\",\"middle\").text(r.currentChannels[d]).attr(\"font-size\",s)},updateDistribution:function(t){var e=n(114),i=this;i.points=t,i.xScale=e.scale.linear(),i.yScale=e.scale.linear();var r=[\"B1\",\"B2\",\"B3\",\"B4\",\"B5\",\"B6\",\"NDVI\"];this.allChannels=r;var a=window.dataArr,o={},s=window.currentSelectionChannel;if(\"NDVI\"===s&&!i.NDVI){var u=-1,l=1e3;i.NDVI=!0;for(var c=0;c<a.length;c++)for(var h=0;h<651;h++)for(var f=0;f<651;f++){var d=a[c][h][f][3],p=a[c][h][f][2],_=0;d+p!==0&&(_=(d-p)/(d+p)),a[c][h][f].push(_),u=Math.max(_,u),l=Math.min(_,l)}console.log(u,l);for(var v=0;v<a.length;v++)for(var g=0;g<651;g++)for(var m=0;m<651;m++){var y=a[v][g][m][6];a[v][g][m][6]=parseInt((y-l)/(u-l)*255)}}var b=[];b=6===s.length?[s[0]+s[1],s[2]+s[3],s[4]+s[5]]:[s];for(var x=[],w=0;w<b.length;w++)x.push(r.indexOf(b[w]));i.currentChannels=b;for(var k=t.length,M=[],C=0;C<12;C++){for(var E=[],S=0;S<x.length;S++){for(var I=0;I<256;I++)o[I]=0;for(var O=0;O<k;O++){var T=a[C][t[O][0]][t[O][1]][x[S]],A=T;o[A]+=1}var P=[];for(var j in o)P.push({time:+j,num:o[j],channel:b});E.push(P)}M.push(E)}i.xScale.domain([0,256]),i.yScale.domain([0,e.max(M,function(t){return e.max(t,function(t){return e.max(t,function(t){return i.barHeight(t.num)})})})]),console.log(i.xScale.domain()),console.log(i.yScale.domain());for(var R=0;R<M.length;R++)i.init(\"#timeline\"+(R+1),M[R],R);this.allData=M,this.updateLine(\"#timelineRight\")},barHeight:function(t){return Math.sqrt(t)},updateLine:function(t){var e=this.selectedCmp,n=this.allData,i=[],r=n.length,a=this.currentChannels,o=this.allChannels,s=this.points;if(\"Near\"===e)for(var u=0;u<r-1;u++){for(var l=0,c=0;c<a.length;c++)l+=this.calImageDifferenceByAbs(u,u+1,o.indexOf(a[c]),s);i.push({start:u,end:u+1,value:l})}else if(\"Year\"===e)for(var h=0;h+4<r;h++){for(var f=0,d=0;d<a.length;d++)f+=this.calImageDifferenceByAbs(h,h+4,o.indexOf(a[d]),s);i.push({start:h,end:h+4,value:f})}else if(\"Random\"===e)for(var p=0;p<r;p++)for(var _=p+1;_<r;_++){for(var v=0,g=0;g<a.length;g++)v+=this.calImageDifferenceByAbs(p,_,o.indexOf(a[g]),s);i.push({start:p,end:_,value:v})}i.sort(function(t,e){return e.value-t.value}),console.log(i),this.updateLink(i,t)},updateLink:function(t,e){var i=this;(0,a.default)(e).empty();for(var r=n(114),o=(0,a.default)(e).width(),s=(0,a.default)(e).height(),u=s/12,l=r.select(\"#timelineRight\").append(\"svg\").attr(\"width\",o).attr(\"height\",s),h=.2*o,f=.6,d=u*f,p=o/1.5,_=r.svg.line().x(function(t){return t[0]}).y(function(t){return t[1]}).interpolate(\"linear\"),v=r.max(t,function(t){return t.value}),g=0;g<t.length&&g<12;g++){var m=t[g].value/v;l.append(\"rect\").attr(\"x\",p-h/2).attr(\"width\",h).attr(\"y\",u/2-d/2+g*u).attr(\"height\",d*(1-m)).style(\"fill\",\"white\").attr(\"id\",\"rect\"+g).on(\"mouseover\",function(){(0,a.default)(\".linkline\").css(\"display\",\"none\");var t=(0,a.default)(this).attr(\"id\").split(\"ect\")[1];(0,a.default)(\"#pathu\"+t).css(\"display\",\"block\"),(0,a.default)(\"#pathd\"+t).css(\"display\",\"block\")}).style(\"stroke\",\"gray\").on(\"click\",function(){var e=+(0,a.default)(this).attr(\"id\").split(\"ect\")[1],n=t[e].start,r=t[e].end,o=i.features.featureChannel+\"_\"+c.default.date[n],s=i.features.featureChannel+\"_\"+c.default.date[r];i.transFeatures({featureName:i.features.featureName,imageName1:o,imageName2:s})}),l.append(\"rect\").attr(\"x\",p-h/2).attr(\"width\",h).attr(\"y\",u/2-d/2+g*u+d*(1-m)).attr(\"height\",d*m).style(\"fill\",\"gray\").attr(\"id\",\"rect\"+g).on(\"mouseover\",function(){(0,a.default)(\".linkline\").css(\"display\",\"none\");var t=(0,a.default)(this).attr(\"id\").split(\"ect\")[1];(0,a.default)(\"#pathu\"+t).css(\"display\",\"block\"),(0,a.default)(\"#pathd\"+t).css(\"display\",\"block\")}).style(\"stroke\",\"gray\").on(\"click\",function(){var e=+(0,a.default)(this).attr(\"id\").split(\"ect\")[1],n=t[e].start,r=t[e].end,o=i.features.featureChannel+\"_\"+c.default.date[n],s=i.features.featureChannel+\"_\"+c.default.date[r];i.transFeatures({featureName:i.features.featureName,imageName1:o,imageName2:s})});var y=+t[g].start,b=[],x=0,w=p,k=(x+w)/2,M=y*u+u/2,C=g*u+(1-f)/2/2*u,E=g*u+(1-f)/2*u;b.push([x,M],[k,M],[k,C],[w,C],[w,E]),l.append(\"path\").style(\"fill\",\"none\").style(\"stroke-width\",\"1px\").style(\"stroke\",\"gray\").attr(\"d\",_(b)).attr(\"class\",\"linkline\").attr(\"id\",\"pathu\"+g);var S=+t[g].end;k=(x+w)/1.5,M=S*u+u/2,C=(g+1)*u-(1-f)/2/2*u,E=(g+1)*u-(1-f)/2*u,b=[],b.push([x,M],[k,M],[k,C],[w,C],[w,E]),l.append(\"path\").style(\"fill\",\"none\").style(\"stroke-width\",\"1px\").style(\"stroke\",\"gray\").attr(\"d\",_(b)).attr(\"class\",\"linkline\").attr(\"id\",\"pathd\"+g),\n0===g?((0,a.default)(\"#pathu\"+g).css(\"display\",\"block\"),(0,a.default)(\"#pathd\"+g).css(\"display\",\"block\")):((0,a.default)(\"#pathu\"+g).css(\"display\",\"none\"),(0,a.default)(\"#pathd\"+g).css(\"display\",\"none\"))}},calDiff:function(t,e){for(var n=0,i=0;i<t.length;i++)for(var r=t[i],a=e[i],o=r.length,s=0;s<o;s++)n+=Math.abs(r[s].num-a[s].num);return n},calImageDifferenceByAbs:function(t,e,n,i){for(var r=0,a=window.dataArr,o=i.length,s=0;s<o;s++){var u=a[t],l=a[e];r+=Math.abs(u[i[s][0]][i[s][1]][n]-l[i[s][0]][i[s][1]][n])}return r/o}},ready:function(){var t=this;(0,a.default)(\"#compareSelect\").change(function(){var e=(0,a.default)(this).children(\"option:selected\").val();console.log(e),e!==t.selectedCmp&&(t.selectedCmp=e,t.updateLine(\"#timelineRight\"))})}}},function(t,e){t.exports=' <div id=distribution _v-0f722f48=\"\"> <div id=timelineLeft _v-0f722f48=\"\"> <div id=timeline1 _v-0f722f48=\"\"> </div> <div id=timeline2 _v-0f722f48=\"\"> </div> <div id=timeline3 _v-0f722f48=\"\"> </div> <div id=timeline4 _v-0f722f48=\"\"> </div> <div id=timeline5 _v-0f722f48=\"\"> </div> <div id=timeline6 _v-0f722f48=\"\"> </div> <div id=timeline7 _v-0f722f48=\"\"> </div> <div id=timeline8 _v-0f722f48=\"\"> </div> <div id=timeline9 _v-0f722f48=\"\"> </div> <div id=timeline10 _v-0f722f48=\"\"> </div> <div id=timeline11 _v-0f722f48=\"\"> </div> <div id=timeline12 _v-0f722f48=\"\"> </div> </div> <div id=timelineRight style=\"text-align: center\" _v-0f722f48=\"\"> </div> </div> <div id=pannel style=\"text-align: center\" _v-0f722f48=\"\"> <select id=compareSelect _v-0f722f48=\"\"> <option value=Near class=option-text _v-0f722f48=\"\">Near</option> <option value=Year class=option-text _v-0f722f48=\"\">Year</option> <option value=Random class=option-text _v-0f722f48=\"\">Random</option> </select> </div> '},function(t,e,n){var i,r;n(186),i=n(188),r=n(189),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports.default),r&&((\"function\"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=r)},function(t,e,n){var i=n(187);\"string\"==typeof i&&(i=[[t.id,i,\"\"]]);n(15)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(14)(),e.push([t.id,\"#timeLine[_v-5040f57f]{position:absolute;width:100%;height:100%}\",\"\"])},function(t,e,n){(function(t){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(6),a=i(r),o=n(36),s=n(46),u=i(s);e.default={vuex:{getters:{pageSize:o.pageSize,comparedMessage:o.comparedMessage}},data:function(){return{timeLineDone:!1}},watch:{pageSize:{handler:function(t,e){this.load||this.init(),this.load=!0},deep:!0},comparedMessage:{handler:function(t,e){this.updateTimeCurve()},deep:!0}},methods:{init:function(){this.drawTimelineView()},drawTimelineView:function(){if(!this.timeLineDone){var e=t,n=(0,a.default)(\"#timeLine\").width(),i=(0,a.default)(\"#timeLine\").height(),r=e.select(\"#timeLine\").append(\"svg\").attr(\"width\",n).attr(\"height\",i),o={left:2,right:20,top:2,bottom:2},s=r.append(\"defs\"),l=s.append(\"marker\").attr(\"id\",\"arrow\").attr(\"markerUnits\",\"strokeWidth\").attr(\"markerWidth\",\"12\").attr(\"markerHeight\",\"12\").attr(\"viewBox\",\"0 0 12 12\").attr(\"refX\",\"6\").attr(\"refY\",\"6\").attr(\"orient\",\"auto\"),c=\"M2,2 L10,6 L2,10 L6,6 L2,2\";l.append(\"path\").attr(\"d\",c).attr(\"fill\",\"#000\"),r.append(\"line\").attr(\"x1\",o.left).attr(\"y1\",o.top+i/3).attr(\"x2\",n-o.right).attr(\"y2\",o.top+i/3).style(\"stroke\",\"grey\").style(\"stroke-width\",\"2px\").attr(\"marker-end\",\"url(#arrow)\");var h=[2014,2015,2016],f=(n-o.left-o.right)/3;h.forEach(function(t,e){r.append(\"text\").attr(\"y\",o.top+i/3+.1*i).attr(\"x\",f*e+f/2+o.left).text(t).attr(\"font-size\",u.default.emSize).attr(\"alignment-baseline\",\"hanging\").attr(\"text-anchor\",\"middle\")});var d=u.default.date,p=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],_=(0,a.default)(\"#image-matrix-div\").height()/11*.9;d.forEach(function(t,e){var i=t.split(\"_\");i=+i[1];var a=p[i-1];r.append(\"text\").attr(\"y\",2).attr(\"x\",n/12*e+_/2).attr(\"alignment-baseline\",\"hanging\").attr(\"text-anchor\",\"middle\").text(a).attr(\"font-size\",\"0.7em\")}),this.width=n,this.padding=o,this.height=i,this.svg=r,this.timeLineDone=!0}},updateTimeCurve:function(){this.timeLineDone||this.drawTimelineView(),(0,a.default)(\".timeCurve\").remove();var t=a.default.extend(!0,{},this.comparedMessage),e=\"2014_03_17, 2014_08_24, 2014_11_28, 2014_12_30, 2015_02_15, 2015_06_24, 2015_09_12, 2015_11_15, 2016_03, 2016_06_26, 2016_09_06, 2016_12_19\";if(e=e.split(\",\"),e=e.map(function(t,e){return t.trim()}),null===t.img2){var n=t.img1.imgName.split(\"_\"),i=n[1]+\"_\"+n[2]+\"_\"+n[3],r=e.indexOf(i);return void this.drawCurve(r,0)}var o=t.img1.imgName.split(\"_\"),s=o[1]+\"_\"+o[2]+\"_\"+o[3],u=t.img2.imgName.split(\"_\"),l=u[1]+\"_\"+u[2]+\"_\"+u[3],c=e.indexOf(s),h=e.indexOf(l);if(c>h){var f=c;c=h,h=f}this.drawCurve(c,0),this.drawCurve(h,1)},drawCurve:function(e,n){var i=this.width,r=this.svg,a=this.height,o=this.padding,s=t,u=[0,o.top+a/3];u[0]=e/12*i;var l=[i/6+i/3*n,a],c=(l[0]-u[0])/4+u[0],h=(u[1]+l[1])/2,f=[];f.push(c),f.push(h);var d=[3*(l[0]-u[0])/4+u[0],(u[1]+l[1])/2],p=[u,f,d,l];console.log(p);var _=s.line().x(function(t){return t[0]+i/12/3}).y(function(t){return t[1]}).curve(s.curveBundle.beta(.5));r.append(\"path\").datum(p).attr(\"fill\",\"none\").attr(\"stroke\",\"grey\").attr(\"stroke-opacity\",\"0.8\").attr(\"stroke-width\",2).attr(\"d\",_).attr(\"class\",\"timeCurve\")}},ready:function(){}}}).call(e,n(35))},function(t,e){t.exports=' <div id=timeLine _v-5040f57f=\"\"></div> '},function(t,e){t.exports=' <div class=main-bottom :style=mainBottomStyle _v-79114229=\"\"> <div id=image-tagged :style=imageTaggedStyle _v-79114229=\"\"> <image-tagged-view _v-79114229=\"\"></image-tagged-view> </div> <div id=image-comparison :style=imageComparisonStyle _v-79114229=\"\"> <image-comparison-view _v-79114229=\"\"></image-comparison-view> </div> <div id=distribution-histogram :style=DistributionHistogramViewStyle _v-79114229=\"\"> <distribution-histogram-view _v-79114229=\"\"></distribution-histogram-view> </div> <div id=timeline :style=TimelineViewStyle _v-79114229=\"\"> <timeline-view _v-79114229=\"\"></timeline-view> </div> </div> '},function(t,e){t.exports=' <div id=AppMain _v-2f1425bb=\"\"> <div class=containter _v-2f1425bb=\"\"> <div class=loading id=loading _v-2f1425bb=\"\"> <div class=back _v-2f1425bb=\"\"></div> <div class=logo _v-2f1425bb=\"\"> <i class=\"fa fa-spinner fa-spin fa-lg\" _v-2f1425bb=\"\"></i> <span _v-2f1425bb=\"\"> Loading ...</span> </div> </div> <app-main-top-view _v-2f1425bb=\"\"></app-main-top-view> <app-main-bottom-view _v-2f1425bb=\"\"></app-main-bottom-view> </div> </div> '},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n={};n.decode=function(t){n.decode._decodeG3.allow2D=null;var e=new Uint8Array(t),i=0,r=n._binBE.readASCII(e,i,2);i+=2;var a=\"II\"==r?n._binLE:n._binBE;a.readUshort(e,i);i+=2;var o=a.readUint(e,i);i+=4;for(var s=[];;){var u=n.decode._readIFD(a,e,o,s);if(o=a.readUint(e,u),0==o)break}if(null==s[0].t256)return s;for(var l=0;l<s.length;l++){var c=s[l];c.width=c.t256[0],delete c.t256,c.height=c.t257[0],delete c.t257;var h=c.t259[0];delete c.t259;var f=c.t266?c.t266[0]:1;delete c.t266,c.t284&&2==c.t284[0]&&console.log(\"PlanarConriguration 2 should not be used!\");var d=(c.t258?c.t258[0]:1)*(c.t277?c.t277[0]:1),p=c.t273;null==p&&(p=c.t324);var _=c.t279;1==h&&1==p.length&&(_=[c.height*c.width*d>>3]),null==_&&(_=c.t325);var v=new Uint8Array(c.width*c.height*d>>3),g=0;if(null!=c.t322){for(var m=c.t322[0],y=c.t323[0],b=Math.floor((c.width+m-1)/m),x=Math.floor((c.height+y-1)/y),w=new Uint8Array(m*y*d>>3),k=0;k<x;k++)for(var M=0;M<b;M++){for(var C=k*b+M,E=0;E<w.length;E++)w[E]=0;n.decode._decompress(c,e,p[C],_[C],h,w,0,f),n._copyTile(w,m*d>>3,y,v,c.width*d>>3,c.height,M*m*d>>3,k*y)}g=v.length<<3}else{var S=c.t278?c.t278[0]:c.height;S=Math.min(S,c.height);for(var C=0;C<p.length;C++)n.decode._decompress(c,e,p[C],_[C],h,v,g>>3,f),g+=c.width*d*S;g=Math.min(g,v.length<<3)}c.data=new Uint8Array(v.buffer,0,g>>3)}return s},n.decode._decompress=function(t,e,i,r,a,o,s,u){if(1==a)for(var l=0;l<r;l++)o[s+l]=e[i+l];else if(3==a)n.decode._decodeG3(e,i,r,o,s,t.width,u);else if(4==a)n.decode._decodeG4(e,i,r,o,s,t.width,u);else if(5==a)n.decode._decodeLZW(e,i,o,s);else if(8==a){var c=new Uint8Array(e.buffer,i,r),h=pako.inflate(c);console.log(h.length);for(var f=0;f<h.length;f++)o[s+f]=h[f]}else 32773==a?n.decode._decodePackBits(e,i,r,o,s):32809==a?n.decode._decodeThunder(e,i,r,o,s):console.log(\"Unknown compression\",a);if(t.t317&&2==t.t317[0])for(var d=t.t277?t.t277[0]:1,p=t.t278?t.t278[0]:t.height,_=t.width*d,v=0;v<p;v++)for(var g=s+v*_,l=d;l<_;l++)o[g+l]=o[g+l]+o[g+l-d]&255},n.decode._decodePackBits=function(t,e,n,i,r){for(var a=new Int8Array(t.buffer),o=new Int8Array(i.buffer),s=e+n;e<s;){var u=a[e];if(e++,u>=0&&u<128)for(var l=0;l<u+1;l++)o[r]=a[e],r++,e++;if(u>=-127&&u<0){for(var l=0;l<-u+1;l++)o[r]=a[e],r++;e++}}},n.decode._decodeThunder=function(t,e,n,i,r){for(var a=[0,1,0,-1],o=[0,1,2,3,0,-3,-2,-1],s=e+n,u=2*r,l=0;e<s;){var c=t[e],h=c>>6,f=63&c;if(e++,3==h&&(l=15&f,i[u>>1]|=l<<4*(1-u&1),u++),0==h)for(var d=0;d<f;d++)i[u>>1]|=l<<4*(1-u&1),u++;if(2==h)for(var d=0;d<2;d++){var p=f>>3*(1-d)&7;4!=p&&(l+=o[p],i[u>>1]|=l<<4*(1-u&1),u++)}if(1==h)for(var d=0;d<3;d++){var p=f>>2*(2-d)&3;2!=p&&(l+=a[p],i[u>>1]|=l<<4*(1-u&1),u++)}}},n.decode._dmap={1:0,\"011\":1,\"000011\":2,\"0000011\":3,\"010\":-1,\"000010\":-2,\"0000010\":-3},n.decode._lens=function(){var t=function(t,e,n,i){for(var r=0;r<e.length;r++)t[e[r]]=n+r*i},e=\"00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100\",n=\"0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111\",i=\"11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011\",r=\"0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101\",a=\"00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111\";e=e.split(\",\"),n=n.split(\",\"),i=i.split(\",\"),r=r.split(\",\"),a=a.split(\",\");var o={},s={};return t(o,e,0,1),t(o,i,64,64),t(o,a,1792,64),t(s,n,0,1),t(s,r,64,64),t(s,a,1792,64),[o,s]}(),n.decode._decodeG4=function(t,e,i,r,a,o,s){for(var u=n.decode,l=e<<3,c=0,h=\"\",f=[],d=[],p=0;p<o;p++)d.push(0);d=u._makeDiff(d);for(var _=0,v=0,g=0,m=0,y=0,b=0,x=\"\",w=0;l>>3<e+i;){g=u._findDiff(d,_+(0==_?0:1),1-y),m=u._findDiff(d,g,y);var k=0;if(1==s&&(k=t[l>>3]>>7-(7&l)&1),2==s&&(k=t[l>>3]>>(7&l)&1),l++,h+=k,\"H\"==x){if(null!=u._lens[y][h]){var M=u._lens[y][h];h=\"\",c+=M,M<64&&(u._addNtimes(f,c,y),_+=c,y=1-y,c=0,w--,0==w&&(x=\"\"))}}else\"0001\"==h&&(h=\"\",u._addNtimes(f,m-_,y),_=m),\"001\"==h&&(h=\"\",x=\"H\",w=2),null!=u._dmap[h]&&(v=g+u._dmap[h],u._addNtimes(f,v-_,y),_=v,h=\"\",y=1-y);f.length==o&&\"\"==x&&(u._writeBits(f,r,8*a+b*o),y=0,b++,_=0,d=u._makeDiff(f),f=[])}},n.decode._findDiff=function(t,e,n){for(var i=0;i<t.length;i+=2)if(t[i]>=e&&t[i+1]==n)return t[i]},n.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var n=1;n<t.length;n++)t[n-1]!=t[n]&&e.push(n,t[n]);return e.push(t.length,0,t.length,1),e},n.decode._decodeG3=function(t,e,i,r,a,o,s){for(var u=n.decode,l=e<<3,c=0,h=\"\",f=[],d=[],p=0;p<o;p++)f.push(0);for(var _=0,v=0,g=0,m=0,y=0,b=-1,x=\"\",w=0,k=!1;l>>3<e+i;){g=u._findDiff(d,_+(0==_?0:1),1-y),m=u._findDiff(d,g,y);var M=0;if(1==s&&(M=t[l>>3]>>7-(7&l)&1),2==s&&(M=t[l>>3]>>(7&l)&1),l++,h+=M,k){if(null!=u._lens[y][h]){var C=u._lens[y][h];h=\"\",c+=C,C<64&&(u._addNtimes(f,c,y),y=1-y,c=0)}}else if(\"H\"==x){if(null!=u._lens[y][h]){var C=u._lens[y][h];h=\"\",c+=C,C<64&&(u._addNtimes(f,c,y),_+=c,y=1-y,c=0,w--,0==w&&(x=\"\"))}}else\"0001\"==h&&(h=\"\",u._addNtimes(f,m-_,y),_=m),\"001\"==h&&(h=\"\",x=\"H\",w=2),null!=u._dmap[h]&&(v=g+u._dmap[h],u._addNtimes(f,v-_,y),_=v,h=\"\",y=1-y);h.endsWith(\"000000000001\")&&(b>=0&&u._writeBits(f,r,8*a+b*o),1==s&&(k=1==(t[l>>3]>>7-(7&l)&1)),2==s&&(k=1==(t[l>>3]>>(7&l)&1)),l++,null==u._decodeG3.allow2D&&(u._decodeG3.allow2D=k),u._decodeG3.allow2D||(k=!0,l--),h=\"\",y=0,b++,_=0,d=u._makeDiff(f),f=[])}f.length==o&&u._writeBits(f,r,8*a+b*o)},n.decode._addNtimes=function(t,e,n){for(var i=0;i<e;i++)t.push(n)},n.decode._writeBits=function(t,e,n){for(var i=0;i<t.length;i++)e[n+i>>3]|=t[i]<<7-(n+i&7)},n.decode._decodeLZW=function(t,e,n,i){for(var r=[],a=9,o=e<<3,s=256,u=257,l=0,c=0,h=0;;){if(l=t[o>>3]<<16|t[o+8>>3]<<8|t[o+16>>3],c=l>>24-(7&o)-a&(1<<a)-1,o+=a,0==r.length&&c!=s)return void console.log(\"Error in LZW\");if(c==u)break;if(c==s){a=9,r=[];for(var f=0;f<258;f++)r[f]=[f];if(l=t[o>>3]<<16|t[o+8>>3]<<8|t[o+16>>3],c=l>>24-(7&o)-a&(1<<a)-1,o+=a,c==u)break;for(var f=0;f<r[c].length;f++)n[i+f]=r[c][f];i+=r[c].length,h=c}else if(c<r.length){for(var f=0;f<r[c].length;f++)n[i+f]=r[c][f];i+=r[c].length;var d=r[h].slice(0);d.push(r[c][0]),r.push(d),r.length+1==1<<a&&a++,h=c}else{var p=r[h].slice(0);p.push(p[0]);for(var f=0;f<p.length;f++)n[i+f]=p[f];i+=p.length,r.push(p),r.length+1==1<<a&&a++,h=c}}},n.tags={254:\"NewSubfileType\",255:\"SubfileType\",256:\"ImageWidth\",257:\"ImageLength\",258:\"BitsPerSample\",259:\"Compression\",262:\"PhotometricInterpretation\",266:\"FillOrder\",269:\"DocumentName\",270:\"ImageDescription\",271:\"Make\",272:\"Model\",273:\"StripOffset\",274:\"Orientation\",277:\"SamplesPerPixel\",278:\"RowsPerStrip\",279:\"StripByteCounts\",280:\"MinSampleValue\",281:\"MaxSampleValue\",282:\"XResolution\",283:\"YResolution\",284:\"PlanarConfiguration\",286:\"XPosition\",287:\"YPosition\",292:\"T4Options\",296:\"ResolutionUnit\",297:\"PageNumber\",305:\"Software\",306:\"DateTime\",315:\"Artist\",317:\"Predictor\",320:\"ColorMap\",321:\"HalftoneHints\",322:\"TileWidth\",323:\"TileLength\",324:\"TileOffset\",325:\"TileByteCounts\",336:\"DotRange\",338:\"ExtraSample\",339:\"SampleFormat\",512:\"JPEGProc\",513:\"JPEGInterchangeFormat\",514:\"JPEGInterchangeFormatLength\",519:\"JPEGQTables\",520:\"JPEGDCTables\",521:\"JPEGACTables\",529:\"YCbCrCoefficients\",530:\"YCbCrSubSampling\",531:\"YCbCrPositioning\",532:\"ReferenceBlackWhite\",33432:\"Copyright\",34377:\"Photoshop\"},n.decode._readIFD=function(t,e,n,i){var r=t.readUshort(e,n);n+=2;var a={};i.push(a);for(var o=0;o<r;o++){var s=t.readUshort(e,n);n+=2;var u=t.readUshort(e,n);n+=2;var l=t.readUint(e,n);n+=4;var c=t.readUint(e,n);n+=4;var h=a[\"t\"+s]=[];if(1==u||7==u)for(var f=0;f<l;f++)h.push(e[(l<5?n-4:c)+f]);if(2==u&&h.push(t.readASCII(e,l<5?n-4:c,l-1)),3==u)for(var f=0;f<l;f++)h.push(t.readUshort(e,(l<3?n-4:c)+2*f));if(4==u)for(var f=0;f<l;f++)h.push(t.readUint(e,(l<2?n-4:c)+4*f));if(5==u)for(var f=0;f<l;f++)h.push(t.readUint(e,c+8*f)/t.readUint(e,c+8*f+4));0==h.length&&console.log(\"unknown TIFF tag type: \",u,\"num:\",l)}return n},n.toRGBA8=function(t){var e=t.width,n=t.height,i=e*n,r=4*i,a=t.data,o=new Uint8Array(4*i),s=t.t262[0],u=t.t258?t.t258[0]:1;if(0==s){if(1==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l>>3]>>7-(7&l)&1;o[c]=o[c+1]=o[c+2]=255*(1-h),o[c+3]=255}if(4==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l>>1]>>4-4*(1&l)&15;o[c]=o[c+1]=o[c+2]=17*(15-h),o[c+3]=255}if(8==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l];o[c]=o[c+1]=o[c+2]=255-h,o[c+3]=255}}if(1==s){if(1==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l>>3]>>7-(7&l)&1;o[c]=o[c+1]=o[c+2]=255*h,o[c+3]=255}if(2==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l>>2]>>6-2*(3&l)&3;o[c]=o[c+1]=o[c+2]=85*h,o[c+3]=255}if(8==u)for(var l=0;l<i;l++){var c=l<<2,h=a[l];o[c]=o[c+1]=o[c+2]=h,o[c+3]=255}if(16==u)for(var l=0;l<i;l++){var c=l<<2,h=Math.max(0,a[2*l+1]-5)<<8|a[2*l];o[c]=o[c+1]=o[c+2]=Math.min(255,h),o[c+3]=255}}if(2==s)if(8==u)if(t.t338)if(1==t.t338[0])for(var l=0;l<r;l++)o[l]=a[l];else for(var l=0;l<r;l+=4)o[l]=a[l],o[l+1]=a[l+1],o[l+2]=a[l+2],o[l+3]=255;else{var f=t.t258?t.t258.length:3;if(4==f)for(var l=0;l<r;l++)o[l]=a[l];if(3==f)for(var l=0;l<i;l++){var c=l<<2,d=3*l;o[c]=a[d],o[c+1]=a[d+1],o[c+2]=a[d+2],o[c+3]=255}}else for(var l=0;l<i;l++){var c=l<<2,d=6*l;o[c]=a[d],o[c+1]=a[d+2],o[c+2]=a[d+4],o[c+3]=255}if(3==s)for(var p=t.t320,l=0;l<i;l++){var c=l<<2,_=a[l];o[c]=p[_]>>8,o[c+1]=p[256+_]>>8,o[c+2]=p[512+_]>>8,o[c+3]=255}if(5==s)for(var l=0;l<i;l++){var c=l<<2,v=255-a[c],g=255-a[c+1],m=255-a[c+2],y=(255-a[c+3])*(1/255);o[c]=Math.round(v*y),o[c+1]=Math.round(g*y),o[c+2]=Math.round(m*y),o[c+3]=255}return o},n.replaceIMG=function(){for(var t=document.getElementsByTagName(\"img\"),e=0;e<t.length;e++){var i=t[e],r=i.getAttribute(\"src\"),a=r.split(\".\").pop().toLowerCase();if(\"tif\"==a||\"tiff\"==a){var o=new XMLHttpRequest;n._xhrs.push(o),n._imgs.push(i),o.open(\"GET\",r),o.responseType=\"arraybuffer\",o.onload=n._imgLoaded,o.send()}}},n._xhrs=[],n._imgs=[],n._imgLoaded=function(t){var e=n.decode(t.target.response)[0],i=n.toRGBA8(e),r=e.width,a=e.height,o=n._xhrs.indexOf(t.target),s=n._imgs[o];n._xhrs.splice(o,1),n._imgs.splice(o,1);var u=document.createElement(\"canvas\");u.width=r,u.height=a;for(var l=u.getContext(\"2d\"),c=l.createImageData(r,a),h=0;h<i.length;h++)c.data[h]=i[h];l.putImageData(c,0,0);for(var f=[\"style\",\"class\",\"id\"],h=0;h<f.length;h++)u.setAttribute(f[h],s.getAttribute(f[h]));s.parentNode.replaceChild(u,s)},n._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){var i=n._binBE.ui8;return i[0]=t[e+3],i[1]=t[e+2],i[2]=t[e+1],i[3]=t[e],n._binBE.ui32[0]},readASCII:function(t,e,n){for(var i=\"\",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i}},n._binBE.ui8=new Uint8Array(4),n._binBE.ui32=new Uint32Array(n._binBE.ui8.buffer),n._binLE={nextZero:n._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readUint:function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},readASCII:n._binBE.readASCII},n._copyTile=function(t,e,n,i,r,a,o,s){for(var u=0;u<n;u++)for(var l=0;l<e;l++){var c=o+l,h=s+u;c<r&&h<a&&(i[h*r+c]=t[u*e+l])}},e.default=n,t.exports=e.default},function(t,e){t.exports=' <div id=App _v-210bbbd2=\"\"> <app-main _v-210bbbd2=\"\"></app-main> </div> <canvas id=source-canvas width=651 height=651 style=\"border:1px solid #d3d3d3; display: none\" _v-210bbbd2=\"\"> Your browser does not support the HTML5 canvas tag. </canvas> <canvas id=cut-canvas style=\"border:1px solid #d3d3d3; display: none\" _v-210bbbd2=\"\"> Your browser does not support the HTML5 canvas tag. </canvas> '},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(9),o=r(a),s=n(195),u=r(s),l=n(196),c=r(l),h=n(105),f=i(h),d=n(197),p=r(d),_=n(209),v=r(_),g=n(210),m=r(g),y=n(211),b=r(y),x=n(212),w=r(x),k=n(213),M=r(k),C=n(214),E=r(C),S=n(215),I=r(S),O=n(216),T=r(O),A=n(217),P=r(A);o.default.use(u.default),p.default.vueInstall({module:\"vx\",name:\"mutations\"},f);var j={pageWidth:0,pageHeight:0,event:{},comparedMessage:{},selections:{},lassoArea:[],featureColors:[],pageSize:{pageWidth:0,pageHeight:0},selectedImage:{},addedFeatures:{},transedFeatures:{}},R=Object.assign({},v.default,m.default,b.default,w.default,M.default,E.default,P.default,I.default,T.default,E.default);e.default=new u.default.Store({strict:!0,state:j,mutations:R,plugins:[(0,c.default)()]}),t.exports=e.default},,function(t,e){\"use strict\";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.collapsed,n=void 0===e||e,i=(t.transformer,t.mutationTransformer),a=void 0===i?function(t){return t}:i;return{snapshot:!0,onMutation:function(t,e,i){if(\"undefined\"!=typeof console){var o=new Date,s=\" @ \"+r(o.getHours(),2)+\":\"+r(o.getMinutes(),2)+\":\"+r(o.getSeconds(),2)+\".\"+r(o.getMilliseconds(),3),u=a(t),l=\"mutation \"+t.type+s,c=n?console.groupCollapsed:console.group;try{c.call(console,l)}catch(t){console.log(l)}console.log(\"%c prev state\",\"color: #9E9E9E; font-weight: bold\",i),console.log(\"%c mutation\",\"color: #03A9F4; font-weight: bold\",u),console.log(\"%c next state\",\"color: #4CAF50; font-weight: bold\",e);try{console.groupEnd()}catch(t){console.log(\"—— log end ——\")}}}}}function i(t,e){return new Array(e+1).join(t)}function r(t,e){return i(\"0\",e-t.toString().length)+t}t.exports=n},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(198),o=r(a),s=n(201),u=r(s),l=n(199),c=i(l),h=n(202),f=r(h),d=n(203),p=r(d),_=n(205),v=r(_),g=n(206),m=r(g),y=n(207),b=r(y),x=n(200),w=r(x);e.default={bluePromise:f.default,checkFunctions:u.default,logs:c,utils:p.default,vueInstall:v.default,windowInstall:m.default,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.directives,i=void 0===n?{}:n;w.default.debug&&(p.default.uBanner(\"SKY EYE\"),p.default.uStrBordered(\"Welcome To Skyeye FrontEnd Group !!!\"),p.default.uStrBordered(\"Our Wiki is https://confluence.b.360.cn/pages/viewpage.action?pageId=10092643\")),t.use(o.default,i.check),t.use(b.default),(0,v.default)({module:\"$f\",name:\"bluePromise\"},f.default),(0,v.default)({module:\"$f\",name:\"checkFunctions\"},u.default),(0,v.default)({module:\"$f\",name:\"logs\"},c),(0,v.default)({module:\"$f\",name:\"utils\"},p.default),(0,v.default)({module:\"$f\",name:\"vueInstall\"},v.default),(0,v.default)({module:\"$f\",name:\"windowInstall\"},m.default)}},t.exports=e.default},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(199),a=n(201),o=i(a);e.default={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.name,i=void 0===n?\"check\":n,a=e.functions,s=void 0===a?{}:a,u='自定义指令\"'+i+'\"';Object.assign(o.default,s);var l={params:[\"check-method\",\"check-result\",\"check-params\"],bind:function(){this.checkMethod=this.params.checkMethod,this.checkResult=this.params.checkResult,this.checkParams=this.params.checkParams,this.checkParams instanceof Array||(this.checkParams=[]),this.checkFunction=o.default[this.checkMethod]},update:function(t){if(this.modifiers.force||null!==t){var e=!0;this.checkFunction instanceof Function?e=this.checkFunction.apply(o.default,[t].concat(this.checkParams)):console.error(u+\"不支持方法\"+this.checkMethod),this.vm.$set(this.checkResult,e)}}};t.directive(i,l),(0,r.info)(u+\"安装成功\",\"支持的方法有：\"+Object.keys(o.default).toString())}},t.exports=e.default},,,,function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},a=n(199),o=n(127),s=i(o),u=function(t,e,n){return new s.default(function(i,o){var s=function(e){i(e),(0,a.info)(\"bluePromise[\"+t+\".resolve]\",e),n instanceof Function&&n(\"resolve\",e)},u=function(e){var i=void 0;e instanceof Error?i=e:(i=new Error,i.data=e,e instanceof Object?i.message=e.message:[\"string\",\"number\"].indexOf(\"undefined\"==typeof e?\"undefined\":r(e))!==-1&&(i.message=e),i.message=i.message||\"发生了未知错误\"),o(i),(0,a.warn)(\"bluePromise[\"+t+\".reject]\",i),n instanceof Function&&n(\"reject\",i)};try{e(s,u)}catch(e){console.error(\"bluePromise[\"+t+\".error]\",e)}})};e.default=u,t.exports=e.default},,,function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(9),a=i(r),o=n(206),s=i(o),u=n(199),l=[];(0,s.default)(\"showVueInstalled\",function(){return l}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.module,n=void 0===e?\"\":e,i=t.name,r=void 0===i?\"\":i,o=arguments[1];if(!(n&&r&&o))throw(0,u.warn)(\"vueInstall：参数设置错误\",n,r,o),new Error(\"vueInstall：参数设置错误\");var s=\"\"+n+(r.charAt(0).toUpperCase()+r.slice(1,r.length));a.default.hasOwnProperty(s)?(0,u.warn)('vueInstall：Vue已经有\"'+s+'\"属性'):(a.default[s]=o,l.push(s),(0,u.info)(\"vueInstall：Vue.\"+s+\"安装成功\")),a.default.prototype.hasOwnProperty(s)?(0,u.warn)('vueInstall：Vue.prototype已经有\"'+s+'\"属性'):(a.default.prototype[s]=o,(0,u.info)(\"vueInstall：Vue.prototype.\"+s+\"安装成功\"))},t.exports=e.default},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(199);e.default=function(t,e){if(!t)throw(0,i.warn)(\"windowInstall：参数设置错误\",t,e),new Error(\"windowInstall：参数设置错误\");var n=\"skyfenv\"+(t.charAt(0).toUpperCase()+t.slice(1,t.length));window.hasOwnProperty(n)?(0,i.warn)('windowInstall：window已经有\"'+n+'\"属性'):(window[n]=e,(0,i.info)(\"windowInstall：window.\"+n+\"安装成功\"))},t.exports=e.default},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=function(){function t(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}();n(208);var r=n(199),a=function(t,e){var n=function(t){return function(e){var n=e.__vue__||e.__v_trans&&e.__v_trans.vm||null,i=e.getAttribute(\"namespace\");if(n){var r=\"transition\";i&&(r+=i.charAt(0).toUpperCase()+i.substring(1,i.length)),r+=t.charAt(0).toUpperCase()+t.substring(1,t.length),n[r]instanceof Function&&n[r]()}}};return{enterClass:t,leaveClass:e,beforeEnter:n(\"beforeEnter\"),enter:n(\"enter\"),afterEnter:n(\"afterEnter\"),enterCancelled:n(\"enterCancelled\"),beforeLeave:n(\"beforeLeave\"),leave:n(\"leave\"),afterLeave:n(\"afterLeave\"),leaveCancelled:n(\"leaveCancelled\")}},o=[{name:\"bounce\",types:[[\"\",\"\"],[\"U\",\"Up\"],[\"D\",\"Down\"],[\"L\",\"Left\"],[\"R\",\"Right\"]]},{name:\"fade\",types:[[\"\",\"\"],[\"U\",\"Up\"],[\"D\",\"Down\"],[\"L\",\"Left\"],[\"R\",\"Right\"]]},{name:\"slide\",types:[[\"U\",\"Up\"],[\"D\",\"Down\"],[\"L\",\"Left\"],[\"R\",\"Right\"]]},{name:\"zoom\",types:[[\"\",\"\"],[\"U\",\"Up\"],[\"D\",\"Down\"],[\"L\",\"Left\"],[\"R\",\"Right\"]]},{name:\"flip\",types:[[\"X\",\"X\"],[\"Y\",\"Y\"]]},{name:\"lightSpeed\",types:[[\"\",\"\"]]},{name:\"roll\",types:[[\"\",\"\"]]},{name:\"rotate\",types:[[\"\",\"\"],[\"DL\",\"DownLeft\"],[\"DR\",\"DownRight\"],[\"UL\",\"UpLeft\"],[\"UR\",\"UpRight\"]]}];e.default={install:function(t){var e={},n=[];o.forEach(function(r){r.types.forEach(function(o){var s=i(o,2),u=s[0],l=s[1];r.types.forEach(function(o){var s=i(o,2),c=s[0],h=s[1],f=r.name+u+c,d=r.name+\"In\"+l,p=r.name+\"Out\"+h;e[f]||(e[f]=[d,p],n.push(f),t.transition(f,a(d,p)))})})}),(0,r.info)(\"自定义过渡器安装成功\",\"支持的效果有：\"+n.toString())}},t.exports=e.default},function(t,e){},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a,o=n(105),s=i(o);e.default=(a={},r(a,s.UPDATE_PAGE_WIDTH,function(t,e){t.pageWidth=e}),r(a,s.UPDATE_PAGE_HEIGHT,function(t,e){t.pageHeight=e}),r(a,s.UPDATE_PAGE_SIZE,function(t,e,n){t.pageSize.pageWidth=e,t.pageSize.pageHeight=n}),a),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.EVENT_SUBMIT,function(t,e){t.event=e}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.IMG_COMPARE,function(t,e){t.comparedMessage=e}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.EXPORT_AREA,function(t,e){t.lassoArea=e}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var o,s=n(105),u=r(s),l=n(168),c=i(l);e.default=(o={},a(o,u.CREATE_SELECTION,function(t,e,n){if(t.selections.regions||(t.selections.regions={}),t.selections.regions.hasOwnProperty(e)){var i=t.selections.regions[e];for(var r in n.regions)i.regions[r]=n.regions[r]}else t.selections.regions[e]=n}),a(o,u.UPDATE_SELECTION,function(t,e,n){t.selections.regions[e]=n}),a(o,u.ACTIVE_IMAGE_SELECTION,function(t,e){void 0===t.selections.activeImages&&(t.selections.activeImages=[]),2===t.selections.activeImages.length&&(t.selections.activeImages=[]),t.selections.activeImages.push(e)}),a(o,u.ACTIVE_REGION_SELECTION,function(t,e,n){t.selections.activeRegion={imgId:e,id:n}}),a(o,u.ACTIVE_REGION_SELECTION_IDS,function(t,e,n){t.selections.activeRegionByIds={};var i=t.selections.regions[e],r={},a={},o=i.regions;a=c.default.cloneDeep(i),Array.isArray(n)?(n.forEach(function(t){o.hasOwnProperty(t)&&(r[t]=o[t])}),a.regions=r):(o.hasOwnProperty(n)&&(r[n]=o[n]),a.regions=r);var s={};return s[e]=a,t.selections.activeRegionByIds=s,t.selections.activeRegionByIds}),a(o,u.ACTIVE_REGION_SELECTION_IMAGES,function(t,e,n){t.selections.activeRegionsImages={},t.selections.activeRegionsImages[e]=n}),o),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.IMAGE_TO_TAGGED_VIEW,function(t,e){t.selectedImage=e;\n}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.ADD_FEATURES,function(t,e){t.addedFeatures=e}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.TRANS_FEATURES,function(t,e){t.transedFeatures=e}),t.exports=e.default},function(t,e,n){\"use strict\";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,\"__esModule\",{value:!0});var a=n(105),o=i(a);e.default=r({},o.CHANGE_ICON_LIST,function(t,e){t.featureColors=e}),t.exports=e.default}]);\n\n\n// WEBPACK FOOTER //\n// index.bundle.91f31023.js"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}